const e=[127462,127487];function t(e){return 8205===e||65038===e||65039===e||e>=127995&&e<=128e3||e>=129456&&e<=129460||e>=917536&&e<=917632}function i(t){return t>=e[0]&&t<=e[1]}function n(e){if(/^[\u0020-\u00FF]*$/.test(e))return e;const n=[],r=function(e){const t=[];for(let i=0;i<e.length;i++){let n=e.charCodeAt(i);if(n>=55296&&n<=56319){const t=e.charCodeAt(i+1);t>=56320&&t<=57343&&(n=65536+1024*(n-55296)+(t-56320),i++)}t.push(n)}return t}(e);let s=0;for(;s<r.length;){const e=r[s++],o=r[s];if(8205===o){const e=s-1;for(s+=2;8205===r[s];)s+=2;n.push(String.fromCodePoint(...r.slice(e,2*s-e+1)))}else if(t(o)){const e=s-1;for(;t(r[s]);)s+=8205===r[s]?2:1;n.push(String.fromCodePoint(...r.slice(e,2*s-e-1)))}else i(e)?(s+=1,n.push(String.fromCodePoint(...r.slice(s-2,2)))):n.push(String.fromCodePoint(e))}return n}class r{constructor(e){this.obeyspaces=!1,this.s=n(e),this.pos=0}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:""}peek(){return this.s[this.pos]}match(e){let t;return t="string"==typeof this.s?e.exec(this.s.slice(this.pos)):e.exec(this.s.slice(this.pos).join("")),(null==t?void 0:t[0])?(this.pos+=t[0].length,t[0]):null}next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]+/))return"<space>";if(this.obeyspaces&&this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]/))return"<space>";const e=this.get();if("\\"===e){if(!this.end()){let e=this.match(/^[a-zA-Z*]+/);if(e)this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]*/);else if(e=this.get()," "===e)return"<space>";return"\\"+e}}else{if("{"===e)return"<{>";if("}"===e)return"<}>";if("^"===e){if("^"===this.peek()){this.get();const e=this.match(/^(\^(\^(\^(\^[0-9a-f])?[0-9a-f])?[0-9a-f])?[0-9a-f])?[0-9a-f][0-9a-f]/);if(e)return String.fromCodePoint(parseInt(e.slice(e.lastIndexOf("^")+1),16))}return e}if("#"===e){if(!this.end()){let e=!1;if(/[0-9?]/.test(this.peek())&&(e=!0,this.pos+1<this.s.length)){const t=this.s[this.pos+1];e=/[^0-9A-Za-z]/.test(t)}return e?"#"+this.get():"#"}}else if("$"===e)return"$"===this.peek()?(this.get(),"<$$>"):"<$>"}return e}}function s(e,t){var i,n,r,s;let a=[],l=e.next();if(l)if("\\relax"===l);else if("\\noexpand"===l)l=e.next(),l&&a.push(l);else if("\\obeyspaces"===l)e.obeyspaces=!0;else if("\\space"===l||"~"===l)a.push("<space>");else if("\\bgroup"===l)a.push("<{>");else if("\\egroup"===l)a.push("<}>");else if("\\string"===l)l=e.next(),l&&("\\"===l[0]?Array.from(l).forEach((e=>a.push("\\"===e?"\\backslash":e))):"<{>"===l?a.push("\\{"):"<space>"===l?a.push("~"):"<}>"===l&&a.push("\\}"));else if("\\csname"===l){for(;"<space>"===e.peek();)e.next();let r="",s=!1,u=[];do{if(0===u.length)if(/^#[0-9?]$/.test(e.peek())){const r=e.get().slice(1);u=o(null!==(n=null!==(i=null==t?void 0:t[r])&&void 0!==i?i:null==t?void 0:t["?"])&&void 0!==n?n:"\\placeholder{}",t),l=u[0]}else l=e.next(),u=l?[l]:[];s=0===u.length,s||"\\endcsname"!==l||(s=!0,u.shift()),s||(s="<$>"===l||"<$$>"===l||"<{>"===l||"<}>"===l||!!l&&l.length>1&&"\\"===l[0]),s||(r+=u.shift())}while(!s);r&&a.push("\\"+r),a=a.concat(u)}else if("\\endcsname"===l);else if(l.length>1&&"#"===l[0]){const e=l.slice(1);a=a.concat(o(null!==(s=null!==(r=null==t?void 0:t[e])&&void 0!==r?r:null==t?void 0:t["?"])&&void 0!==s?s:"\\placeholder{}",t))}else a.push(l);return a}function o(e,t){const i=e.toString().split(/\r?\n/);let n="",o="";for(const e of i){n+=o,o=" ";const t=e.match(/((?:\\%)|[^%])*/);null!==t&&(n+=t[0])}const a=new r(n);let l=[];do{l=l.concat(s(a,t))}while(!a.end());return l}function a(e){let t="",i="";for(const n of e)n&&(/[a-zA-Z*]/.test(n[0])&&(i+=t),t=/\\[a-zA-Z]+\*?$/.test(n)?" ":"",i+=n);return i}function l(e){let t=[];if(Array.isArray(e))for(const i of e)Array.isArray(i)?t=[...t,...i]:t.push(i);else t=[e];return a(t.map((e=>{var t;return null!==(t={"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"}[e])&&void 0!==t?t:e})))}var u,c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},f={exports:{}};u=f,function(e){var t,i,n,r,s=9e15,o=1e9,a="0123456789abcdef",l="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",c="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",f={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-s,maxE:s,crypto:!1},h=!0,m="[DecimalError] ",p=m+"Invalid argument: ",g=m+"Precision limit exceeded",d=m+"crypto unavailable",v=Math.floor,x=Math.pow,b=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,y=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,N=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,w=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,S=1e7,M=l.length-1,E=c.length-1,A={name:"[object Decimal]"};function D(e){var t,i,n,r=e.length-1,s="",o=e[0];if(r>0){for(s+=o,t=1;t<r;t++)(i=7-(n=e[t]+"").length)&&(s+=z(i)),s+=n;(i=7-(n=(o=e[t])+"").length)&&(s+=z(i))}else if(0===o)return"0";for(;o%10==0;)o/=10;return s+o}function C(e,t,i){if(e!==~~e||e<t||e>i)throw Error(p+e)}function k(e,t,i,n){var r,s,o,a;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=7,r=0):(r=Math.ceil((t+1)/7),t%=7),s=x(10,7-t),a=e[r]%s|0,null==n?t<3?(0==t?a=a/100|0:1==t&&(a=a/10|0),o=i<4&&99999==a||i>3&&49999==a||5e4==a||0==a):o=(i<4&&a+1==s||i>3&&a+1==s/2)&&(e[r+1]/s/100|0)==x(10,t-2)-1||(a==s/2||0==a)&&0==(e[r+1]/s/100|0):t<4?(0==t?a=a/1e3|0:1==t?a=a/100|0:2==t&&(a=a/10|0),o=(n||i<4)&&9999==a||!n&&i>3&&4999==a):o=((n||i<4)&&a+1==s||!n&&i>3&&a+1==s/2)&&(e[r+1]/s/1e3|0)==x(10,t-3)-1,o}function _(e,t,i){for(var n,r,s=[0],o=0,l=e.length;o<l;){for(r=s.length;r--;)s[r]*=t;for(s[0]+=a.indexOf(e.charAt(o++)),n=0;n<s.length;n++)s[n]>i-1&&(void 0===s[n+1]&&(s[n+1]=0),s[n+1]+=s[n]/i|0,s[n]%=i)}return s.reverse()}A.absoluteValue=A.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),q(e)},A.ceil=function(){return q(new this.constructor(this),this.e+1,2)},A.comparedTo=A.cmp=function(e){var t,i,n,r,s=this,o=s.d,a=(e=new s.constructor(e)).d,l=s.s,u=e.s;if(!o||!a)return l&&u?l!==u?l:o===a?0:!o^l<0?1:-1:NaN;if(!o[0]||!a[0])return o[0]?l:a[0]?-u:0;if(l!==u)return l;if(s.e!==e.e)return s.e>e.e^l<0?1:-1;for(t=0,i=(n=o.length)<(r=a.length)?n:r;t<i;++t)if(o[t]!==a[t])return o[t]>a[t]^l<0?1:-1;return n===r?0:n>r^l<0?1:-1},A.cosine=A.cos=function(){var e,t,i=this,n=i.constructor;return i.d?i.d[0]?(e=n.precision,t=n.rounding,n.precision=e+Math.max(i.e,i.sd())+7,n.rounding=1,i=function(e,t){var i,n,r=t.d.length;r<32?n=(1/W(4,i=Math.ceil(r/3))).toString():(i=16,n="2.3283064365386962890625e-10"),e.precision+=i,t=G(e,1,t.times(n),new e(1));for(var s=i;s--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=i,t}(n,V(n,i)),n.precision=e,n.rounding=t,q(2==r||3==r?i.neg():i,e,t,!0)):new n(1):new n(NaN)},A.cubeRoot=A.cbrt=function(){var e,t,i,n,r,s,o,a,l,u,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(h=!1,(s=c.s*x(c.s*c,1/3))&&Math.abs(s)!=1/0?n=new f(s.toString()):(i=D(c.d),(s=((e=c.e)-i.length+1)%3)&&(i+=1==s||-2==s?"0":"00"),s=x(i,1/3),e=v((e+1)/3)-(e%3==(e<0?-1:2)),(n=new f(i=s==1/0?"5e"+e:(i=s.toExponential()).slice(0,i.indexOf("e")+1)+e)).s=c.s),o=(e=f.precision)+3;;)if(u=(l=(a=n).times(a).times(a)).plus(c),n=F(u.plus(c).times(a),u.plus(l),o+2,1),D(a.d).slice(0,o)===(i=D(n.d)).slice(0,o)){if("9999"!=(i=i.slice(o-3,o+1))&&(r||"4999"!=i)){+i&&(+i.slice(1)||"5"!=i.charAt(0))||(q(n,e+1,1),t=!n.times(n).times(n).eq(c));break}if(!r&&(q(a,e+1,0),a.times(a).times(a).eq(c))){n=a;break}o+=4,r=1}return h=!0,q(n,e,f.rounding,t)},A.decimalPlaces=A.dp=function(){var e,t=this.d,i=NaN;if(t){if(i=7*((e=t.length-1)-v(this.e/7)),e=t[e])for(;e%10==0;e/=10)i--;i<0&&(i=0)}return i},A.dividedBy=A.div=function(e){return F(this,new this.constructor(e))},A.dividedToIntegerBy=A.divToInt=function(e){var t=this.constructor;return q(F(this,new t(e),0,1,1),t.precision,t.rounding)},A.equals=A.eq=function(e){return 0===this.cmp(e)},A.floor=function(){return q(new this.constructor(this),this.e+1,3)},A.greaterThan=A.gt=function(e){return this.cmp(e)>0},A.greaterThanOrEqualTo=A.gte=function(e){var t=this.cmp(e);return 1==t||0===t},A.hyperbolicCosine=A.cosh=function(){var e,t,i,n,r,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;i=o.precision,n=o.rounding,o.precision=i+Math.max(s.e,s.sd())+4,o.rounding=1,(r=s.d.length)<32?t=(1/W(4,e=Math.ceil(r/3))).toString():(e=16,t="2.3283064365386962890625e-10"),s=G(o,1,s.times(t),new o(1),!0);for(var l,u=e,c=new o(8);u--;)l=s.times(s),s=a.minus(l.times(c.minus(l.times(c))));return q(s,o.precision=i,o.rounding=n,!0)},A.hyperbolicSine=A.sinh=function(){var e,t,i,n,r=this,s=r.constructor;if(!r.isFinite()||r.isZero())return new s(r);if(t=s.precision,i=s.rounding,s.precision=t+Math.max(r.e,r.sd())+4,s.rounding=1,(n=r.d.length)<3)r=G(s,2,r,r,!0);else{e=(e=1.4*Math.sqrt(n))>16?16:0|e,r=G(s,2,r=r.times(1/W(5,e)),r,!0);for(var o,a=new s(5),l=new s(16),u=new s(20);e--;)o=r.times(r),r=r.times(a.plus(o.times(l.times(o).plus(u))))}return s.precision=t,s.rounding=i,q(r,t,i,!0)},A.hyperbolicTangent=A.tanh=function(){var e,t,i=this,n=i.constructor;return i.isFinite()?i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+7,n.rounding=1,F(i.sinh(),i.cosh(),n.precision=e,n.rounding=t)):new n(i.s)},A.inverseCosine=A.acos=function(){var e,t=this,i=t.constructor,n=t.abs().cmp(1),r=i.precision,s=i.rounding;return-1!==n?0===n?t.isNeg()?O(i,r,s):new i(0):new i(NaN):t.isZero()?O(i,r+4,s).times(.5):(i.precision=r+6,i.rounding=1,t=t.asin(),e=O(i,r+4,s).times(.5),i.precision=r,i.rounding=s,e.minus(t))},A.inverseHyperbolicCosine=A.acosh=function(){var e,t,i=this,n=i.constructor;return i.lte(1)?new n(i.eq(1)?0:NaN):i.isFinite()?(e=n.precision,t=n.rounding,n.precision=e+Math.max(Math.abs(i.e),i.sd())+4,n.rounding=1,h=!1,i=i.times(i).minus(1).sqrt().plus(i),h=!0,n.precision=e,n.rounding=t,i.ln()):new n(i)},A.inverseHyperbolicSine=A.asinh=function(){var e,t,i=this,n=i.constructor;return!i.isFinite()||i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+2*Math.max(Math.abs(i.e),i.sd())+6,n.rounding=1,h=!1,i=i.times(i).plus(1).sqrt().plus(i),h=!0,n.precision=e,n.rounding=t,i.ln())},A.inverseHyperbolicTangent=A.atanh=function(){var e,t,i,n,r=this,s=r.constructor;return r.isFinite()?r.e>=0?new s(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(e=s.precision,t=s.rounding,n=r.sd(),Math.max(n,e)<2*-r.e-1?q(new s(r),e,t,!0):(s.precision=i=n-r.e,r=F(r.plus(1),new s(1).minus(r),i+e,1),s.precision=e+4,s.rounding=1,r=r.ln(),s.precision=e,s.rounding=t,r.times(.5))):new s(NaN)},A.inverseSine=A.asin=function(){var e,t,i,n,r=this,s=r.constructor;return r.isZero()?new s(r):(t=r.abs().cmp(1),i=s.precision,n=s.rounding,-1!==t?0===t?((e=O(s,i+4,n).times(.5)).s=r.s,e):new s(NaN):(s.precision=i+6,s.rounding=1,r=r.div(new s(1).minus(r.times(r)).sqrt().plus(1)).atan(),s.precision=i,s.rounding=n,r.times(2)))},A.inverseTangent=A.atan=function(){var e,t,i,n,r,s,o,a,l,u=this,c=u.constructor,f=c.precision,m=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&f+4<=E)return(o=O(c,f+4,m).times(.25)).s=u.s,o}else{if(!u.s)return new c(NaN);if(f+4<=E)return(o=O(c,f+4,m).times(.5)).s=u.s,o}for(c.precision=a=f+10,c.rounding=1,e=i=Math.min(28,a/7+2|0);e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(h=!1,t=Math.ceil(a/7),n=1,l=u.times(u),o=new c(u),r=u;-1!==e;)if(r=r.times(l),s=o.minus(r.div(n+=2)),r=r.times(l),void 0!==(o=s.plus(r.div(n+=2))).d[t])for(e=t;o.d[e]===s.d[e]&&e--;);return i&&(o=o.times(2<<i-1)),h=!0,q(o,c.precision=f,c.rounding=m,!0)},A.isFinite=function(){return!!this.d},A.isInteger=A.isInt=function(){return!!this.d&&v(this.e/7)>this.d.length-2},A.isNaN=function(){return!this.s},A.isNegative=A.isNeg=function(){return this.s<0},A.isPositive=A.isPos=function(){return this.s>0},A.isZero=function(){return!!this.d&&0===this.d[0]},A.lessThan=A.lt=function(e){return this.cmp(e)<0},A.lessThanOrEqualTo=A.lte=function(e){return this.cmp(e)<1},A.logarithm=A.log=function(e){var t,i,n,r,s,o,a,l,u=this,c=u.constructor,f=c.precision,m=c.rounding;if(null==e)e=new c(10),t=!0;else{if(i=(e=new c(e)).d,e.s<0||!i||!i[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(i=u.d,u.s<0||!i||!i[0]||u.eq(1))return new c(i&&!i[0]?-1/0:1!=u.s?NaN:i?0:1/0);if(t)if(i.length>1)s=!0;else{for(r=i[0];r%10==0;)r/=10;s=1!==r}if(h=!1,o=B(u,a=f+5),n=t?T(c,a+10):B(e,a),k((l=F(o,n,a,1)).d,r=f,m))do{if(o=B(u,a+=10),n=t?T(c,a+10):B(e,a),l=F(o,n,a,1),!s){+D(l.d).slice(r+1,r+15)+1==1e14&&(l=q(l,f+1,0));break}}while(k(l.d,r+=10,m));return h=!0,q(l,f,m)},A.minus=A.sub=function(e){var t,i,n,r,s,o,a,l,u,c,f,m,p=this,g=p.constructor;if(e=new g(e),!p.d||!e.d)return p.s&&e.s?p.d?e.s=-e.s:e=new g(e.d||p.s!==e.s?p:NaN):e=new g(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.plus(e);if(u=p.d,m=e.d,a=g.precision,l=g.rounding,!u[0]||!m[0]){if(m[0])e.s=-e.s;else{if(!u[0])return new g(3===l?-0:0);e=new g(p)}return h?q(e,a,l):e}if(i=v(e.e/7),c=v(p.e/7),u=u.slice(),s=c-i){for((f=s<0)?(t=u,s=-s,o=m.length):(t=m,i=c,o=u.length),s>(n=Math.max(Math.ceil(a/7),o)+2)&&(s=n,t.length=1),t.reverse(),n=s;n--;)t.push(0);t.reverse()}else{for((f=(n=u.length)<(o=m.length))&&(o=n),n=0;n<o;n++)if(u[n]!=m[n]){f=u[n]<m[n];break}s=0}for(f&&(t=u,u=m,m=t,e.s=-e.s),o=u.length,n=m.length-o;n>0;--n)u[o++]=0;for(n=m.length;n>s;){if(u[--n]<m[n]){for(r=n;r&&0===u[--r];)u[r]=S-1;--u[r],u[n]+=S}u[n]-=m[n]}for(;0===u[--o];)u.pop();for(;0===u[0];u.shift())--i;return u[0]?(e.d=u,e.e=P(u,i),h?q(e,a,l):e):new g(3===l?-0:0)},A.modulo=A.mod=function(e){var t,i=this,n=i.constructor;return e=new n(e),!i.d||!e.s||e.d&&!e.d[0]?new n(NaN):!e.d||i.d&&!i.d[0]?q(new n(i),n.precision,n.rounding):(h=!1,9==n.modulo?(t=F(i,e.abs(),0,3,1)).s*=e.s:t=F(i,e,0,n.modulo,1),t=t.times(e),h=!0,i.minus(t))},A.naturalExponential=A.exp=function(){return j(this)},A.naturalLogarithm=A.ln=function(){return B(this)},A.negated=A.neg=function(){var e=new this.constructor(this);return e.s=-e.s,q(e)},A.plus=A.add=function(e){var t,i,n,r,s,o,a,l,u,c,f=this,m=f.constructor;if(e=new m(e),!f.d||!e.d)return f.s&&e.s?f.d||(e=new m(e.d||f.s===e.s?f:NaN)):e=new m(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.minus(e);if(u=f.d,c=e.d,a=m.precision,l=m.rounding,!u[0]||!c[0])return c[0]||(e=new m(f)),h?q(e,a,l):e;if(s=v(f.e/7),n=v(e.e/7),u=u.slice(),r=s-n){for(r<0?(i=u,r=-r,o=c.length):(i=c,n=s,o=u.length),r>(o=(s=Math.ceil(a/7))>o?s+1:o+1)&&(r=o,i.length=1),i.reverse();r--;)i.push(0);i.reverse()}for((o=u.length)-(r=c.length)<0&&(r=o,i=c,c=u,u=i),t=0;r;)t=(u[--r]=u[r]+c[r]+t)/S|0,u[r]%=S;for(t&&(u.unshift(t),++n),o=u.length;0==u[--o];)u.pop();return e.d=u,e.e=P(u,n),h?q(e,a,l):e},A.precision=A.sd=function(e){var t,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(p+e);return i.d?(t=L(i.d),e&&i.e+1>t&&(t=i.e+1)):t=NaN,t},A.round=function(){var e=this,t=e.constructor;return q(new t(e),e.e+1,t.rounding)},A.sine=A.sin=function(){var e,t,i=this,n=i.constructor;return i.isFinite()?i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+Math.max(i.e,i.sd())+7,n.rounding=1,i=function(e,t){var i,n=t.d.length;if(n<3)return G(e,2,t,t);i=(i=1.4*Math.sqrt(n))>16?16:0|i,t=G(e,2,t=t.times(1/W(5,i)),t);for(var r,s=new e(5),o=new e(16),a=new e(20);i--;)r=t.times(t),t=t.times(s.plus(r.times(o.times(r).minus(a))));return t}(n,V(n,i)),n.precision=e,n.rounding=t,q(r>2?i.neg():i,e,t,!0)):new n(NaN)},A.squareRoot=A.sqrt=function(){var e,t,i,n,r,s,o=this,a=o.d,l=o.e,u=o.s,c=o.constructor;if(1!==u||!a||!a[0])return new c(!u||u<0&&(!a||a[0])?NaN:a?o:1/0);for(h=!1,0==(u=Math.sqrt(+o))||u==1/0?(((t=D(a)).length+l)%2==0&&(t+="0"),u=Math.sqrt(t),l=v((l+1)/2)-(l<0||l%2),n=new c(t=u==1/0?"5e"+l:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+l)):n=new c(u.toString()),i=(l=c.precision)+3;;)if(n=(s=n).plus(F(o,s,i+2,1)).times(.5),D(s.d).slice(0,i)===(t=D(n.d)).slice(0,i)){if("9999"!=(t=t.slice(i-3,i+1))&&(r||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(q(n,l+1,1),e=!n.times(n).eq(o));break}if(!r&&(q(s,l+1,0),s.times(s).eq(o))){n=s;break}i+=4,r=1}return h=!0,q(n,l,c.rounding,e)},A.tangent=A.tan=function(){var e,t,i=this,n=i.constructor;return i.isFinite()?i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+10,n.rounding=1,(i=i.sin()).s=1,i=F(i,new n(1).minus(i.times(i)).sqrt(),e+10,0),n.precision=e,n.rounding=t,q(2==r||4==r?i.neg():i,e,t,!0)):new n(NaN)},A.times=A.mul=function(e){var t,i,n,r,s,o,a,l,u,c=this,f=c.constructor,m=c.d,p=(e=new f(e)).d;if(e.s*=c.s,!(m&&m[0]&&p&&p[0]))return new f(!e.s||m&&!m[0]&&!p||p&&!p[0]&&!m?NaN:m&&p?0*e.s:e.s/0);for(i=v(c.e/7)+v(e.e/7),(l=m.length)<(u=p.length)&&(s=m,m=p,p=s,o=l,l=u,u=o),s=[],n=o=l+u;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,r=l+n;r>n;)a=s[r]+p[n]*m[r-n-1]+t,s[r--]=a%S|0,t=a/S|0;s[r]=(s[r]+t)%S|0}for(;!s[--o];)s.pop();return t?++i:s.shift(),e.d=s,e.e=P(s,i),h?q(e,f.precision,f.rounding):e},A.toBinary=function(e,t){return Y(this,2,e,t)},A.toDecimalPlaces=A.toDP=function(e,t){var i=this,n=i.constructor;return i=new n(i),void 0===e?i:(C(e,0,o),void 0===t?t=n.rounding:C(t,0,8),q(i,e+i.e+1,t))},A.toExponential=function(e,t){var i,n=this,r=n.constructor;return void 0===e?i=I(n,!0):(C(e,0,o),void 0===t?t=r.rounding:C(t,0,8),i=I(n=q(new r(n),e+1,t),!0,e+1)),n.isNeg()&&!n.isZero()?"-"+i:i},A.toFixed=function(e,t){var i,n,r=this,s=r.constructor;return void 0===e?i=I(r):(C(e,0,o),void 0===t?t=s.rounding:C(t,0,8),i=I(n=q(new s(r),e+r.e+1,t),!1,e+n.e+1)),r.isNeg()&&!r.isZero()?"-"+i:i},A.toFraction=function(e){var t,i,n,r,s,o,a,l,u,c,f,m,g=this,d=g.d,v=g.constructor;if(!d)return new v(g);if(u=i=new v(1),n=l=new v(0),o=(s=(t=new v(n)).e=L(d)-g.e-1)%7,t.d[0]=x(10,o<0?7+o:o),null==e)e=s>0?t:u;else{if(!(a=new v(e)).isInt()||a.lt(u))throw Error(p+a);e=a.gt(t)?s>0?t:u:a}for(h=!1,a=new v(D(d)),c=v.precision,v.precision=s=7*d.length*2;f=F(a,t,0,1,1),1!=(r=i.plus(f.times(n))).cmp(e);)i=n,n=r,r=u,u=l.plus(f.times(r)),l=r,r=t,t=a.minus(f.times(r)),a=r;return r=F(e.minus(i),n,0,1,1),l=l.plus(r.times(u)),i=i.plus(r.times(n)),l.s=u.s=g.s,m=F(u,n,s,1).minus(g).abs().cmp(F(l,i,s,1).minus(g).abs())<1?[u,n]:[l,i],v.precision=c,h=!0,m},A.toHexadecimal=A.toHex=function(e,t){return Y(this,16,e,t)},A.toNearest=function(e,t){var i=this,n=i.constructor;if(i=new n(i),null==e){if(!i.d)return i;e=new n(1),t=n.rounding}else{if(e=new n(e),void 0===t?t=n.rounding:C(t,0,8),!i.d)return e.s?i:e;if(!e.d)return e.s&&(e.s=i.s),e}return e.d[0]?(h=!1,i=F(i,e,0,t,1).times(e),h=!0,q(i)):(e.s=i.s,i=e),i},A.toNumber=function(){return+this},A.toOctal=function(e,t){return Y(this,8,e,t)},A.toPower=A.pow=function(e){var t,i,n,r,s,o,a=this,l=a.constructor,u=+(e=new l(e));if(!(a.d&&e.d&&a.d[0]&&e.d[0]))return new l(x(+a,u));if((a=new l(a)).eq(1))return a;if(n=l.precision,s=l.rounding,e.eq(1))return q(a,n,s);if((t=v(e.e/7))>=e.d.length-1&&(i=u<0?-u:u)<=9007199254740991)return r=U(l,a,i,n),e.s<0?new l(1).div(r):q(r,n,s);if((o=a.s)<0){if(t<e.d.length-1)return new l(NaN);if(0==(1&e.d[t])&&(o=1),0==a.e&&1==a.d[0]&&1==a.d.length)return a.s=o,a}return(t=0!=(i=x(+a,u))&&isFinite(i)?new l(i+"").e:v(u*(Math.log("0."+D(a.d))/Math.LN10+a.e+1)))>l.maxE+1||t<l.minE-1?new l(t>0?o/0:0):(h=!1,l.rounding=a.s=1,i=Math.min(12,(t+"").length),(r=j(e.times(B(a,n+i)),n)).d&&k((r=q(r,n+5,1)).d,n,s)&&(t=n+10,+D((r=q(j(e.times(B(a,t+i)),t),t+5,1)).d).slice(n+1,n+15)+1==1e14&&(r=q(r,n+1,0))),r.s=o,h=!0,l.rounding=s,q(r,n,s))},A.toPrecision=function(e,t){var i,n=this,r=n.constructor;return void 0===e?i=I(n,n.e<=r.toExpNeg||n.e>=r.toExpPos):(C(e,1,o),void 0===t?t=r.rounding:C(t,0,8),i=I(n=q(new r(n),e,t),e<=n.e||n.e<=r.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+i:i},A.toSignificantDigits=A.toSD=function(e,t){var i=this.constructor;return void 0===e?(e=i.precision,t=i.rounding):(C(e,1,o),void 0===t?t=i.rounding:C(t,0,8)),q(new i(this),e,t)},A.toString=function(){var e=this,t=e.constructor,i=I(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+i:i},A.truncated=A.trunc=function(){return q(new this.constructor(this),this.e+1,1)},A.valueOf=A.toJSON=function(){var e=this,t=e.constructor,i=I(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+i:i};var F=function(){function e(e,t,i){var n,r=0,s=e.length;for(e=e.slice();s--;)n=e[s]*t+r,e[s]=n%i|0,r=n/i|0;return r&&e.unshift(r),e}function t(e,t,i,n){var r,s;if(i!=n)s=i>n?1:-1;else for(r=s=0;r<i;r++)if(e[r]!=t[r]){s=e[r]>t[r]?1:-1;break}return s}function n(e,t,i,n){for(var r=0;i--;)e[i]-=r,r=e[i]<t[i]?1:0,e[i]=r*n+e[i]-t[i];for(;!e[0]&&e.length>1;)e.shift()}return function(r,s,o,a,l,u){var c,f,h,m,p,g,d,x,b,y,N,w,M,E,A,D,C,k,_,F,I=r.constructor,P=r.s==s.s?1:-1,T=r.d,O=s.d;if(!(T&&T[0]&&O&&O[0]))return new I(r.s&&s.s&&(T?!O||T[0]!=O[0]:O)?T&&0==T[0]||!O?0*P:P/0:NaN);for(u?(p=1,f=r.e-s.e):(u=S,p=7,f=v(r.e/p)-v(s.e/p)),_=O.length,C=T.length,y=(b=new I(P)).d=[],h=0;O[h]==(T[h]||0);h++);if(O[h]>(T[h]||0)&&f--,null==o?(E=o=I.precision,a=I.rounding):E=l?o+(r.e-s.e)+1:o,E<0)y.push(1),g=!0;else{if(E=E/p+2|0,h=0,1==_){for(m=0,O=O[0],E++;(h<C||m)&&E--;h++)A=m*u+(T[h]||0),y[h]=A/O|0,m=A%O|0;g=m||h<C}else{for((m=u/(O[0]+1)|0)>1&&(O=e(O,m,u),T=e(T,m,u),_=O.length,C=T.length),D=_,w=(N=T.slice(0,_)).length;w<_;)N[w++]=0;(F=O.slice()).unshift(0),k=O[0],O[1]>=u/2&&++k;do{m=0,(c=t(O,N,_,w))<0?(M=N[0],_!=w&&(M=M*u+(N[1]||0)),(m=M/k|0)>1?(m>=u&&(m=u-1),1==(c=t(d=e(O,m,u),N,x=d.length,w=N.length))&&(m--,n(d,_<x?F:O,x,u))):(0==m&&(c=m=1),d=O.slice()),(x=d.length)<w&&d.unshift(0),n(N,d,w,u),-1==c&&(c=t(O,N,_,w=N.length))<1&&(m++,n(N,_<w?F:O,w,u)),w=N.length):0===c&&(m++,N=[0]),y[h++]=m,c&&N[0]?N[w++]=T[D]||0:(N=[T[D]],w=1)}while((D++<C||void 0!==N[0])&&E--);g=void 0!==N[0]}y[0]||y.shift()}if(1==p)b.e=f,i=g;else{for(h=1,m=y[0];m>=10;m/=10)h++;b.e=h+f*p-1,q(b,l?o+b.e+1:o,a,g)}return b}}();function q(e,t,i,n){var r,s,o,a,l,u,c,f,m,p=e.constructor;e:if(null!=t){if(!(f=e.d))return e;for(r=1,a=f[0];a>=10;a/=10)r++;if((s=t-r)<0)s+=7,o=t,l=(c=f[m=0])/x(10,r-o-1)%10|0;else if((m=Math.ceil((s+1)/7))>=(a=f.length)){if(!n)break e;for(;a++<=m;)f.push(0);c=l=0,r=1,o=(s%=7)-7+1}else{for(c=a=f[m],r=1;a>=10;a/=10)r++;l=(o=(s%=7)-7+r)<0?0:c/x(10,r-o-1)%10|0}if(n=n||t<0||void 0!==f[m+1]||(o<0?c:c%x(10,r-o-1)),u=i<4?(l||n)&&(0==i||i==(e.s<0?3:2)):l>5||5==l&&(4==i||n||6==i&&(s>0?o>0?c/x(10,r-o):0:f[m-1])%10&1||i==(e.s<0?8:7)),t<1||!f[0])return f.length=0,u?(t-=e.e+1,f[0]=x(10,(7-t%7)%7),e.e=-t||0):f[0]=e.e=0,e;if(0==s?(f.length=m,a=1,m--):(f.length=m+1,a=x(10,7-s),f[m]=o>0?(c/x(10,r-o)%x(10,o)|0)*a:0),u)for(;;){if(0==m){for(s=1,o=f[0];o>=10;o/=10)s++;for(o=f[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(e.e++,f[0]==S&&(f[0]=1));break}if(f[m]+=a,f[m]!=S)break;f[m--]=0,a=1}for(s=f.length;0===f[--s];)f.pop()}return h&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function I(e,t,i){if(!e.isFinite())return Z(e);var n,r=e.e,s=D(e.d),o=s.length;return t?(i&&(n=i-o)>0?s=s.charAt(0)+"."+s.slice(1)+z(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):r<0?(s="0."+z(-r-1)+s,i&&(n=i-o)>0&&(s+=z(n))):r>=o?(s+=z(r+1-o),i&&(n=i-r-1)>0&&(s=s+"."+z(n))):((n=r+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),i&&(n=i-o)>0&&(r+1===o&&(s+="."),s+=z(n))),s}function P(e,t){var i=e[0];for(t*=7;i>=10;i/=10)t++;return t}function T(e,t,i){if(t>M)throw h=!0,i&&(e.precision=i),Error(g);return q(new e(l),t,1,!0)}function O(e,t,i){if(t>E)throw Error(g);return q(new e(c),t,i,!0)}function L(e){var t=e.length-1,i=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)i--;for(t=e[0];t>=10;t/=10)i++}return i}function z(e){for(var t="";e--;)t+="0";return t}function U(e,t,i,n){var r,s=new e(1),o=Math.ceil(n/7+4);for(h=!1;;){if(i%2&&J((s=s.times(t)).d,o)&&(r=!0),0===(i=v(i/2))){i=s.d.length-1,r&&0===s.d[i]&&++s.d[i];break}J((t=t.times(t)).d,o)}return h=!0,s}function R(e){return 1&e.d[e.d.length-1]}function $(e,t,i){for(var n,r=new e(t[0]),s=0;++s<t.length;){if(!(n=new e(t[s])).s){r=n;break}r[i](n)&&(r=n)}return r}function j(e,t){var i,n,r,s,o,a,l,u=0,c=0,f=0,m=e.constructor,p=m.rounding,g=m.precision;if(!e.d||!e.d[0]||e.e>17)return new m(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(h=!1,l=g):l=t,a=new m(.03125);e.e>-2;)e=e.times(a),f+=5;for(l+=n=Math.log(x(2,f))/Math.LN10*2+5|0,i=s=o=new m(1),m.precision=l;;){if(s=q(s.times(e),l,1),i=i.times(++c),D((a=o.plus(F(s,i,l,1))).d).slice(0,l)===D(o.d).slice(0,l)){for(r=f;r--;)o=q(o.times(o),l,1);if(null!=t)return m.precision=g,o;if(!(u<3&&k(o.d,l-n,p,u)))return q(o,m.precision=g,p,h=!0);m.precision=l+=10,i=s=a=new m(1),c=0,u++}o=a}}function B(e,t){var i,n,r,s,o,a,l,u,c,f,m,p=1,g=e,d=g.d,v=g.constructor,x=v.rounding,b=v.precision;if(g.s<0||!d||!d[0]||!g.e&&1==d[0]&&1==d.length)return new v(d&&!d[0]?-1/0:1!=g.s?NaN:d?0:g);if(null==t?(h=!1,c=b):c=t,v.precision=c+=10,n=(i=D(d)).charAt(0),!(Math.abs(s=g.e)<15e14))return u=T(v,c+2,b).times(s+""),g=B(new v(n+"."+i.slice(1)),c-10).plus(u),v.precision=b,null==t?q(g,b,x,h=!0):g;for(;n<7&&1!=n||1==n&&i.charAt(1)>3;)n=(i=D((g=g.times(e)).d)).charAt(0),p++;for(s=g.e,n>1?(g=new v("0."+i),s++):g=new v(n+"."+i.slice(1)),f=g,l=o=g=F(g.minus(1),g.plus(1),c,1),m=q(g.times(g),c,1),r=3;;){if(o=q(o.times(m),c,1),D((u=l.plus(F(o,new v(r),c,1))).d).slice(0,c)===D(l.d).slice(0,c)){if(l=l.times(2),0!==s&&(l=l.plus(T(v,c+2,b).times(s+""))),l=F(l,new v(p),c,1),null!=t)return v.precision=b,l;if(!k(l.d,c-10,x,a))return q(l,v.precision=b,x,h=!0);v.precision=c+=10,u=o=g=F(f.minus(1),f.plus(1),c,1),m=q(g.times(g),c,1),r=a=1}l=u,r+=2}}function Z(e){return String(e.s*e.s/0)}function Q(e,t){var i,n,r;for((i=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(i<0&&(i=n),i+=+t.slice(n+1),t=t.substring(0,n)):i<0&&(i=t.length),n=0;48===t.charCodeAt(n);n++);for(r=t.length;48===t.charCodeAt(r-1);--r);if(t=t.slice(n,r)){if(r-=n,e.e=i=i-n-1,e.d=[],n=(i+1)%7,i<0&&(n+=7),n<r){for(n&&e.d.push(+t.slice(0,n)),r-=7;n<r;)e.d.push(+t.slice(n,n+=7));n=7-(t=t.slice(n)).length}else n-=r;for(;n--;)t+="0";e.d.push(+t),h&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function H(e,i){var n,r,s,o,a,l,u,c,f;if("Infinity"===i||"NaN"===i)return+i||(e.s=NaN),e.e=NaN,e.d=null,e;if(y.test(i))n=16,i=i.toLowerCase();else if(b.test(i))n=2;else{if(!N.test(i))throw Error(p+i);n=8}for((o=i.search(/p/i))>0?(u=+i.slice(o+1),i=i.substring(2,o)):i=i.slice(2),a=(o=i.indexOf("."))>=0,r=e.constructor,a&&(o=(l=(i=i.replace(".","")).length)-o,s=U(r,new r(n),o,2*o)),o=f=(c=_(i,n,S)).length-1;0===c[o];--o)c.pop();return o<0?new r(0*e.s):(e.e=P(c,f),e.d=c,h=!1,a&&(e=F(e,s,4*l)),u&&(e=e.times(Math.abs(u)<54?x(2,u):t.pow(2,u))),h=!0,e)}function G(e,t,i,n,r){var s,o,a,l,u=e.precision,c=Math.ceil(u/7);for(h=!1,l=i.times(i),a=new e(n);;){if(o=F(a.times(l),new e(t++*t++),u,1),a=r?n.plus(o):n.minus(o),n=F(o.times(l),new e(t++*t++),u,1),void 0!==(o=a.plus(n)).d[c]){for(s=c;o.d[s]===a.d[s]&&s--;);if(-1==s)break}s=a,a=n,n=o,o=s}return h=!0,o.d.length=c+1,o}function W(e,t){for(var i=e;--t;)i*=e;return i}function V(e,t){var i,n=t.s<0,s=O(e,e.precision,1),o=s.times(.5);if((t=t.abs()).lte(o))return r=n?4:1,t;if((i=t.divToInt(s)).isZero())r=n?3:2;else{if((t=t.minus(i.times(s))).lte(o))return r=R(i)?n?2:3:n?4:1,t;r=R(i)?n?1:4:n?3:2}return t.minus(s).abs()}function Y(e,t,n,r){var s,l,u,c,f,h,m,p,g,d=e.constructor,v=void 0!==n;if(v?(C(n,1,o),void 0===r?r=d.rounding:C(r,0,8)):(n=d.precision,r=d.rounding),e.isFinite()){for(v?(s=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):s=t,(u=(m=I(e)).indexOf("."))>=0&&(m=m.replace(".",""),(g=new d(1)).e=m.length-u,g.d=_(I(g),10,s),g.e=g.d.length),l=f=(p=_(m,10,s)).length;0==p[--f];)p.pop();if(p[0]){if(u<0?l--:((e=new d(e)).d=p,e.e=l,p=(e=F(e,g,n,r,0,s)).d,l=e.e,h=i),u=p[n],c=s/2,h=h||void 0!==p[n+1],h=r<4?(void 0!==u||h)&&(0===r||r===(e.s<0?3:2)):u>c||u===c&&(4===r||h||6===r&&1&p[n-1]||r===(e.s<0?8:7)),p.length=n,h)for(;++p[--n]>s-1;)p[n]=0,n||(++l,p.unshift(1));for(f=p.length;!p[f-1];--f);for(u=0,m="";u<f;u++)m+=a.charAt(p[u]);if(v){if(f>1)if(16==t||8==t){for(u=16==t?4:3,--f;f%u;f++)m+="0";for(f=(p=_(m,s,t)).length;!p[f-1];--f);for(u=1,m="1.";u<f;u++)m+=a.charAt(p[u])}else m=m.charAt(0)+"."+m.slice(1);m=m+(l<0?"p":"p+")+l}else if(l<0){for(;++l;)m="0"+m;m="0."+m}else if(++l>f)for(l-=f;l--;)m+="0";else l<f&&(m=m.slice(0,l)+"."+m.slice(l))}else m=v?"0p+0":"0";m=(16==t?"0x":2==t?"0b":8==t?"0o":"")+m}else m=Z(e);return e.s<0?"-"+m:m}function J(e,t){if(e.length>t)return e.length=t,!0}function K(e){return new this(e).abs()}function X(e){return new this(e).acos()}function ee(e){return new this(e).acosh()}function te(e,t){return new this(e).plus(t)}function ie(e){return new this(e).asin()}function ne(e){return new this(e).asinh()}function re(e){return new this(e).atan()}function se(e){return new this(e).atanh()}function oe(e,t){e=new this(e),t=new this(t);var i,n=this.precision,r=this.rounding,s=n+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(i=t.s<0?O(this,n,r):new this(0)).s=e.s:!e.d||t.isZero()?(i=O(this,s,1).times(.5)).s=e.s:t.s<0?(this.precision=s,this.rounding=1,i=this.atan(F(e,t,s,1)),t=O(this,s,1),this.precision=n,this.rounding=r,i=e.s<0?i.minus(t):i.plus(t)):i=this.atan(F(e,t,s,1)):(i=O(this,s,1).times(t.s>0?.25:.75)).s=e.s:i=new this(NaN),i}function ae(e){return new this(e).cbrt()}function le(e){return q(e=new this(e),e.e+1,2)}function ue(e){if(!e||"object"!=typeof e)throw Error(m+"Object expected");var t,i,n,r=!0===e.defaults,a=["precision",1,o,"rounding",0,8,"toExpNeg",-s,0,"toExpPos",0,s,"maxE",0,s,"minE",-s,0,"modulo",0,9];for(t=0;t<a.length;t+=3)if(i=a[t],r&&(this[i]=f[i]),void 0!==(n=e[i])){if(!(v(n)===n&&n>=a[t+1]&&n<=a[t+2]))throw Error(p+i+": "+n);this[i]=n}if(i="crypto",r&&(this[i]=f[i]),void 0!==(n=e[i])){if(!0!==n&&!1!==n&&0!==n&&1!==n)throw Error(p+i+": "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(d);this[i]=!0}else this[i]=!1}return this}function ce(e){return new this(e).cos()}function fe(e){return new this(e).cosh()}function he(e,t){return new this(e).div(t)}function me(e){return new this(e).exp()}function pe(e){return q(e=new this(e),e.e+1,3)}function ge(){var e,t,i=new this(0);for(h=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)i.d&&(i=i.plus(t.times(t)));else{if(t.s)return h=!0,new this(1/0);i=t}return h=!0,i.sqrt()}function de(e){return e instanceof t||e&&"[object Decimal]"===e.name||!1}function ve(e){return new this(e).ln()}function xe(e,t){return new this(e).log(t)}function be(e){return new this(e).log(2)}function ye(e){return new this(e).log(10)}function Ne(){return $(this,arguments,"lt")}function we(){return $(this,arguments,"gt")}function Se(e,t){return new this(e).mod(t)}function Me(e,t){return new this(e).mul(t)}function Ee(e,t){return new this(e).pow(t)}function Ae(e){var t,i,n,r,s=0,a=new this(1),l=[];if(void 0===e?e=this.precision:C(e,1,o),n=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));s<n;)(r=t[s])>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:l[s++]=r%1e7;else{if(!crypto.randomBytes)throw Error(d);for(t=crypto.randomBytes(n*=4);s<n;)(r=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((127&t[s+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,s):(l.push(r%1e7),s+=4);s=n/4}else for(;s<n;)l[s++]=1e7*Math.random()|0;for(e%=7,(n=l[--s])&&e&&(r=x(10,7-e),l[s]=(n/r|0)*r);0===l[s];s--)l.pop();if(s<0)i=0,l=[0];else{for(i=-1;0===l[0];i-=7)l.shift();for(n=1,r=l[0];r>=10;r/=10)n++;n<7&&(i-=7-n)}return a.e=i,a.d=l,a}function De(e){return q(e=new this(e),e.e+1,this.rounding)}function Ce(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function ke(e){return new this(e).sin()}function _e(e){return new this(e).sinh()}function Fe(e){return new this(e).sqrt()}function qe(e,t){return new this(e).sub(t)}function Ie(e){return new this(e).tan()}function Pe(e){return new this(e).tanh()}function Te(e){return q(e=new this(e),e.e+1,1)}(t=function e(t){var i,n,r;function s(e){var t,i,n,r=this;if(!(r instanceof s))return new s(e);if(r.constructor=s,e instanceof s)return r.s=e.s,void(h?!e.d||e.e>s.maxE?(r.e=NaN,r.d=null):e.e<s.minE?(r.e=0,r.d=[0]):(r.e=e.e,r.d=e.d.slice()):(r.e=e.e,r.d=e.d?e.d.slice():e.d));if("number"==(n=typeof e)){if(0===e)return r.s=1/e<0?-1:1,r.e=0,void(r.d=[0]);if(e<0?(e=-e,r.s=-1):r.s=1,e===~~e&&e<1e7){for(t=0,i=e;i>=10;i/=10)t++;return void(h?t>s.maxE?(r.e=NaN,r.d=null):t<s.minE?(r.e=0,r.d=[0]):(r.e=t,r.d=[e]):(r.e=t,r.d=[e]))}return 0*e!=0?(e||(r.s=NaN),r.e=NaN,void(r.d=null)):Q(r,e.toString())}if("string"!==n)throw Error(p+e);return 45===(i=e.charCodeAt(0))?(e=e.slice(1),r.s=-1):(43===i&&(e=e.slice(1)),r.s=1),w.test(e)?Q(r,e):H(r,e)}if(s.prototype=A,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=ue,s.clone=e,s.isDecimal=de,s.abs=K,s.acos=X,s.acosh=ee,s.add=te,s.asin=ie,s.asinh=ne,s.atan=re,s.atanh=se,s.atan2=oe,s.cbrt=ae,s.ceil=le,s.cos=ce,s.cosh=fe,s.div=he,s.exp=me,s.floor=pe,s.hypot=ge,s.ln=ve,s.log=xe,s.log10=ye,s.log2=be,s.max=Ne,s.min=we,s.mod=Se,s.mul=Me,s.pow=Ee,s.random=Ae,s.round=De,s.sign=Ce,s.sin=ke,s.sinh=_e,s.sqrt=Fe,s.sub=qe,s.tan=Ie,s.tanh=Pe,s.trunc=Te,void 0===t&&(t={}),t&&!0!==t.defaults)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],i=0;i<r.length;)t.hasOwnProperty(n=r[i++])||(t[n]=this[n]);return s.config(t),s}(f)).default=t.Decimal=t,l=new t(l),c=new t(c),u.exports?("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(A[Symbol.for("nodejs.util.inspect.custom")]=A.toString,A[Symbol.toStringTag]="Decimal"),u.exports=t):(e||(e="undefined"!=typeof self&&self&&self.self==self?self:window),n=e.Decimal,t.noConflict=function(){return e.Decimal=n,t},e.Decimal=t)}(c);var h={exports:{}};
/**
 * @license Complex.js v2.0.13 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/!function(e,t){!function(t){var i=function(e){return.5*(Math.exp(e)+Math.exp(-e))},n=function(e){return.5*(Math.exp(e)-Math.exp(-e))},r=function(){throw SyntaxError("Invalid Param")};function s(e,t){var i=Math.abs(e),n=Math.abs(t);return 0===e?Math.log(n):0===t?Math.log(i):i<3e3&&n<3e3?.5*Math.log(e*e+t*t):Math.log(e/Math.cos(Math.atan2(t,e)))}function o(e,t){if(!(this instanceof o))return new o(e,t);var i=function(e,t){var i={re:0,im:0};if(null==e)i.re=i.im=0;else if(void 0!==t)i.re=e,i.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)i.re=e.re,i.im=e.im;else if("abs"in e&&"arg"in e){if(!Number.isFinite(e.abs)&&Number.isFinite(e.arg))return o.INFINITY;i.re=e.abs*Math.cos(e.arg),i.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!Number.isFinite(e.r)&&Number.isFinite(e.phi))return o.INFINITY;i.re=e.r*Math.cos(e.phi),i.im=e.r*Math.sin(e.phi)}else 2===e.length?(i.re=e[0],i.im=e[1]):r();break;case"string":i.im=i.re=0;var n=e.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),s=1,a=0;null===n&&r();for(var l=0;l<n.length;l++){var u=n[l];" "===u||"\t"===u||"\n"===u||("+"===u?s++:"-"===u?a++:"i"===u||"I"===u?(s+a===0&&r()," "===n[l+1]||isNaN(n[l+1])?i.im+=parseFloat((a%2?"-":"")+"1"):(i.im+=parseFloat((a%2?"-":"")+n[l+1]),l++),s=a=0):((s+a===0||isNaN(u))&&r(),"i"===n[l+1]||"I"===n[l+1]?(i.im+=parseFloat((a%2?"-":"")+u),l++):i.re+=parseFloat((a%2?"-":"")+u),s=a=0))}s+a>0&&r();break;case"number":i.im=0,i.re=e;break;default:r()}return isNaN(i.re)||isNaN(i.im),i}(e,t);this.re=i.re,this.im=i.im}o.prototype={re:0,im:0,sign:function(){var e=this.abs();return new o(this.re/e,this.im/e)},add:function(e,t){var i=new o(e,t);return this.isInfinite()&&i.isInfinite()?o.NAN:this.isInfinite()||i.isInfinite()?o.INFINITY:new o(this.re+i.re,this.im+i.im)},sub:function(e,t){var i=new o(e,t);return this.isInfinite()&&i.isInfinite()?o.NAN:this.isInfinite()||i.isInfinite()?o.INFINITY:new o(this.re-i.re,this.im-i.im)},mul:function(e,t){var i=new o(e,t);return this.isInfinite()&&i.isZero()||this.isZero()&&i.isInfinite()?o.NAN:this.isInfinite()||i.isInfinite()?o.INFINITY:0===i.im&&0===this.im?new o(this.re*i.re,0):new o(this.re*i.re-this.im*i.im,this.re*i.im+this.im*i.re)},div:function(e,t){var i=new o(e,t);if(this.isZero()&&i.isZero()||this.isInfinite()&&i.isInfinite())return o.NAN;if(this.isInfinite()||i.isZero())return o.INFINITY;if(this.isZero()||i.isInfinite())return o.ZERO;e=this.re,t=this.im;var n,r,s=i.re,a=i.im;return 0===a?new o(e/s,t/s):Math.abs(s)<Math.abs(a)?new o((e*(r=s/a)+t)/(n=s*r+a),(t*r-e)/n):new o((e+t*(r=a/s))/(n=a*r+s),(t-e*r)/n)},pow:function(e,t){var i=new o(e,t);if(e=this.re,t=this.im,i.isZero())return o.ONE;if(0===i.im){if(0===t&&e>0)return new o(Math.pow(e,i.re),0);if(0===e)switch((i.re%4+4)%4){case 0:return new o(Math.pow(t,i.re),0);case 1:return new o(0,Math.pow(t,i.re));case 2:return new o(-Math.pow(t,i.re),0);case 3:return new o(0,-Math.pow(t,i.re))}}if(0===e&&0===t&&i.re>0&&i.im>=0)return o.ZERO;var n=Math.atan2(t,e),r=s(e,t);return e=Math.exp(i.re*r-i.im*n),t=i.im*r+i.re*n,new o(e*Math.cos(t),e*Math.sin(t))},sqrt:function(){var e,t,i=this.re,n=this.im,r=this.abs();if(i>=0){if(0===n)return new o(Math.sqrt(i),0);e=.5*Math.sqrt(2*(r+i))}else e=Math.abs(n)/Math.sqrt(2*(r-i));return t=i<=0?.5*Math.sqrt(2*(r-i)):Math.abs(n)/Math.sqrt(2*(r+i)),new o(e,n<0?-t:t)},exp:function(){var e=Math.exp(this.re);return this.im,new o(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){var e=this.re,t=this.im;return new o(Math.expm1(e)*Math.cos(t)+function(e){var t=Math.PI/4;if(e<-t||e>t)return Math.cos(e)-1;var i=e*e;return i*(i*(1/24+i*(-1/720+i*(1/40320+i*(-1/3628800+i*(1/4790014600+i*(-1/87178291200+i*(1/20922789888e3)))))))-.5)}(t),Math.exp(e)*Math.sin(t))},log:function(){var e=this.re,t=this.im;return new o(s(e,t),Math.atan2(t,e))},abs:function(){return e=this.re,t=this.im,i=Math.abs(e),n=Math.abs(t),i<3e3&&n<3e3?Math.sqrt(i*i+n*n):(i<n?(i=n,n=e/t):n=t/e,i*Math.sqrt(1+n*n));var e,t,i,n},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var e=this.re,t=this.im;return new o(Math.sin(e)*i(t),Math.cos(e)*n(t))},cos:function(){var e=this.re,t=this.im;return new o(Math.cos(e)*i(t),-Math.sin(e)*n(t))},tan:function(){var e=2*this.re,t=2*this.im,r=Math.cos(e)+i(t);return new o(Math.sin(e)/r,n(t)/r)},cot:function(){var e=2*this.re,t=2*this.im,r=Math.cos(e)-i(t);return new o(-Math.sin(e)/r,n(t)/r)},sec:function(){var e=this.re,t=this.im,r=.5*i(2*t)+.5*Math.cos(2*e);return new o(Math.cos(e)*i(t)/r,Math.sin(e)*n(t)/r)},csc:function(){var e=this.re,t=this.im,r=.5*i(2*t)-.5*Math.cos(2*e);return new o(Math.sin(e)*i(t)/r,-Math.cos(e)*n(t)/r)},asin:function(){var e=this.re,t=this.im,i=new o(t*t-e*e+1,-2*e*t).sqrt(),n=new o(i.re-t,i.im+e).log();return new o(n.im,-n.re)},acos:function(){var e=this.re,t=this.im,i=new o(t*t-e*e+1,-2*e*t).sqrt(),n=new o(i.re-t,i.im+e).log();return new o(Math.PI/2-n.im,n.re)},atan:function(){var e=this.re,t=this.im;if(0===e){if(1===t)return new o(0,1/0);if(-1===t)return new o(0,-1/0)}var i=e*e+(1-t)*(1-t),n=new o((1-t*t-e*e)/i,-2*e/i).log();return new o(-.5*n.im,.5*n.re)},acot:function(){var e=this.re,t=this.im;if(0===t)return new o(Math.atan2(1,e),0);var i=e*e+t*t;return 0!==i?new o(e/i,-t/i).atan():new o(0!==e?e/0:0,0!==t?-t/0:0).atan()},asec:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new o(0,1/0);var i=e*e+t*t;return 0!==i?new o(e/i,-t/i).acos():new o(0!==e?e/0:0,0!==t?-t/0:0).acos()},acsc:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new o(Math.PI/2,1/0);var i=e*e+t*t;return 0!==i?new o(e/i,-t/i).asin():new o(0!==e?e/0:0,0!==t?-t/0:0).asin()},sinh:function(){var e=this.re,t=this.im;return new o(n(e)*Math.cos(t),i(e)*Math.sin(t))},cosh:function(){var e=this.re,t=this.im;return new o(i(e)*Math.cos(t),n(e)*Math.sin(t))},tanh:function(){var e=2*this.re,t=2*this.im,r=i(e)+Math.cos(t);return new o(n(e)/r,Math.sin(t)/r)},coth:function(){var e=2*this.re,t=2*this.im,r=i(e)-Math.cos(t);return new o(n(e)/r,-Math.sin(t)/r)},csch:function(){var e=this.re,t=this.im,r=Math.cos(2*t)-i(2*e);return new o(-2*n(e)*Math.cos(t)/r,2*i(e)*Math.sin(t)/r)},sech:function(){var e=this.re,t=this.im,r=Math.cos(2*t)+i(2*e);return new o(2*i(e)*Math.cos(t)/r,-2*n(e)*Math.sin(t)/r)},asinh:function(){var e=this.im;this.im=-this.re,this.re=e;var t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){var e=this.acos();if(e.im<=0){var t=e.re;e.re=-e.im,e.im=t}else t=e.im,e.im=-e.re,e.re=t;return e},atanh:function(){var e=this.re,t=this.im,i=e>1&&0===t,n=1-e,r=1+e,a=n*n+t*t,l=0!==a?new o((r*n-t*t)/a,(t*n+r*t)/a):new o(-1!==e?e/0:0,0!==t?t/0:0),u=l.re;return l.re=s(l.re,l.im)/2,l.im=Math.atan2(l.im,u)/2,i&&(l.im=-l.im),l},acoth:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new o(0,Math.PI/2);var i=e*e+t*t;return 0!==i?new o(e/i,-t/i).atanh():new o(0!==e?e/0:0,0!==t?-t/0:0).atanh()},acsch:function(){var e=this.re,t=this.im;if(0===t)return new o(0!==e?Math.log(e+Math.sqrt(e*e+1)):1/0,0);var i=e*e+t*t;return 0!==i?new o(e/i,-t/i).asinh():new o(0!==e?e/0:0,0!==t?-t/0:0).asinh()},asech:function(){var e=this.re,t=this.im;if(this.isZero())return o.INFINITY;var i=e*e+t*t;return 0!==i?new o(e/i,-t/i).acosh():new o(0!==e?e/0:0,0!==t?-t/0:0).acosh()},inverse:function(){if(this.isZero())return o.INFINITY;if(this.isInfinite())return o.ZERO;var e=this.re,t=this.im,i=e*e+t*t;return new o(e/i,-t/i)},conjugate:function(){return new o(this.re,-this.im)},neg:function(){return new o(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new o(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new o(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new o(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){var i=new o(e,t);return Math.abs(i.re-this.re)<=o.EPSILON&&Math.abs(i.im-this.im)<=o.EPSILON},clone:function(){return new o(this.re,this.im)},toString:function(){var e=this.re,t=this.im,i="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<o.EPSILON&&(e=0),Math.abs(t)<o.EPSILON&&(t=0),0===t?i+e:(0!==e?(i+=e,i+=" ",t<0?(t=-t,i+="-"):i+="+",i+=" "):t<0&&(t=-t,i+="-"),1!==t&&(i+=t),i+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},o.ZERO=new o(0,0),o.ONE=new o(1,0),o.I=new o(0,1),o.PI=new o(Math.PI,0),o.E=new o(Math.E,0),o.INFINITY=new o(1/0,1/0),o.NAN=new o(NaN,NaN),o.EPSILON=1e-15,Object.defineProperty(o,"__esModule",{value:!0}),o.default=o,o.Complex=o,e.exports=o}()}(h);const m=new f.exports.Decimal(0),p=new f.exports.Decimal(1),g=new f.exports.Decimal(-1),d=new f.exports.Decimal(NaN),v=new f.exports.Decimal(1/0),x=new f.exports.Decimal(-1/0);function b(e){if("number"==typeof e&&(e=new f.exports.Decimal(e)),!e.isInteger()||e.isNegative())return d;if(e.lessThan(10))return new f.exports.Decimal([1,1,2,6,24,120,720,5040,40320,362880,3628800][e.toNumber()]);if(e.gt(Number.MAX_SAFE_INTEGER)){let t=p,i=new f.exports.Decimal(2);for(;i.lessThan(e);)t=t.mul(i),i=i.add(1);return t}if(e.modulo(2).eq(1))return e.times(b(e.minus(1)));let t=e.toNumber(),i=e.toNumber(),n=e;for(;t>2;)t-=2,i+=t,n=n.mul(i);return n}const y=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7].map((e=>new f.exports.Decimal(e))),N=new f.exports.Decimal(607).div(128),w=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22].map((e=>new f.exports.Decimal(e)));function S(e){if("number"==typeof e&&(e=new f.exports.Decimal(e)),e.isNegative())return d;let t=w[0];for(let i=w.length-1;i>0;--i)t=t.add(w[i].div(e.add(i)));const i=e.add(N).add(.5);return f.exports.Decimal.acos(-1).mul(2).log().mul(.5).add(i.log().mul(e.add(.5)).minus(i).add(t.log()).minus(e.log()))}function M(e){if("number"==typeof e&&(e=new f.exports.Decimal(e)),e.lessThan(.5)){const t=f.exports.Decimal.acos(-1);return t.div(t.mul(e).sin().mul(M(f.exports.Decimal.sub(1,e))))}if(e.greaterThan(100))return S(e).exp();{e=e.sub(1);let t=y[0];for(let i=1;i<9;i++)t=t.add(y[i].div(e.add(i)));const i=e.add(7).add(.5);return f.exports.Decimal.acos(-1).times(2).sqrt().mul(t.mul(i.neg().exp()).mul(f.exports.Decimal.pow(i,e.add(.5))))}}const E=Math.log10(Math.pow(2,53)),A=Math.pow(10,-10),D=new Set([2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999,3001,3011,3019,3023,3037,3041,3049,3061,3067,3079,3083,3089,3109,3119,3121,3137,3163,3167,3169,3181,3187,3191,3203,3209,3217,3221,3229,3251,3253,3257,3259,3271,3299,3301,3307,3313,3319,3323,3329,3331,3343,3347,3359,3361,3371,3373,3389,3391,3407,3413,3433,3449,3457,3461,3463,3467,3469,3491,3499,3511,3517,3527,3529,3533,3539,3541,3547,3557,3559,3571,3581,3583,3593,3607,3613,3617,3623,3631,3637,3643,3659,3671,3673,3677,3691,3697,3701,3709,3719,3727,3733,3739,3761,3767,3769,3779,3793,3797,3803,3821,3823,3833,3847,3851,3853,3863,3877,3881,3889,3907,3911,3917,3919,3923,3929,3931,3943,3947,3967,3989,4001,4003,4007,4013,4019,4021,4027,4049,4051,4057,4073,4079,4091,4093,4099,4111,4127,4129,4133,4139,4153,4157,4159,4177,4201,4211,4217,4219,4229,4231,4241,4243,4253,4259,4261,4271,4273,4283,4289,4297,4327,4337,4339,4349,4357,4363,4373,4391,4397,4409,4421,4423,4441,4447,4451,4457,4463,4481,4483,4493,4507,4513,4517,4519,4523,4547,4549,4561,4567,4583,4591,4597,4603,4621,4637,4639,4643,4649,4651,4657,4663,4673,4679,4691,4703,4721,4723,4729,4733,4751,4759,4783,4787,4789,4793,4799,4801,4813,4817,4831,4861,4871,4877,4889,4903,4909,4919,4931,4933,4937,4943,4951,4957,4967,4969,4973,4987,4993,4999,5003,5009,5011,5021,5023,5039,5051,5059,5077,5081,5087,5099,5101,5107,5113,5119,5147,5153,5167,5171,5179,5189,5197,5209,5227,5231,5233,5237,5261,5273,5279,5281,5297,5303,5309,5323,5333,5347,5351,5381,5387,5393,5399,5407,5413,5417,5419,5431,5437,5441,5443,5449,5471,5477,5479,5483,5501,5503,5507,5519,5521,5527,5531,5557,5563,5569,5573,5581,5591,5623,5639,5641,5647,5651,5653,5657,5659,5669,5683,5689,5693,5701,5711,5717,5737,5741,5743,5749,5779,5783,5791,5801,5807,5813,5821,5827,5839,5843,5849,5851,5857,5861,5867,5869,5879,5881,5897,5903,5923,5927,5939,5953,5981,5987,6007,6011,6029,6037,6043,6047,6053,6067,6073,6079,6089,6091,6101,6113,6121,6131,6133,6143,6151,6163,6173,6197,6199,6203,6211,6217,6221,6229,6247,6257,6263,6269,6271,6277,6287,6299,6301,6311,6317,6323,6329,6337,6343,6353,6359,6361,6367,6373,6379,6389,6397,6421,6427,6449,6451,6469,6473,6481,6491,6521,6529,6547,6551,6553,6563,6569,6571,6577,6581,6599,6607,6619,6637,6653,6659,6661,6673,6679,6689,6691,6701,6703,6709,6719,6733,6737,6761,6763,6779,6781,6791,6793,6803,6823,6827,6829,6833,6841,6857,6863,6869,6871,6883,6899,6907,6911,6917,6947,6949,6959,6961,6967,6971,6977,6983,6991,6997,7001,7013,7019,7027,7039,7043,7057,7069,7079,7103,7109,7121,7127,7129,7151,7159,7177,7187,7193,7207,7211,7213,7219,7229,7237,7243,7247,7253,7283,7297,7307,7309,7321,7331,7333,7349,7351,7369,7393,7411,7417,7433,7451,7457,7459,7477,7481,7487,7489,7499,7507,7517,7523,7529,7537,7541,7547,7549,7559,7561,7573,7577,7583,7589,7591,7603,7607,7621,7639,7643,7649,7669,7673,7681,7687,7691,7699,7703,7717,7723,7727,7741,7753,7757,7759,7789,7793,7817,7823,7829,7841,7853,7867,7873,7877,7879,7883,7901,7907,7919]);function C(e,t){if(!Number.isInteger(e)||!Number.isInteger(t))return NaN;for(;0!==t;)[e,t]=[t,e%t];return e<0?-e:e}const k=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],_=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function F(e){if(e<0)return NaN;let t=_[0];for(let i=_.length-1;i>0;--i)t+=_[i]/(e+i);const i=e+4.7421875+.5;return.5*Math.log(2*Math.PI)+(e+.5)*Math.log(i)-i+Math.log(t)-Math.log(e)}function q(e){if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*q(1-e));if(e>100)return Math.exp(F(e));{e-=1;let t=k[0];for(let i=1;i<9;i++)t+=k[i]/(e+i);const i=e+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(i,e+.5)*Math.exp(-i)*t}}const I="List",P="Missing",T="Nothing",O="Add",L="Divide",z="Multiply",U="Negate",R="Power",$="Root",j="Sqrt";function B(e){return null!==e&&"object"==typeof e&&"num"in e}function Z(e){return null!==e&&"object"==typeof e&&"sym"in e}function Q(e){return null!==e&&"object"==typeof e&&"str"in e}function H(e){return null!==e&&"object"==typeof e&&"fn"in e}function G(e){return null!==e&&"object"==typeof e&&"dict"in e}function W(e){if("number"==typeof e)return e;if(null===e)return null;if(B(e))return e.num.endsWith("d")||e.num.endsWith("n")?null:parseFloat(e.num);const t=se(e);return null===t?null:"NaN"===t?NaN:"+Infinity"===t?1/0:"-Infinity"===t?-1/0:"Complex"===re(e)&&0===W(ue(e,2))?W(ue(e,1)):null}function V(e){if(null===e)return null;if(e instanceof h.exports.Complex)return e;const t=se(e);if(null!==t){if("ComplexInfinity"===t)return h.exports.Complex.INFINITY;if("ImaginaryUnit"===t)return h.exports.Complex.I}const i=re(e);if("Complex"===i){const t=W(ue(e,1)),i=W(ue(e,2));return null===t||null===i?null:new h.exports.Complex(t,i)}let n=Y(e);if(null!==n)return new h.exports.Complex(0,n);if("Add"===i&&2===ce(e)){let t=W(ue(e,1));if(null!==t?n=Y(ue(e,2)):(n=Y(ue(e,1)),null!==n&&(t=W(ue(e,2)))),null!==t&&null!==n)return new h.exports.Complex(t,n)}if("Subtract"===i){const t=W(ue(e,1)),i=ue(e,2);if(null!==t){if("ImaginaryUnit"===se(i))return new h.exports.Complex(t,-1);if("Multiply"===re(i)&&"ImaginaryUnit"===ue(i,2)){const e=W(ue(i,1));if(null!==e)return new h.exports.Complex(t,-e)}}}if("Multiply"===i&&2===ce(e)){let t=null;if("ImaginaryUnit"===se(ue(e,2))?t=W(ue(e,2)):"ImaginaryUnit"===se(ue(e,1))&&(t=W(ue(e,1))),null!==t&&Number.isInteger(t))return 0===t?h.exports.Complex.ZERO:1===t?h.exports.Complex.ONE:-1===t?h.exports.Complex.ONE.neg():new h.exports.Complex(0,t)}if("Negate"===i){const t=V(ue(e,1));if(null!==t)return t.neg()}return null}function Y(e){if("ImaginaryUnit"===se(e))return 1;let t=null;const i=re(e);return"Multiply"===i&&2===ce(e)?"ImaginaryUnit"===se(ue(e,1))?t=W(ue(e,2)):"ImaginaryUnit"===se(ue(e,2))&&(t=W(ue(e,1))):"Negate"===i&&1===ce(e)&&"ImaginaryUnit"===se(ue(e,1))&&(t=-1),0===t?null:t}function J(e){var t,i;if(e instanceof f.exports.Decimal)return e;const n=se(e);if(null!==n){if("NaN"===n)return d;if("+Infinity"===n)return v;if("-Infinity"===n)return x}if(B(e))return e.num.endsWith("d")||e.num.endsWith("n")?new f.exports.Decimal(e.num.slice(0,-1)):new f.exports.Decimal(null!==(t=W(e))&&void 0!==t?t:NaN);if(null!==e&&e instanceof h.exports.Complex){const t=e;return 0===t.im?new f.exports.Decimal(t.re):null}return"Complex"===re(e)&&0===W(ue(e,2))?new f.exports.Decimal(null!==(i=W(ue(e,1)))&&void 0!==i?i:NaN):null}function K(e){return null===e?null:"object"==typeof e&&"str"in e?e.str:"string"!=typeof e||e.length<2||"'"!==e[0]||"'"!==e[e.length-1]?null:e.substring(1,e.length-1)}function X(e){var t,i,n,r,s,o;const a=se(e);if("ThreeQuarter"===a)return[3,4];if("TwoThird"===a)return[2,3];if("Half"===a)return[1,2];if("Third"===a)return[1,3];if("Quarter"===a)return[1,4];if(ne(e))return[null,null];const l=re(e);if(!l)return[null,null];let u=null,c=null;if(l===R){const n=W(ue(e,2));1===n?(u=null!==(t=W(ue(e,1)))&&void 0!==t?t:null,c=1):-1===n&&(u=1,c=null!==(i=W(ue(e,1)))&&void 0!==i?i:null)}return l===L&&(u=null!==(n=W(ue(e,1)))&&void 0!==n?n:null,c=null!==(r=W(ue(e,2)))&&void 0!==r?r:null),l===z&&re(ue(e,2))===R&&-1===W(ue(ue(e,2),2))&&(u=null!==(s=W(ue(e,1)))&&void 0!==s?s:null,c=null!==(o=W(ue(ue(e,2),1)))&&void 0!==o?o:null),null===u||null===c?[null,null]:Number.isInteger(u)&&Number.isInteger(c)?[u,c]:[null,null]}function ee(e,t){var i,n,r,s;if(se(e)===t)return[1,1];const o=re(e);if(o===z){if(se(null!==(i=ue(e,2))&&void 0!==i?i:P)!==t)return[null,null];const n=ue(e,1),r=W(n);return null!==r?[r,1]:X(null!=n?n:P)}if(o===L){const i=W(null!==(n=ue(e,2))&&void 0!==n?n:P);if(null===i||isNaN(i))return[null,null];const s=null!==(r=ue(e,1))&&void 0!==r?r:P,o=se(s);if(o===t)return[1,i];let a=null;if("MinusDoublePi"===o)a=-2;else if("MinusPi"===o)a=-1;else if("DoublePi"===o)a=2;else{if(re(s)!==z)return[null,null];if(se(ue(s,2))!==t)return[null,null];a=W(ue(s,1))}return null===a?[null,null]:[a,i]}if(o===U){const[i,n]=ee(null!==(s=ue(e,1))&&void 0!==s?s:P,t);return null===i||isNaN(i)?[null,null]:[-i,n]}return[null,null]}function te(e){return Array.isArray(e)?e[0]:H(e)?e.fn[0]:"number"==typeof e||B(e)?"Number":"string"==typeof e?"String":Z(e)?"Symbol":G(e)?"Dictionary":null}function ie(e){return null===e?null:Array.isArray(e)?e[0]:H(e)?e.fn[0]:null}function ne(e){return null===e||!Array.isArray(e)&&("object"!=typeof e||!("fn"in e||"dic"in e))}function re(e){if(null===e)return"";const t=ie(e);return"string"==typeof t?t:""}function se(e){return null===e?null:"string"==typeof e?e.length>=2&&"'"===e[0]&&"'"===e[e.length-1]?null:e:Z(e)?e.sym:null}function oe(e){return Array.isArray(e)?e.slice(1):H(e)?e.fn.slice(1):[]}function ae(e,t){const i=ie(e);if(null!==i)return[t(i),...oe(e).map(t)];const n=fe(e);if(null!==n){const e=Object.keys(n),i={};for(const r of e)i[r]=t(n[r]);return{dict:i}}return t(e)}function le(e,t){let i=null;if(Array.isArray(e)&&(i=e),H(e)&&(i=e.fn),null===i)return[];let n=1;const r=[];for(;n<i.length;)r.push(t(i[n])),n+=1;return r}function ue(e,t){var i,n;return null===e?null:Array.isArray(e)?null!==(i=e[t])&&void 0!==i?i:null:H(e)&&null!==(n=e.fn[t])&&void 0!==n?n:null}function ce(e){return Array.isArray(e)?Math.max(0,e.length-1):H(e)?Math.max(0,e.fn.length-1):0}function fe(e){return"object"==typeof e&&"dict"in e?e.dict:null}function he(e,t){if(typeof e!=typeof t)return!1;if(null===e)return null===t;if(void 0===e)return void 0===t;if("number"==typeof e)return e===t;if("string"==typeof e)return e===t;if(Array.isArray(e)&&Array.isArray(t)){if(!he(te(e),te(t)))return!1;const i=ce(e);if(ce(t)!==i)return!1;for(let n=0;n<i;n++)if(!he(ue(e,n),ue(t,n)))return!1;return!0}if("object"==typeof e){if(B(e)&&B(t))return W(e)===W(t);if(Z(e)&&Z(t))return se(e)===se(t);if(H(e)&&H(t)){if(!he(te(e),te(t)))return!1;const i=ce(e);if(ce(t)!==i)return!1;for(let n=0;n<i;n++)if(!he(ue(e,n),ue(t,n)))return!1;return!0}if(Q(e)&&Q(t))return K(e)===K(t);if(G(e)&&G(t)){const i=fe(e),n=fe(t);if(null===i&&null!==n)return!1;if(null===i&&null===n)return!0;const r=Object.keys(i);if(null===n||r.length!==Object.keys(n).length)return!1;for(const e of r)if(!he(i[e],n[e]))return!1;return!0}}return!1}const me=[{name:"Overscript",trigger:{infix:"\\overset"},precedence:700},{name:"Underscript",trigger:{infix:"\\underset"},precedence:700},{name:"Increment",trigger:{postfix:["+","+"]},precedence:880},{name:"Decrement",trigger:{postfix:["-","-"]},precedence:880},{name:"PreIncrement",trigger:{prefix:["+","+"]},precedence:880},{name:"PreDecrement",trigger:{prefix:["-","-"]},precedence:880},{name:"Ring",trigger:{infix:"\\circ"},precedence:265},{name:"Transpose",trigger:{superfix:"T"}},{name:"ConjugateTranspose",trigger:{superfix:"H"}},{name:"StringJoin",trigger:{infix:["\\lt","\\gt"]},precedence:780},{name:"Starstar",trigger:{infix:["\\star","\\star"]},precedence:780},{name:"PartialDerivative",trigger:{prefix:"\\partial"},parse:(e,t,i)=>{var n,r;let s=!1,o=T,a=T;for(;!s;)t.skipSpace(),t.match("_")?a=t.matchRequiredLatexArgument():t.match("^")?o=t.matchRequiredLatexArgument():s=!0;if("Sequence"===re(a)&&(a=[I,...oe(a)]),!a||!o)return[e,null];let l=null!==(n=t.matchRequiredLatexArgument())&&void 0!==n?n:T;return l!==T&&(l=[l,...null!==(r=t.matchArguments("group"))&&void 0!==r?r:T]),[null,["PartialDerivative",l,a,o]]},serialize:(e,t)=>{let i="\\partial";const n=ue(t,1),r=ue(t,2),s=ue(t,3);return null!==r&&r!==T&&(ie(r)===I?i+="_{"+e.serialize(["Sequence",...oe(r)])+"}":i+="_{"+e.serialize(r)+"}"),null!==s&&s!==T&&(i+="^{"+e.serialize(s)+"}"),null!==n&&n!==T&&(i+=e.serialize(n)),i},precedence:740},{name:"OverBar",trigger:{symbol:"\\overline"},requiredLatexArg:1},{name:"UnderBar",trigger:{symbol:"\\underline"},requiredLatexArg:1},{name:"OverVector",trigger:{symbol:"\\vec"},requiredLatexArg:1},{name:"OverTile",trigger:{symbol:"\\tilde"},requiredLatexArg:1},{name:"OverHat",trigger:{symbol:"\\hat"},requiredLatexArg:1},{name:"OverHat",trigger:{symbol:"\\hat"},requiredLatexArg:1},{name:"OverRightArrow",trigger:{symbol:"\\overrightarrow"},requiredLatexArg:1},{name:"OverLeftArrow",trigger:{symbol:"\\overleftarrow"},requiredLatexArg:1},{name:"OverRightDoubleArrow",trigger:{symbol:"\\Overrightarrow"},requiredLatexArg:1},{name:"OverLeftHarpoon",trigger:{symbol:"\\overleftharpoon"},requiredLatexArg:1},{name:"OverRightHarpoon",trigger:{symbol:"\\overrightharpoon"},requiredLatexArg:1},{name:"OverLeftRightArrow",trigger:{symbol:"\\overleftrightarrow"},requiredLatexArg:1},{name:"OverBrace",trigger:{symbol:"\\overbrace"},requiredLatexArg:1},{name:"OverLineSegment",trigger:{symbol:"\\overlinesegment"},requiredLatexArg:1},{name:"OverGroup",trigger:{symbol:"\\overgroup"},requiredLatexArg:1}];function pe(e,t){return t>2?"solidus":"radical"}function ge(e){return"<space>"===e||"\\qquad"===e||"\\quad"===e||"\\enskip"===e||"\\;"===e||"\\,"===e||"\\ "===e||"~"===e}function de(e,t,i){return(n,r,s)=>{if(s>=t)return[n,null];r.skipSpace(),r.match(i),"Missing"===n&&(n=T);const o=[e,null!=n?n:T];let a=!1;for(;!a;){for(a=!0,r.skipSpace();r.match(i);)o.push(T),r.skipSpace();if(r.atEnd)o.push(T);else{const e=r.matchExpression(t);o.push(null!=e?e:T),a=null===e}a||(r.skipSpace(),a=!r.match(i))}return[null,o]}}function ve(e){return(t,i)=>oe(i).map((e=>t.serialize(e))).join(e)}const xe=[{name:"LatexTokens",serialize:function(e,t){return oe(t).map((t=>{const i=K(t);return null===i?e.serialize(t):"<{>"===i?"{":"<}>"===i?"}":"<$>"===i?"$":"<$$>"===i?"$$":"<space>'"===i?" ":i})).join("")}},{name:"Parentheses",trigger:{matchfix:"("},parse:(e,t,i)=>{var n;const r=t.index;if(!t.match("("))return[e,null];let s=!1,o=!0,a=!1,l=0,u="";for(;!s&&o;){const e=t.next();t.atEnd||")"===e?s=!0:"\\mathtt"===e?(t.match("<{>"),a=!0):ge(e)||(/^[0-9a-zA-Z]$/.test(e)?(l=Math.max(l,parseInt(e,36)),u+=e):o=!1),a&&t.match("<}>")}if(t.skipSpace(),o&&t.match("_")){const i=null!==(n=W(t.matchRequiredLatexArgument()))&&void 0!==n?n:NaN;return!isFinite(i)||i<2||i>36||l>=i?(t.onError({code:"base-out-of-range"}),[e,T]):[e,["BaseForm",parseInt(u,i),i]]}t.index=r;const c=t.matchBalancedExpression("(",")",t.onError);return c?"Sequence"===re(c)?[e,["Parentheses",...oe(c)]]:[e,["Parentheses",c]]:[e,["Parentheses"]]},serialize:(e,t)=>e.wrapString(ve(",")(e,t),(e.level,"paren")),separator:",",closeFence:")",precedence:20},{name:I,trigger:{matchfix:"\\lbrack"},separator:",",closeFence:"\\rbrack",precedence:20,parse:(e,t,i)=>{if(null===e){const i=t.matchBalancedExpression("\\lbrack","\\rbrack",t.onError);return i?"Sequence"===re(i)?[e,[I,...oe(i)]]:[e,[I,i]]:[null,[I]]}return[e,null]}},{name:"BaseForm",serialize:(e,t)=>{var i,n;const r=null!==(i=W(ue(t,2)))&&void 0!==i?i:NaN;if(isFinite(r)&&r>=2&&r<=36){const e=null!==(n=W(ue(t,1)))&&void 0!==n?n:NaN;if(isFinite(e)){let t=Number(e).toString(r),i=0;if(2===r||10===r?i=4:16===r?i=2:r>16&&(i=4),i>0){const e=t;t="";for(let n=0;n<e.length;n++)n>0&&n%i==0&&(t="\\, "+t),t=e[e.length-n-1]+t}return`(\\mathtt{${t}})_{${r}}`}}return"\\operatorname{BaseForm}("+e.serialize(ue(t,1))+", "+e.serialize(ue(t,2))+")"}},{name:"Set",trigger:{matchfix:"\\lbrace"},separator:",",closeFence:"\\rbrace",precedence:20},{name:"Sequence",trigger:{infix:","},parse:de("Sequence",20,","),serialize:ve(", "),precedence:20},{name:"Sequence2",trigger:{infix:";"},parse:de("Sequence2",19,";"),serialize:ve("; "),precedence:19},{name:P,trigger:"\\placeholder",serialize:"\\placeholder",requiredLatexArg:1},{name:"Subscript",trigger:{infix:"_"},precedence:720,serialize:(e,t)=>2===ce(t)?e.serialize(ue(t,1))+"_{"+e.serialize(ue(t,2))+"}":"_{"+e.serialize(ue(t,1))+"}",parse:(e,t,i)=>{var n;if(!t.match("_"))return[e,null];const r=null!==(n=t.matchRequiredLatexArgument())&&void 0!==n?n:P;return e?[null,["Subscript",e,r]]:[null,["Subscript",r]]}},{name:"Superplus",trigger:{superfix:"+"}},{name:"Subplus",trigger:{subfix:"+"}},{name:"Superminus",trigger:{superfix:"-"}},{name:"Subminus",trigger:{subfix:"-"}},{name:"Superstar",trigger:{superfix:"*"}},{name:"Superstar",trigger:{superfix:"\\star"}},{name:"Substar",trigger:{subfix:"*"}},{name:"Substar",trigger:{subfix:"\\star"}},{name:"Superdagger",trigger:{superfix:"\\dagger"}},{name:"Superdagger",trigger:{superfix:"\\dag"}},{name:"Prime",trigger:{superfix:"\\prime"},arguments:"group"},{trigger:{superfix:"\\doubleprime"},parse:(e,t)=>[null,["Prime",null!=e?e:T,2]],arguments:"group"},{name:"InverseFunction",serialize:(e,t)=>e.serialize(ue(t,1))+"^{-1}"},{name:"Derivative",trigger:"D",parse:(e,t)=>[e,["Derivative",1]],serialize:(e,t)=>{var i;const n=null!==(i=W(ue(t,1)))&&void 0!==i?i:NaN;if(!isFinite(n))return"";const r=e.serialize(ue(t,2));return 1===n?r+"^{\\prime}":2===n?r+"^{\\doubleprime}":r+"^{("+Number(n).toString()+")}"}},{name:"Piecewise",trigger:{environment:"cases"},parse:(e,t)=>{var i;return[e,["Piecewise",null!==(i=t.matchTabular())&&void 0!==i?i:T]]},serialize:(e,t)=>{if(re(ue(t,1))!==I)return"";const i=oe(ue(t,1));let n="",r="";for(const t of i){n+=r;const i=ue(t,1);if(null!==i){n+=e.serialize(i);const r=ue(t,2);null!==r&&(n+="&"+e.serialize(r))}r="\\\\"}return"\\begin{cases}"+n+"\\end{cases}"}}];function be(e,t){const i=W(t);return null!==i?0===i:!!e.is(["Equal",t,0])||!0!==e.is(["NotEqual",t,0])&&!0!==e.is(["Greater",t,0])&&!0!==e.is(["Less",t,0])&&null===i&&void 0}function ye(e,t){const i=be(e,t);return void 0===i?void 0:!i}function Ne(e,t){if(null===t)return;const i=W(t);if(null!==i&&!Number.isFinite(i))return!0;if(null!==i&&isNaN(i))return;const n=se(t);if("ComplexInfinity"===n)return!0;if(n===P||n===T)return!1;if(e.is(t,"ComplexNumber"))return!1;const r=re(t);if("Negate"===r){if(Ne(e,ue(t,1)))return!0}else if("Multiply"===r){const i=oe(t);if(i.some((t=>!0===Ne(e,t)))&&i.every((t=>!0===ye(e,t))))return!0}return null===i&&void 0}function we(e,t){if(null===t)return;const i=W(t);if(null!==i)return i>0;const n=se(t);if(n&&["Quarter","Third","Half","TwoThird","ThreeQuarter","MinusDoublePi","MinusPi","QuarterPi","ThirdPi","HalfPi","TwoThirdPi","ThreeQuarterPi","Pi","DoublePi","MachineEpsilon","CatalanConstant","GoldenRatio","EulerGamma","ExponentialE"].includes(n))return!0;if(e.is(["Greater",t,0]))return!0;if(e.is(["LessEqual",t,0]))return!1;if(e.is(["Less",t,0]))return!1;const r=re(t);if(r){if(("Cosh"===r||"Exp"===r)&&Me(0,ue(t,1)))return!0;if("Sqrt"===r&&we(e,ue(t,1)))return!0;if(r===z||r===O)return oe(t).every((t=>!0===we(e,t)));if(r===L&&we(e,ue(t,1))&&we(e,ue(t,2)))return!0;if(r===R&&we(e,ue(t,1)))return!0}}function Se(e,t){const i=we(e,t);return!0!==i&&(void 0!==i?!1===be(e,t):void 0)}function Me(e,t){return null!==t&&null!==W(t)}function Ee(e,t,i){var n,r,s;if(!t||!i)return!1;if("string"==typeof t&&t===i)return!0;if("Anything"===i)return!0;if("Nothing"===i)return!1;const o=re(t);if("Union"===o)return oe(t).some((t=>Ee(e,t,i)));if("Intersection"===o)return oe(t).every((t=>Ee(e,t,i)));if("SetMinus"===o)return Ee(e,ue(t,1),i)&&!Ee(e,ue(t,2),i);const a=re(i);if("Union"===a)return oe(i).some((i=>Ee(e,t,i)));if("Intersection"===a)return oe(i).every((i=>Ee(e,t,i)));if("SetMinus"===a)return Ee(e,t,ue(i,1))&&!Ee(e,t,ue(i,2));const l=null!==(n=se(i))&&void 0!==n?n:a;if(!l){const e=null!==(r=W(i))&&void 0!==r?r:NaN;if(Number.isNaN(e))return!1;i=0===i?"NumberZero":["Set",i]}const u=e.getSetDefinition(l);if(!u)return!1;if("function"==typeof u.isSubsetOf)return u.isSubsetOf(this,t,i);const c=null!==(s=se(t))&&void 0!==s?s:o;if(!c)return!1;const f=e.getSetDefinition(c);if(!f)return!1;for(const t of f.supersets)if(Ee(e,t,i))return!0;return!1}const Ae={MachineEpsilon:{domain:"RealNumber",constant:!0,value:{num:Number.EPSILON.toString()}},ImaginaryUnit:{domain:"ImaginaryNumber",constant:!0,wikidata:"Q193796"},ExponentialE:{domain:"TranscendentalNumber",wikidata:"Q82435",constant:!0,value:e=>"decimal"===e.numericFormat?f.exports.Decimal.exp(1):"complex"===e.numericFormat?h.exports.Complex.E:2.718281828459045},GoldenRatio:{domain:"IrrationalNumber",wikidata:"Q41690",constant:!0,hold:!1,value:["Divide",["Add",1,["Sqrt",5]],2]},CatalanConstant:{domain:"RealNumber",wikidata:"Q855282",constant:!0,value:{num:"0.91596559417721901505"}},EulerGamma:{domain:"RealNumber",wikidata:"Q273023",constant:!0,value:{num:"0.577215664901532860606"}},Quarter:{domain:"RationalNumber",wikidata:"Q2310416",constant:!0,hold:!1,value:[L,3,4]},Third:{domain:"RationalNumber",wikidata:"Q20021125",constant:!0,hold:!1,value:[L,1,3]},Half:{domain:"RationalNumber",wikidata:"Q2114394",constant:!0,hold:!1,value:[L,1,2]},TwoThird:{domain:"RationalNumber",constant:!0,hold:!1,value:[L,2,3]},ThreeQuarter:{domain:"RationalNumber",constant:!0,hold:!1,value:[L,3,4]},Abs:{domain:"Function",wikidata:"Q3317982",threadable:!0,idempotent:!0,numeric:!0,range:["Interval",0,1/0],evalNumber:(e,t)=>Math.abs(t),evalComplex:(e,t)=>h.exports.Complex.abs(t),evalDecimal:(e,t)=>f.exports.Decimal.abs(t)},Add:{domain:"Function",wikidata:"Q32043",associative:!0,commutative:!0,threadable:!0,idempotent:!0,range:"Number",numeric:!0,simplify:function(e,...t){var i,n;if(0===t.length)return 0;if(1===t.length)return t[0];let r=0,s=1,o=m,a=h.exports.Complex.ZERO,l=!1,u=!1;const c=[];for(const i of t){const t=se(i);if(t===P||t===T)return NaN;if("ComplexInfinity"===t)return"ComplexInfinity";Ne(e,i)&&(we(e,i)?l=!0:u=!0);const[n,f]=X(i);if(null!==n&&null!==f){if(isNaN(n)||isNaN(f))return NaN;r=r*f+n*s,s*=f}else{const t=V(i);if(null!==t)Number.isInteger(t.re)&&Number.isInteger(t.im)?a=a.add(t):c.push(i);else{const t=J(i);if(null!==t&&t.isInteger())o=o.add(t);else{const t=W(i);null!==t&&Number.isInteger(t)?r+=t:!1!==ye(e,i)&&c.push(i)}}}}if(l&&u)return NaN;if(l)return 1/0;if(u)return-1/0;if(o.isZero()||c.push(o),a.isZero()||c.push(a),0===c.length)return 0===r?0:1===s?r:["Divide",r,s];if(0!==r){const e=C(r,s);r/=e,s/=e,1===s?c.push(r):c.push(["Divide",r,s])}return 1===c.length?c[0]:2===c.length&&re(c[1])===U?["Subtract",c[0],null!==(i=ue(c[1],1))&&void 0!==i?i:P]:2===c.length&&re(c[0])===U?["Subtract",c[1],null!==(n=ue(c[0],1))&&void 0!==n?n:P]:["Add",...c]},evalNumber:(e,...t)=>{if(0===t.length)return 0;let i=0;for(const e of t)i+=e;return i},evalComplex:(e,...t)=>{if(0===t.length)return h.exports.Complex.ZERO;let i=h.exports.Complex.ZERO;for(const e of t)i=i.add(e);return i},evalDecimal:(e,...t)=>{if(0===t.length)return m;let i=m;for(const e of t)i=i.add(e);return i},evaluate:(e,...t)=>{if(0===t.length)return 0;let i=["Add"];const n=t.filter((e=>e instanceof f.exports.Decimal));n.length>0&&(1===n.length?i.push(n[0]):i.push(e.N(["Add",...n])));const r=t.filter((e=>e instanceof h.exports.Complex));r.length>0&&(1===r.length?i.push(r[0]):i.push(e.N(["Add",...r])));const s=t.filter((e=>"number"==typeof e));s.length>0&&(1===s.length?i.push(s[0]):i.push(e.N(["Add",...s])));const o=t.filter((e=>!("number"==typeof e||e instanceof f.exports.Decimal||e instanceof h.exports.Complex)));return i=[...i,...o],0===i.length?0:1===i.length?i[1]:i}},Chop:{domain:"Function",associative:!0,threadable:!0,idempotent:!0,numeric:!0,range:"Number",evalNumber:(e,t)=>e.chop(t),evalComplex:(e,t)=>e.chop(t),evalDecimal:(e,t)=>e.chop(t)},Ceil:{domain:"Function",range:"Number",numeric:!0,evalNumber:(e,t)=>Math.ceil(t),evalComplex:(e,t)=>h.exports.Complex.ceil(t),evalDecimal:(e,t)=>f.exports.Decimal.ceil(t)},Divide:{domain:"Function",range:"Number",numeric:!0,evalNumber:(e,t,i)=>t/i,evalComplex:(e,t,i)=>"number"==typeof t?new h.exports.Complex(t).div(i):t.div(i),evalDecimal:(e,t,i)=>f.exports.Decimal.div(t,i)},Exp:{domain:["ContinuousFunction","MonotonicFunction"],wikidata:"Q168698",threadable:!0,range:"Number",numeric:!0,evalNumber:(e,t)=>Math.exp(t),evalComplex:(e,t)=>"number"==typeof t?new h.exports.Complex(t).exp():t.exp(),evalDecimal:(e,t)=>f.exports.Decimal.exp(t)},Erf:{domain:["ContinuousFunction","MonotonicFunction"],range:"Number",numeric:!0},Erfc:{domain:["ContinuousFunction","MonotonicFunction"],range:"Number",numeric:!0},Factorial:{wikidata:"Q120976",domain:"MonotonicFunction",range:"Integer",numeric:!0,evalNumber:(e,t)=>function(e){if(!Number.isInteger(e)||e<0)return NaN;let t=1;for(let i=2;i<=e;i++)t*=i;return t}(t),evalComplex:(e,t)=>"number"==typeof t?new h.exports.Complex(t+1):t.add(1),evalDecimal:(e,t)=>b(t)},Floor:{domain:"Function",wikidata:"Q56860783",range:"Number",numeric:!0,evalNumber:(e,t)=>Math.floor(t),evalDecimal:(e,t)=>f.exports.Decimal.floor(t)},Gamma:{domain:"Function",wikidata:"Q190573",range:"Number",numeric:!0,evalNumber:(e,t)=>q(t),evalDecimal:(e,t)=>M(t)},LogGamma:{domain:"Function",range:"Number",numeric:!0,evalNumber:(e,t)=>F(t),evalDecimal:(e,t)=>S(t)},Ln:{domain:"Function",wikidata:"Q11197",range:"Number",numeric:!0,evalNumber:(e,t)=>Math.log(t),evalComplex:(e,t)=>"number"==typeof t?new h.exports.Complex(t).log():t.log(),evalDecimal:(e,t)=>f.exports.Decimal.log(t)},Log:{domain:"Function",range:"Number",numeric:!0,evalNumber:(e,t,i)=>Math.log(i)/Math.log(t),evalComplex:(e,t,i)=>{const n="number"==typeof t?new h.exports.Complex(t):t;return("number"==typeof i?new h.exports.Complex(i):i).log().div(n.log())},evalDecimal:(e,t,i)=>f.exports.Decimal.log(i).div(f.exports.Decimal.log(t))},Lb:{domain:"Function",wikidata:"Q581168",range:"Number",numeric:!0,evalNumber:(e,t)=>Math.log2(t),evalComplex:(e,t,i)=>("number"==typeof i?new h.exports.Complex(i):i).log().div(h.exports.Complex.log(2)),evalDecimal:(e,t)=>f.exports.Decimal.log(t).div(f.exports.Decimal.log(2))},Lg:{domain:"Function",wikidata:"Q966582",range:"Number",numeric:!0,evalNumber:(e,t)=>Math.log10(t),evalComplex:(e,t,i)=>("number"==typeof i?new h.exports.Complex(i):i).log().div(h.exports.Complex.log(10)),evalDecimal:(e,t)=>f.exports.Decimal.log(t).div(f.exports.Decimal.log(10))},Multiply:{domain:"Function",wikidata:"Q40276",associative:!0,commutative:!0,idempotent:!0,range:"Number",simplify:function(e,...t){if(0===t.length)return 1;if(1===t.length)return t[0];const i=[];let n=1,r=1,s=h.exports.Complex.ONE;for(const o of t){const t=W(o);if(0===t)return 0;if(null===t||Number.isFinite(t)&&!Number.isInteger(t)){const[t,a]=[null,null];if(null!==t&&null!==a)n*=t,r*=a;else{const t=V(o);if(null!==t)Number.isInteger(t.re)&&Number.isInteger(t.im)?s=s.mul(t):i.push(o);else{if(be(e,o))return 0;i.push(o)}}}else n*=t}return 0!==s.im?(s=s.mul(n),n=1):(n*=s.re,s=h.exports.Complex.ONE),0!==n&&isFinite(n)?(s.equals(h.exports.Complex.ONE)||i.push(["Complex",s.re,s.im]),0===i.length?1===r?n:["Divide",n,r]:(1!==r&&(i.unshift(["Divide",n,r]),n=1,r=1),1===i.length&&1===n?i[0]:1===i.length&&-1===n?["Negate",i[0]]:1===n?["Multiply",...i]:-1===n?["Negate",["Multiply",...i]]:["Multiply",n,...i])):n/r},numeric:!0,evalNumber:function(e,...t){if(0===t.length)return 1;if(1===t.length)return t[0];let i=1;for(const e of t)i*=e;return i},evalComplex:(e,...t)=>{if(0===t.length)return h.exports.Complex.ONE;let i=h.exports.Complex.ONE;for(const e of t)i=i.mul(e);return i},evalDecimal:(e,...t)=>{if(0===t.length)return p;let i=p;for(const e of t)i=i.mul(e);return i},evaluate:(e,...t)=>{if(0===t.length)return 0;let i=["Multiply"];const n=t.filter((e=>e instanceof f.exports.Decimal));n.length>0&&(1===n.length?i.push(n[0]):i.push(e.N(["Multiply",...n])));const r=t.filter((e=>e instanceof h.exports.Complex));r.length>0&&(1===r.length?i.push(r[0]):i.push(e.N(["Multiply",...r])));const s=t.filter((e=>"number"==typeof e));s.length>0&&(1===s.length?i.push(s[0]):i.push(e.N(["Multiply",...s])));const o=t.filter((e=>!("number"==typeof e||e instanceof f.exports.Decimal||e instanceof h.exports.Complex)));return i=[...i,...o],0===i.length?1:1===i.length?i[1]:i}},Negate:{domain:"Function",wikidata:"Q715358",range:"Number",simplify:(e,t)=>{var i;return null!==(i=De(t))&&void 0!==i?i:["Negate",t]},numeric:!0,evalNumber:(e,t)=>-t,evalComplex:(e,t)=>"number"==typeof t?new h.exports.Complex(-t):t.neg(),evalDecimal:(e,t)=>"number"==typeof t?new f.exports.Decimal(-t):t.neg()},Power:{domain:"Function",wikidata:"Q33456",commutative:!1,numeric:!0,range:"Number",simplify:(e,...t)=>ke(e,["Power",...t]),evalNumber:(e,t,i)=>Math.pow(t,i),evalComplex:(e,t,i)=>{const n="number"==typeof t?new h.exports.Complex(t):t,r="number"==typeof i?new h.exports.Complex(i):i;return h.exports.Complex.pow(n,r)},evalDecimal:(e,t,i)=>f.exports.Decimal.pow(t,i)},Round:{domain:"Function",range:"Number",numeric:!0,evalNumber:(e,t)=>Math.round(t),evalComplex:(e,t)=>"number"==typeof t?new h.exports.Complex(t).round():t.round(),evalDecimal:(e,t)=>f.exports.Decimal.round(t)},Sign:{domain:"Function",range:["Range",-1,1],numeric:!0,simplify:(e,t)=>be(e,t)?0:Se(e,t)?-1:1,evalNumber:(e,t)=>0===t?0:t<0?-1:1,evalComplex:(e,t)=>{const i="number"==typeof t?new h.exports.Complex(t):t;return i.div(i.abs())},evalDecimal:(e,t)=>"number"==typeof t?0===t?m:t<0?g:p:t.isZero()?m:t.isNeg()?g:p},SignGamma:{domain:"Function",range:"Number",numeric:!0},Sqrt:{domain:"Function",wikidata:"Q134237",range:"Number",numeric:!0,evalNumber:(e,t)=>Math.sqrt(t),evalComplex:(e,t)=>"number"==typeof t?new h.exports.Complex(t).sqrt():t.sqrt(),evalDecimal:(e,t)=>f.exports.Decimal.sqrt(t)},Square:{domain:"Function",wikidata:"Q3075175",range:"Number",numeric:!0,evalNumber:(e,t)=>t*t,evalComplex:(e,t)=>"number"==typeof t?new h.exports.Complex(t).multiply(t):t.mul(t),evalDecimal:(e,t)=>f.exports.Decimal.mul(t,t)},Root:{domain:"Function",commutative:!1,range:"Number",numeric:!0,evalNumber:(e,t,i)=>Math.pow(t,1/i),evalComplex:(e,t,i)=>{const n="number"==typeof t?new h.exports.Complex(t):t,r="number"==typeof i?new h.exports.Complex(1/i):new h.exports.Complex(h.exports.Complex.ONE.div(i));return h.exports.Complex.pow(n,r)},evalDecimal:(e,t,i)=>f.exports.Decimal.pow(t,p.div(i))},Subtract:{domain:"Function",wikidata:"Q32043",range:"Number",numeric:!0,evalNumber:(e,t,i)=>t-i,evalComplex:(e,t,i)=>"number"==typeof t?new h.exports.Complex(t).sub(i):t.sub(i),evalDecimal:(e,t,i)=>f.exports.Decimal.sub(t,i)}};function De(e){var t,i,n,r;if("number"==typeof(e=Ce(e)))return-e;if(e&&B(e))return"-"===e.num[0]?{num:e.num.slice(1)}:"+"===e.num[0]?{num:"-"+e.num.slice(1)}:{num:"-"+e.num};if(e instanceof f.exports.Decimal)return e.mul(-1);if(e instanceof h.exports.Complex)return e.mul(-1);const s=re(e),o=ce(e);if(s===U&&1===o)return null!==(t=ue(e,1))&&void 0!==t?t:P;if(s===z){const t=De(null!==(i=ue(e,1))&&void 0!==i?i:P);return[z,t,...oe(e).slice(1)]}return s===O?[O,...le(e,De)]:"Subtract"===s?["Subtract",null!==(n=ue(e,2))&&void 0!==n?n:P,null!==(r=ue(e,1))&&void 0!==r?r:P]:"Parentheses"===s&&1===o?De(ue(ue(e,1),1)):[U,null!=e?e:P]}function Ce(e){return null===e?T:ne(e)?e:"Parentheses"===ie(e)&&1===ce(e)?Ce(ue(e,1)):ae(e,Ce)}function ke(e,t){var i,n;if(2!==ce(t=Ce(t)))return t;const r=ue(t,1),s=null!==(i=W(r))&&void 0!==i?i:NaN,o=ue(t,2);if("ComplexInfinity"===se(o))return NaN;const a=null!==(n=W(o))&&void 0!==n?n:NaN;if(be(e,o))return 1;if(1===a)return r;if(2===a)return["Square",r];if(-1===a)return-1===s||1===s?-1:Number.isFinite(s)?["Divide",1,r]:0;if(!Number.isFinite(a)){if(0===s&&a<0)return"ComplexInfinity";if(1===s||-1===s)return NaN;if(s===1/0){if(a>0)return 1/0;if(a<0)return 0}if(s===-1/0&&!Number.isFinite(a))return NaN}return t}function _e(e){if(ne(e))return e;let[t,i]=X(e);return 3===t&&4===i?"ThreeQuarter":2===t&&3===i?"TwoThird":1===t&&2===i?"Half":1===t&&4===i?"Quarter":([t,i]=ee(e,"Pi"),null===t||null===i?ae(e,(e=>_e(e))):-2===t&&1===i?"MinusDoublePi":-1===t&&2===i?"MinusHalfPi":1===t&&4===i?"QuarterPi":1===t&&3===i?"ThirdPi":1===t&&2===i?"HalfPi":2===t&&3===i?"TwoThirdPi":3===t&&4===i?"ThreeQuarterPi":2===t&&1===i?"DoublePi":1===t&&1===i?"Pi":1===t?["Divide","Pi",i]:1===i?["Multiply",t,"Pi"]:["Multiply",["Divide",t,i],"Pi"])}function Fe(e,t,i,n){return null===i?"\\sqrt{}":(n=null!=n?n:2,"solidus"===t?e.wrapShort(i)+"^{1\\/"+e.serialize(n)+"}":"quotient"===t?e.wrapShort(i)+"^{\\frac{1}{"+e.serialize(n)+"}}":2===W(n)?"\\sqrt{"+e.serialize(i)+"}":"\\sqrt["+e.serialize(n)+"]{"+e.serialize(i)+"}")}function qe(e,t,i){if(!t.match("\\sqrt"))return[e,null];const n=t.matchOptionalLatexArgument(),r=t.matchRequiredLatexArgument();return null===r?null!==n?[e,[$,T,n]]:[e,[j]]:null!==n?[e,[$,r,n]]:[e,[j,r]]}function Ie(e,t,i){if(276<i)return[e,null];const n=t.index;if(!t.match("-"))return[e,null];const r=t.matchExpression(null===e?400:277);return null===r?(t.index=n,[e,null]):null===e?[null,[U,r]]:[null,["Subtract",e,r]]}function Pe(e,t){var i;if(null===t)return"";e.level-=1;let n="";const[r,s]=function(e){var t,i,n,r,s,o;if(re(e)!==z)return[[],[]];const a=[],l=[],u=oe(e);for(const e of u)if(re(e)===R)if(re(ue(e,2))===U){const n=null!==(t=ue(e,1))&&void 0!==t?t:T,r=null!==(i=ue(ue(e,2),1))&&void 0!==i?i:T;l.push([R,n,r])}else{const t=null!==(n=W(ue(e,2)))&&void 0!==n?n:NaN;-1===t?l.push(null!==(r=ue(e,1))&&void 0!==r?r:T):t<0?l.push([R,null!==(s=ue(e,1))&&void 0!==s?s:T,null!==(o=De(ue(e,2)))&&void 0!==o?o:T]):a.push(e)}else a.push(e);return[a,l]}(t);if(s.length>0&&(n=1===s.length&&1===s[0]?0===r.length?"1":1===r.length?e.serialize(r[0]):Pe(e,[z,...r]):e.serialize([L,1===r.length?r[0]:[z,...r],1===s.length?s[0]:[z,...s]])),n)return e.level+=1,n;let o=!1,l=null;const u=ce(t)+1;let c=!1;for(let r=1;r<u;r++)if(l=ue(t,r),null!==l){let t;"number"==typeof l||B(l)?(t=e.serialize(l),"-1"!==t||n?("-"===t[0]&&(t=t.slice(1),o=!o),n=n?a([n,e.options.multiply,t]):t):n="-",c=!0):re(l)!==R||isNaN(null!==(i=W(ue(l,1)))&&void 0!==i?i:NaN)?(re(l)===U&&(l=ue(l,1),o=!o),t=e.wrap(l,390),n=n?c&&re(l)===L?a([n,"\\times",t]):e.options.invisibleMultiply?a([n,e.options.invisibleMultiply,t]):a([n,t]):t,c=!1):(n=n?a([n,e.options.multiply,e.serialize(l)]):e.serialize(l),c=!0)}return e.level+=1,o?"-"+n:n}function Te(e,t){if(null===t)return"";if(1===ce(t))return e.serialize(ue(t,1));const i=e.level>3?"inline-solidus":"quotient";if("inline-solidus"===i||"nice-solidus"===i){const n=e.wrapShort(ue(t,1)),r=e.wrapShort(ue(t,2));return"nice-solidus"===i?`^{${n}}\\!\\!/\\!_{${r}}`:`${n}\\/${r}`}return"reciprocal"===i?e.wrap(ue(t,1))+e.wrap(ue(t,2))+"^{-1}":"factor"===i?"\\frac{1}{"+e.serialize(ue(t,2))+"}"+e.wrap(ue(t,1)):"\\frac{"+e.serialize(ue(t,1))+"}{"+e.serialize(ue(t,2))+"}"}function Oe(e,t){var i;const n=ue(t,1),r=ue(t,2);if(null===r)return e.serialize(n);if(null===n)return"";const s=re(t);if(s===j||s===$)return Fe(e,pe(0,e.level),ue(t,1),ue(t,2));const o=null!==(i=W(r))&&void 0!==i?i:1;if(-1===o)return e.serialize([L,"1",n]);if(o<0)return e.serialize([L,"1",[R,n,-o]]);if(re(r)===L){if(1===W(ue(r,1)))return Fe(e,pe(0,e.level),n,ue(r,2))}else if(re(r)===R&&-1===W(ue(r,2)))return Fe(e,pe(0,e.level),n,ue(r,1));return e.wrapShort(n)+"^{"+e.serialize(r)+"}"}function Le(e,t,i){var n;const r=t.next();let s=!1,o=0;if(t.skipSpace(),t.match("^")){if(t.skipSpace(),t.match("<{>")){t.skipSpace(),t.match("-")&&t.match("1")&&(s=!0);do{t.match("\\doubleprime")&&(o+=2),t.match("\\prime")&&(o+=1),t.match("'")&&(o+=1)}while(!t.match("<}>")&&!t.atEnd)}let e=!1;for(;!e;)t.skipSpace(),t.match("\\doubleprime")?o+=2:t.match("\\prime")||t.match("'")?o+=1:e=!0}let a=null!==(n={"\\arcsin":"Arcsin","\\arccos":"Arccos","\\arctan":"Arctan","\\arctg":"Arctan","\\arcctg":"Arctan","\\arcsec":"Arcsec","\\arccsc":" Arccsc","\\arsinh":"Arsinh","\\arcosh":"Arcosh","\\artanh":"Artanh","\\arcsech":"Arcsech","\\arccsch":"Arcsch","\\ch":"Cosh","\\cos":"Cos","\\cosec":"Csc","\\cosh":"Csch","\\cot":"Cot","\\cotg":"Cot","\\coth":"Coth","\\csc":"Csc","\\ctg":"Cot","\\cth":"Coth","\\sec":"Sec","\\sin":"Sin","\\sinh":"Sinh","\\sh":"Sinh","\\tan":"Tan","\\tanh":"Tanh","\\tg":"Tan","\\th":"Tanh"}[r])&&void 0!==n?n:r;s&&(a=["InverseFunction",a]),o>=1&&(a=["Derivative",o,a]);const l=t.matchArguments("implicit");return null===l?[null,a]:[null,[a,...l]]}function ze(e){return l(e)}const Ue={algebra:[{name:"To",trigger:{infix:"\\to"},precedence:270}],arithmetic:[{name:"ThreeQuarter",serialize:"\\frac{3}{4}"},{name:"TwoThird",serialize:"\\frac{2}{3}"},{name:"Half",serialize:"\\frac{1}{2}"},{name:"Third",serialize:"\\frac{1}{3}"},{name:"Quarter",serialize:"\\frac{1}{4}"},{name:"CatalanConstant",serialize:"G"},{name:"GoldenRatio",serialize:"\\varphi"},{name:"EulerGamma",serialize:"\\gamma"},{name:"Degrees",serialize:"\\frac{\\pi}{180}"},{name:"MinusDoublePi",serialize:"-2\\pi"},{name:"MinusPi",serialize:"-\\pi"},{name:"MinusHalfPi",serialize:"-\\frac{\\pi}{2}"},{name:"QuarterPi",serialize:"\\frac{\\pi}{4}"},{name:"ThirdPi",serialize:"\\frac{\\pi}{3}"},{name:"HalfPi",serialize:"\\frac{\\pi}{2}"},{name:"TwoThirdPi",serialize:"\\frac{2\\pi}{3}"},{name:"ThreeQuarterPi",serialize:"\\frac{3\\pi}{4}"},{name:"DoublePi",serialize:"2\\pi"},{name:"Complex",precedence:275,serialize:(e,t)=>{const i=W(ue(t,1)),n=W(ue(t,2));if(0===n)return e.serialize(ue(t,1));const r=1===n?"\\imaginaryI":-1===n?"-\\imaginaryI":a([e.serialize(ue(t,2)),"\\imaginaryI"]);return 0===i?r:a([e.serialize(ue(t,1)),"+",r])}},{name:"Exp",serialize:(e,t)=>{var i;return a(["\\exponentialE^{",e.serialize(null!==(i=ue(t,1))&&void 0!==i?i:T),"}"])}},{name:"Square",serialize:(e,t)=>e.wrapShort(ue(t,1))+"^2"},{trigger:{symbol:"\\infty"},parse:{num:"+Infinity"}},{name:"ComplexInfinity",trigger:{symbol:["\\tilde","\\infty"]},serialize:"\\tilde\\infty"},{name:"ComplexInfinity",trigger:{symbol:["\\tilde","<{>","\\infty","<}>"]},serialize:"\\tilde\\infty"},{name:"Pi",trigger:{symbol:"\\pi"}},{name:"Pi",trigger:{symbol:"π"},serialize:"\\pi"},{name:"ExponentialE",trigger:{symbol:"e"},serialize:"e"},{name:"ImaginaryUnit",trigger:{symbol:"i"},serialize:"\\imaginaryI"},{name:"ImaginaryUnit",trigger:{symbol:"\\imaginaryI"}},{name:O,trigger:{prefix:"+",infix:"+"},parse:function(e,t,i){if(275<i)return[e,null];const n=t.index;if(!t.match("+"))return[e,null];const r=t.matchExpression(null===e?400:275);return null===r?(t.index=n,[e,null]):null===e?[null,r]:t.applyOperator(O,e,r)},serialize:function(e,t){var i,n;e.level-=1;const r=re(t);let s="",o=ue(t,1),a=!Number.isNaN(null!==(i=W(o))&&void 0!==i?i:NaN);if(r===U)s="-"+e.wrap(o,276);else if(r===O){s=e.serialize(o);const i=ce(t)+1;for(let r=2;r<i;r++){o=ue(t,r);const i=null!==(n=W(o))&&void 0!==n?n:NaN,l=!Number.isNaN(i);let u=!1;if(null!==o&&a){const[t,i]=X(o);null!==t&&null!==i&&isFinite(t)&&isFinite(i)&&1!==i&&(s+=e.options.invisiblePlus+e.serialize(o),u=!0)}if(!u)if(i<0)s+=e.serialize(o);else if(re(o)===U)s+=e.wrap(o,275);else{const t=e.wrap(o,275);"-"===t[0]||"+"===t[0]?s+=t:s=s+"+"+t}a=l}}else if("Subtract"===r){const i=ue(t,2);s=null!==i?e.wrap(o,275)+"-"+e.wrap(i,275):e.wrap(o,275)}return e.level+=1,s},associativity:"both",precedence:275},{name:U,trigger:{prefix:"-"},parse:Ie,associativity:"left",precedence:275},{name:"Subtract",trigger:{infix:"-"},parse:Ie,associativity:"both",precedence:275},{name:"PlusMinus",trigger:{infix:"\\pm"},associativity:"both",precedence:270},{name:"MinusPlus",trigger:{infix:"\\mp"},associativity:"both",precedence:270},{name:z,trigger:{infix:"\\times"},serialize:Pe,associativity:"both",precedence:390},{name:z,trigger:{infix:"\\cdot"},serialize:Pe,associativity:"both",precedence:390},{name:z,trigger:{infix:"*"},serialize:Pe,associativity:"both",precedence:390},{name:L,trigger:"\\frac",parse:function(e,t,i){var n,r,s,o;if(!t.match("\\frac"))return[e,null];const a=null!==(n=t.matchRequiredLatexArgument())&&void 0!==n?n:P,l=null!==(r=t.matchRequiredLatexArgument())&&void 0!==r?r:P;if("PartialDerivative"===re(a)&&("PartialDerivative"===re(l)||re(l)===z&&"PartialDerivative"===re(ue(l,1)))){const i=null!==(s=ue(a,3))&&void 0!==s?s:T;let n=ue(a,1);null!==n&&n!==T||(n=null!==(o=t.matchExpression())&&void 0!==o?o:T);let r=[];if(re(l)===z){for(const e of oe(l))if("PartialDerivative"===ie(e)){const t=ue(e,2);t&&r.push(t)}}else{const e=ue(l,2);e&&r.push(e)}return r.length>1&&(r=[I,...r]),[e,["PartialDerivative",n,r,i===T?1:i]]}return[e,[L,a,l]]},serialize:Te,requiredLatexArg:2},{name:L,trigger:{infix:"\\/"},serialize:Te,associativity:"non",precedence:660},{name:L,trigger:{infix:"/"},serialize:Te,associativity:"non",precedence:660},{name:L,trigger:{infix:"\\div"},serialize:Te,associativity:"non",precedence:660},{name:R,trigger:{infix:"^"},associativity:"non",precedence:720,serialize:Oe},{name:R,trigger:{infix:["*","*"]},associativity:"non",precedence:720,serialize:Oe},{name:j,trigger:"\\sqrt",optionalLatexArg:1,requiredLatexArg:1,parse:qe,serialize:Oe},{name:$,trigger:"\\sqrt",optionalLatexArg:1,requiredLatexArg:1,parse:qe},{name:"Norm",trigger:{matchfix:"\\lVert"},closeFence:"\\rVert"},{name:"Norm",trigger:{matchfix:"\\|"},closeFence:"\\|"},{name:"Norm",trigger:{matchfix:["|","|"]},closeFence:["|","|"]},{name:"Abs",trigger:{matchfix:"|"},closeFence:"|"},{name:"Abs",trigger:{matchfix:"\\lvert"},closeFence:"\\rvert"},{name:"Factorial",trigger:{postfix:"!"},precedence:810},{name:"Factorial2",trigger:{postfix:["!","!"]},precedence:810},{name:"Lcm",trigger:{symbol:["\\operatorname","<{>","l","c","m","<}>"]}},{name:"Gcd",trigger:{symbol:["\\operatorname","<{>","g","c","d","<}>"]}},{name:"Ceil",trigger:{symbol:["\\operatorname","<{>","c","e","i","l","<}>"]}},{name:"Floor",trigger:{symbol:["\\operatorname","<{>","f","l","o","o","r","<}>"]}},{name:"Round",trigger:{symbol:["\\operatorname","<{>","r","o","u","n","d","<}>"]}},{name:"Sign",trigger:{symbol:["\\operatorname","<{>","s","g","n","<}>"]}}],calculus:[{trigger:{symbol:"\\int"},parse:function(e,t,i){if(!t.match("\\int"))return[e,null];let n=T,r=T,s=!1;for(;!s;)t.skipSpace(),t.match("_")?r=t.matchRequiredLatexArgument():t.match("^")?n=t.matchRequiredLatexArgument():s=!0;const o=t.matchBalancedExpression("<{>","<}>");return[e,["Integral",null!=o?o:"",null!=n?n:T,null!=r?r:T]]},serialize:function(e,t){return""}}],core:xe,inequalities:[{name:"NotLess",trigger:{infix:["!","<"]},associativity:"right",precedence:246},{name:"NotLess",trigger:{infix:"\\nless"},associativity:"right",precedence:246},{name:"Less",trigger:{infix:"<"},associativity:"right",precedence:245},{name:"Less",trigger:{infix:"\\lt"},associativity:"right",precedence:245},{name:"LessEqual",trigger:{infix:["<","="]},associativity:"right",precedence:241},{name:"LessEqual",trigger:{infix:"\\le"},associativity:"right",precedence:241},{name:"LessEqual",trigger:{infix:"\\leq"},associativity:"right",precedence:241},{name:"LessEqual",trigger:{infix:"\\leqslant"},associativity:"right",precedence:265},{name:"LessNotEqual",trigger:{infix:"\\lneqq"},associativity:"right",precedence:260},{name:"NotLessNotEqual",trigger:{infix:"\\nleqq"},associativity:"right",precedence:260},{name:"LessOverEqual",trigger:{infix:"\\leqq"},associativity:"right",precedence:265},{name:"GreaterOverEqual",trigger:{infix:"\\geqq"},associativity:"right",precedence:265},{name:"Equal",trigger:{infix:"="},associativity:"right",precedence:260},{name:"StarEqual",trigger:{infix:["*","="]},associativity:"right",precedence:260},{name:"StarEqual",trigger:{infix:["\\star","="]},associativity:"right",precedence:260},{name:"PlusEqual",trigger:{infix:["+","="]},associativity:"right",precedence:260},{name:"MinusEqual",trigger:{infix:["-","="]},associativity:"right",precedence:260},{name:"SlashEqual",trigger:{infix:["/","="]},associativity:"right",precedence:260},{name:"EqualEqual",trigger:{infix:["=","="]},associativity:"right",precedence:260},{name:"EqualEqualEqual",trigger:{infix:["=","=","="]},associativity:"right",precedence:265},{name:"TildeFullEqual",trigger:{infix:"\\cong"},associativity:"right",precedence:260},{name:"NotTildeFullEqual",trigger:{infix:"\\ncong"},associativity:"right",precedence:260},{name:"Assign",trigger:{infix:[":","="]},associativity:"right",precedence:260},{name:"Assign",trigger:{infix:"\\coloneq"},associativity:"right",precedence:260},{name:"Approx",trigger:{infix:"\\approx"},associativity:"right",precedence:247},{name:"NotApprox",trigger:{infix:"\\approx"},associativity:"right",precedence:247},{name:"ApproxEqual",trigger:{infix:"\\approxeq"},associativity:"right",precedence:260},{name:"NotApproxEqual",trigger:{infix:["!","\\approxeq"]},associativity:"right",precedence:250},{name:"NotEqual",trigger:{infix:"\\ne"},associativity:"right",precedence:255},{name:"Unequal",trigger:{infix:["!","="]},associativity:"right",precedence:260},{name:"GreaterEqual",trigger:{infix:"\\ge"},associativity:"right",precedence:242},{name:"GreaterEqual",trigger:{infix:"\\geq"},associativity:"right",precedence:242},{name:"GreaterEqual",trigger:{infix:[">","="]},associativity:"right",precedence:243},{name:"GreaterEqual",trigger:{infix:"\\geqslant"},associativity:"right",precedence:265},{name:"GreaterNotEqual",trigger:{infix:"\\gneqq"},associativity:"right",precedence:260},{name:"NotGreaterNotEqual",trigger:{infix:"\\ngeqq"},associativity:"right",precedence:260},{name:"Greater",trigger:{infix:">"},associativity:"right",precedence:245},{name:"Greater",trigger:{infix:"\\gt"},associativity:"right",precedence:245},{name:"NotGreater",trigger:{infix:"\\ngtr"},associativity:"right",precedence:244},{name:"NotGreater",trigger:{infix:["!",">"]},associativity:"right",precedence:244},{name:"RingEqual",trigger:{infix:"\\circeq"},associativity:"right",precedence:260},{name:"TriangleEqual",trigger:{infix:"\\triangleq"},associativity:"right",precedence:260},{name:"DotEqual",trigger:{infix:"\\doteq"},associativity:"right",precedence:265},{name:"DotEqualDot",trigger:{infix:"\\doteqdot"},associativity:"right",precedence:265},{name:"FallingDotEqual",trigger:{infix:"\\fallingdotseq"},associativity:"right",precedence:265},{name:"RisingDotEqual",trigger:{infix:"\\fallingdotseq"},associativity:"right",precedence:265},{name:"QuestionEqual",trigger:{infix:"\\questeq"},associativity:"right",precedence:260},{name:"Equivalent",trigger:{infix:"\\equiv"},associativity:"right",precedence:260},{name:"MuchLess",trigger:{infix:"\\ll"},associativity:"right",precedence:260},{name:"MuchGreater",trigger:{infix:"\\gg"},associativity:"right",precedence:260},{name:"Precedes",trigger:{infix:"\\prec"},associativity:"right",precedence:260},{name:"Succeeds",trigger:{infix:"\\succ"},associativity:"right",precedence:260},{name:"PrecedesEqual",trigger:{infix:"\\preccurlyeq"},associativity:"right",precedence:260},{name:"SucceedsEqual",trigger:{infix:"\\curlyeqprec"},associativity:"right",precedence:260},{name:"NotPrecedes",trigger:{infix:"\\nprec"},associativity:"right",precedence:260},{name:"NotSucceeds",trigger:{infix:"\\nsucc"},associativity:"right",precedence:260},{name:"Between",trigger:{infix:"\\between"},associativity:"right",precedence:265}],other:me,physics:[{name:"mu-0",trigger:{symbol:["\\mu","_","0"]}}],sets:[{trigger:{symbol:"\\N"},parse:"NaturalNumber"},{trigger:{symbol:"\\Z"},parse:"Integer"},{trigger:{symbol:"\\Q"},parse:"RationalNumber"},{trigger:{symbol:["\\mathbb","<{>","A","<}>"]},parse:"AlgebraicNumber"},{trigger:{symbol:"\\R"},parse:"RealNumber"},{trigger:{symbol:"\\C"},parse:"ComplexNumber"},{trigger:{symbol:"\\varnothing"},parse:"EmptySet"},{trigger:{symbol:"\\emptyset"},parse:"EmptySet"},{name:"Complement",trigger:{infix:"\\complement"},precedence:240},{name:"Element",trigger:{infix:"\\in"},precedence:240},{name:"Intersection",trigger:{infix:"\\Cap"},precedence:350},{name:"NotElement",trigger:{infix:"\\notin"},precedence:240},{name:"SetMinus",trigger:{infix:"\\setminus"},precedence:650},{name:"SubsetEqual",trigger:{infix:"\\subseteq"},precedence:240},{name:"SymmetricDifference",trigger:{infix:"\\triangle"},precedence:260},{name:"Union",trigger:{infix:"\\cup"},precedence:350},{name:"Contains",trigger:{infix:"\\ni"},associativity:"right",precedence:160},{name:"Subset",trigger:{infix:"\\subset"},associativity:"right",precedence:240},{name:"SquareSubset",trigger:{infix:"\\sqsubset"},associativity:"right",precedence:265},{name:"SquareSubsetEqual",trigger:{infix:"\\sqsubseteq"},associativity:"right",precedence:265},{name:"Superset",trigger:{infix:"\\supset"},associativity:"right",precedence:240},{name:"SquareSuperset",trigger:{infix:"\\sqsupset"},associativity:"right",precedence:265},{name:"SquareSupersetEqual",trigger:{infix:"\\sqsupseteq"},associativity:"right",precedence:265},{name:"NotSubset",trigger:{infix:"\\nsubset"},associativity:"right",precedence:240},{name:"NotSuperset",trigger:{infix:"\\nsupset"},associativity:"right",precedence:240},{name:"SupersetEqual",trigger:{infix:"\\supseteq"},associativity:"right",precedence:240},{name:"NotSubsetNotEqual",trigger:{infix:"\\nsubseteq"},associativity:"right",precedence:240},{name:"NotSupersetNotEqual",trigger:{infix:"\\nsupseteq"},associativity:"right",precedence:240},{name:"SubsetNotEqual",trigger:{infix:"\\subsetneq"},associativity:"right",precedence:240},{name:"SubsetNotEqual",trigger:{infix:"\\varsupsetneqq"},associativity:"right",precedence:240},{name:"SupersetNotEqual",trigger:{infix:"\\supsetneq"},associativity:"right",precedence:240},{name:"SupersetNotEqual",trigger:{infix:"\\varsupsetneq"},associativity:"right",precedence:240}],symbols:[{trigger:{symbol:"\\alpha"},parse:"α"},{trigger:{symbol:"\\beta"},parse:"β"},{trigger:{symbol:"\\gamma"},parse:"γ"},{trigger:{symbol:"\\delta"},parse:"δ"},{trigger:{symbol:"\\epsilon"},parse:"ϵ"},{trigger:{symbol:"\\varepsilon"},parse:"ε"},{trigger:{symbol:"\\zeta"},parse:"ζ"},{trigger:{symbol:"\\eta"},parse:"η"},{trigger:{symbol:"\\theta"},parse:"θ"},{trigger:{symbol:"\\vartheta"},parse:"ϑ"},{trigger:{symbol:"\\iota"},parse:"ι"},{trigger:{symbol:"\\kappa"},parse:"κ"},{trigger:{symbol:"\\varkappa"},parse:"ϰ"},{trigger:{symbol:"\\lambda"},parse:"λ"},{trigger:{symbol:"\\mu"},parse:"μ"},{trigger:{symbol:"\\nu"},parse:"ν"},{trigger:{symbol:"\\xi"},parse:"ξ"},{trigger:{symbol:"\\omicron"},parse:"ο"},{trigger:{symbol:"\\varpi"},parse:"ϖ"},{trigger:{symbol:"\\rho"},parse:"ρ"},{trigger:{symbol:"\\varrho"},parse:"ϱ"},{trigger:{symbol:"\\sigma"},parse:"σ"},{trigger:{symbol:"\\varsigma"},parse:"ς"},{trigger:{symbol:"\\tau"},parse:"τ"},{trigger:{symbol:"\\phi"},parse:"ϕ"},{trigger:{symbol:"\\varphi"},parse:"φ"},{trigger:{symbol:"\\upsilon"},parse:"υ"},{trigger:{symbol:"\\chi"},parse:"χ"},{trigger:{symbol:"\\psi"},parse:"ψ"},{trigger:{symbol:"\\omega"},parse:"ω"},{trigger:{symbol:"\\Gamma"},parse:"Γ"},{trigger:{symbol:"\\Delta"},parse:"Δ"},{trigger:{symbol:"\\Theta"},parse:"Θ"},{trigger:{symbol:"\\Lambda"},parse:"Λ"},{trigger:{symbol:"\\Xi"},parse:"Ξ"},{trigger:{symbol:"\\Pi"},parse:"Π"},{trigger:{symbol:"\\Sigma"},parse:"Σ"},{trigger:{symbol:"\\Upsilon"},parse:"Υ"},{trigger:{symbol:"\\Phi"},parse:"Φ"},{trigger:{symbol:"\\Psi"},parse:"Ψ"},{trigger:{symbol:"\\Omega"},parse:"Ω"},{trigger:{symbol:"\\digamma"},parse:"ϝ"},{trigger:{symbol:"\\aleph"},parse:"ℵ"},{trigger:{symbol:"\\beth"},parse:"ℶ"},{trigger:{symbol:"\\daleth"},parse:"ℸ"},{trigger:{symbol:"\\gimel"},parse:"ℷ"},{trigger:{symbol:"\\Finv"},parse:"Ⅎ"},{trigger:{symbol:"\\Game"},parse:"⅁"},{trigger:{symbol:"\\wp"},parse:"℘"},{trigger:{symbol:"\\eth"},parse:"ð"},{trigger:{symbol:"\\mho"},parse:"℧"},{trigger:{symbol:"\\clubsuit"},parse:"♣"},{trigger:{symbol:"\\heartsuit"},parse:"♡"},{trigger:{symbol:"\\spadesuit"},parse:"♠"},{trigger:{symbol:"\\diamondsuit"},parse:"♢"},{trigger:{symbol:"\\sharp"},parse:"♯"},{trigger:{symbol:"\\flat"},parse:"♭"},{trigger:{symbol:"\\natural"},parse:"♮"}],trigonometry:[{name:"Arcsin",trigger:"\\arcsin",arguments:"implicit",parse:Le},{name:"Arccos",trigger:"\\arccos",arguments:"implicit",parse:Le},{name:"Arctan",trigger:"\\arctan",arguments:"implicit",parse:Le},{name:"Arctan",trigger:"\\arctg",arguments:"implicit",parse:Le},{name:"Arccot",trigger:"\\arcctg",arguments:"implicit",parse:Le},{name:"Arcsec",trigger:"\\arcsec",arguments:"implicit",parse:Le},{name:"Arccsc",trigger:"\\arccsc",arguments:"implicit",parse:Le},{name:"Arsinh",trigger:"\\arsinh",arguments:"implicit",parse:Le},{name:"Arcosh",trigger:"\\arcosh",arguments:"implicit",parse:Le},{name:"Artanh",trigger:"\\artanh",arguments:"implicit",parse:Le},{name:"Arsech",trigger:"\\arsech",arguments:"implicit",parse:Le},{name:"Arcsch",trigger:"\\arcsch",arguments:"implicit",parse:Le},{name:"Cosh",trigger:"\\ch",arguments:"implicit",parse:Le},{name:"Cosec",trigger:"\\cosec",arguments:"implicit",parse:Le},{name:"Cosh",trigger:"\\cosh",arguments:"implicit",parse:Le},{name:"Cot",trigger:"\\cot",arguments:"implicit",parse:Le},{name:"Cot",trigger:"\\cotg",arguments:"implicit",parse:Le},{name:"Coth",trigger:"\\coth",arguments:"implicit",parse:Le},{name:"Csc",trigger:"\\csc",arguments:"implicit",parse:Le},{name:"Cot",trigger:"\\ctg",arguments:"implicit",parse:Le},{name:"Coth",trigger:"\\cth",arguments:"implicit",parse:Le},{name:"Sec",trigger:"\\sec",arguments:"implicit",parse:Le},{name:"Sinh",trigger:"\\sinh",arguments:"implicit",parse:Le},{name:"Sinh",trigger:"\\sh",arguments:"implicit",parse:Le},{name:"Tan",trigger:"\\tan",arguments:"implicit",parse:Le},{name:"Tan",trigger:"\\tg",arguments:"implicit",parse:Le},{name:"Tanh",trigger:"\\tanh",arguments:"implicit",parse:Le},{name:"Tanh",trigger:"\\th",arguments:"implicit",parse:Le},{name:"Cos",trigger:"\\cos",arguments:"implicit",parse:Le},{name:"Sin",trigger:"\\sin",arguments:"implicit",parse:Le}]},Re={precision:15,positiveInfinity:"\\infty",negativeInfinity:"-\\infty",notANumber:"\\operatorname{NaN}",decimalMarker:".",groupSeparator:",",exponentProduct:"\\cdot",beginExponentMarker:"10^{",endExponentMarker:"}",notation:"auto",truncationMarker:"\\ldots",beginRepeatingDigits:"\\overline{",endRepeatingDigits:"}",imaginaryNumber:"\\imaginaryI"},$e={invisibleOperator:z,skipSpace:!0,parseArgumentsOfUnknownLatexCommands:!0,parseNumbers:!0,promoteUnknownSymbols:/^[a-zA-Z]$/,promoteUnknownFunctions:/^[fg]$/,ignoreCommands:["\\displaystyle","\\!","\\:","\\enskip","\\quad","\\,","\\;","\\enspace","\\qquad","\\selectfont","\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],idempotentCommands:["\\left","\\right","\\mleft","\\mright","\\middle","\\bigl","\\bigm","\\bigr","\\Bigl","\\Bigm","\\Bigr","\\biggl","\\biggm","\\biggr","\\Biggl","\\Biggm","\\Biggr"],invisiblePlusOperator:O,preserveLatex:!1},je={invisibleMultiply:"",invisiblePlus:"",multiply:"\\times"};function Be(e,t){var i;let n=e;for(let e=0;e<t.length;e++){let r=null!==(i=t[e])&&void 0!==i?i:"";if(/[a-zA-Z*]/.test(r[0])){const t=n.match(new RegExp("(.*)#"+Number(e+1).toString()));t&&/\\[a-zA-Z*]+/.test(t[1])&&(r=" "+r)}n=n.replace("#"+Number(e+1).toString(),r)}return n}class Ze{constructor(e,t,i,n){let r;this.index=0,this.options={...Re,...$e,...t},this.tokens=e,this.onError=e=>n({...e,before:this.latexBefore(),after:this.latexAfter()}),this.dictionary=i,this.invisibleOperatorPrecedence=0,this.options.invisibleOperator&&(r=this.dictionary.name.get(this.options.invisibleOperator),void 0===r?n({code:"unknown-operator",arg:"invisible operator "+this.options.invisibleOperator}):void 0===r.precedence?n({code:"expected-operator",arg:"invisible operator "+this.options.invisibleOperator}):this.invisibleOperatorPrecedence=r.precedence)}clone(e,t){return new Ze(this.tokens.slice(e,t),this.options,this.dictionary,this.onError)}balancedClone(e,t,i=!0){if(!this.matchAll(e))return i||this.onError({code:"syntax-error",arg:"Expected "+l(e)}),null;const n=this.index;let r=n,s=1;for(;!this.atEnd&&0!==s;)this.skipSpace(),r=this.index,this.matchAll(t)?s-=1:this.matchAll(e)?s+=1:this.next();return 0!==s?(i||this.onError({code:"unbalanced-symbols",arg:l(e)+l(t)}),this.index=n,null):this.clone(n,r)}get atEnd(){return this.index>=this.tokens.length}get peek(){return this.tokens[this.index]}latex(e,t){return l(this.tokens.slice(e,t))}latexAhead(e){return l(this.tokens.slice(this.index,this.index+e))}latexBefore(){return this.latex(0,this.index)}latexAfter(){return this.latex(this.index)}lookAhead(){let e=Math.min(this.dictionary.lookahead,this.tokens.length-this.index);const t=[];for(;e>0;)t[e]=this.latexAhead(e--);return t}peekDefinition(e){let t;t="operator"===e?this.lookAhead().map(((e,t)=>{var i,n,r,s,o;return null!==(s=null!==(n=null===(i=this.dictionary.infix[t])||void 0===i?void 0:i.get(e))&&void 0!==n?n:null===(r=this.dictionary.postfix[t])||void 0===r?void 0:r.get(e))&&void 0!==s?s:null===(o=this.dictionary.prefix[t])||void 0===o?void 0:o.get(e)})):this.lookAhead().map(((t,i)=>{var n;return null===(n=this.dictionary[e][i])||void 0===n?void 0:n.get(t)}));for(let e=t.length;e>0;e--)if(void 0!==t[e])return[t[e],e];return[null,0]}next(){return this.tokens[this.index++]}skipSpace(){if(!this.atEnd&&"<{>"===this.peek&&"<}>"===this.tokens[this.index+1])return this.index+=2,this.skipSpace(),!0;let e=!1;for(;!this.atEnd&&(this.options.ignoreCommands.includes(this.peek)||this.options.idempotentCommands.includes(this.peek));)this.index+=1,this.skipSpace(),e=!0;if(!this.options.skipSpace)return!1;for(;this.match("<space>");)e=!0;return e&&this.skipSpace(),e}match(e){return this.tokens[this.index]===e&&(this.index++,!0)}matchAll(e){let t=!0;"string"==typeof e&&(e=[e]);let i=0;do{t=this.tokens[this.index+i]===e[i++]}while(t&&i<e.length);return t&&(this.index+=i),t}matchAny(e){return e.includes(this.tokens[this.index])?this.tokens[this.index++]:""}matchWhile(e){const t=[];for(;e.includes(this.tokens[this.index]);)t.push(this.tokens[this.index++]);return t}matchSign(){let e=!1,t=!1;for(;!t;)this.skipSpace()?t=!1:this.match("-")?(e=!e,t=!1):t=!this.match("+");return e?"-":"+"}matchDecimalDigits(){let e="",t=!1;for(;!t;)if(e+=this.matchWhile(["0","1","2","3","4","5","6","7","8","9"]).join(""),t=!0,this.options.groupSeparator){const e=this.index;this.match(this.options.groupSeparator)&&(/[0-9]/.test(this.peek)?t=!1:this.index=e)}return e}matchSignedInteger(){const e=this.index,t=this.matchSign(),i=this.matchDecimalDigits();return i?("-"===t?"-":"")+i:(this.index=e,"")}matchExponent(){const e=this.index;let t="";if(this.matchAny(["e","E","d","D"])){const e=this.matchSignedInteger();e&&(t="e"+e)}if(t)return t;if(this.match("\\times")&&(this.skipSpace(),this.match("1")&&this.match("0")&&this.match("^"))){if(/[0-9]/.test(this.peek))return"e"+this.next();if(this.match("<{>")){this.skipSpace();const e=this.matchSignedInteger();if(this.skipSpace(),this.match("<}>")&&e)return"e"+e}}return this.index=e,""}matchNumber(){var e,t;if(!this.options.parseNumbers)return"";const i=this.index,n=this.matchSign();let r=this.matchDecimalDigits();if(!r)return this.index=i,"";r=("-"===n?"-":"")+r;let s=!1,o=!1;this.match(null!==(e=this.options.decimalMarker)&&void 0!==e?e:"")&&(s=!0,r+="."+(null!==(t=this.matchDecimalDigits())&&void 0!==t?t:"0"));const a=this.matchExponent();return a&&(o=!0),r?r.length+a.length>12?s||o?r+a+"d":r+"n":r+a:(this.index=i,"")}matchOperator(e,t=null,i=0){const[n,r]=this.peekDefinition(e);if(null===n)return null;if("function"==typeof n.parse){let e=null;return[t,e]=n.parse(t,this,i),null===e?null:this.applyInvisibleOperator(t,e)}let s=n.precedence;if(void 0===s||s<i)return null;s+="left"===n.associativity?1:0,this.index+=r;const o=this.matchExpression(s);return this.applyInvisibleOperator(...this.applyOperator(n.parse,t,o))}matchArguments(e){if(!e)return null;const t=this.index;let i=null;const n=this.matchMatchfixOperator();if("group"===e&&"Parentheses"===re(n))i=oe(n);else if("implicit"===e)if("Parentheses"===re(n))i=oe(n);else if(null!==n)i=[n];else{const e=this.matchPrimary();null!==e&&(i=[e])}else this.index=t;return i}matchMatchfixOperator(){const[e]=this.peekDefinition("matchfix");if(null===e)return null;if("function"==typeof e.parse)return this.applyInvisibleOperator(...e.parse(null,this,0));const t="object"==typeof e.trigger?e.trigger.matchfix:e.trigger;if(!t||!e.closeFence||!e.parse)return null;const i=this.matchBalancedExpression(t,e.closeFence,this.onError);return i?[e.parse,i]:[e.parse]}matchDefinition(e){const[t,i]=this.peekDefinition(e);if("function"==typeof(null==t?void 0:t.parse)){const[,e]=t.parse(null,this,0);return[t,e]}return this.index+=i,[t,null]}matchSymbol(){var e,t,i,n;const[r,s]=this.matchDefinition("symbol");if(null!==s)return s;if(null===r){if(null===(e=this.options.promoteUnknownFunctions)||void 0===e?void 0:e.test(this.peek)){const e=this.next(),t=this.matchMatchfixOperator();return null===t?e:"Parentheses"!==re(t)?null:[e,...oe(t)]}return(null===(t=this.options.promoteUnknownSymbols)||void 0===t?void 0:t.test(this.peek))?this.next():this.matchUnknownLatexCommand()}const o=[],a=[];let l,u=null!==(i=r.optionalLatexArg)&&void 0!==i?i:0;for(;u>0;)l=this.matchOptionalLatexArgument(),null!==l&&a.push(l),u--;for(u=null!==(n=r.requiredLatexArg)&&void 0!==n?n:0;u>0;)l=this.matchRequiredLatexArgument(),null===l&&this.onError({code:"expected-argument"}),null!==l&&o.push(l),u--;const c=this.matchArguments(r.arguments);return null===c?0===o.length&&0===a.length?r.parse:[r.parse,...o,...a]:[r.parse,...o,...c,...a]}matchOptionalLatexArgument(){return this.skipSpace(),this.matchBalancedExpression("[","]")}matchRequiredLatexArgument(){return this.skipSpace(),this.matchBalancedExpression("<{>","<}>")||(/^[0-9]$/.test(this.peek)?parseFloat(this.next()):/^[^\\#]$/.test(this.peek)?this.next():this.matchSymbol())}matchSupsub(e){if(null===e)return null;let t=null;return this.skipSpace(),[["^","superfix"],["_","subfix"]].forEach((i=>{var n,r,s;if(null!==t)return;const[o,a]=i,l=this.index;if(!this.match(o))return;const u=this.index;let c,f=0;if(this.match("<{>")?([c,f]=this.peekDefinition(a),c?"function"==typeof c.parse?t=c.parse(e,this,0)[1]:(this.index+=f,this.match("<}>")?t=[null!==(n=c.parse)&&void 0!==n?n:c.name,e]:this.index=u):this.index=u):([c,f]=this.peekDefinition(a),c?"function"==typeof c.parse?t=c.parse(e,this,0)[1]:(this.index+=f,t=[null!==(r=c.parse)&&void 0!==r?r:c.name,e]):this.index=u),null===t&&(c=null===(s=this.dictionary.infix[1])||void 0===s?void 0:s.get(o),"function"==typeof(null==c?void 0:c.parse)?(this.index=l,t=c.parse(e,this,0)[1]):"string"==typeof(null==c?void 0:c.parse)?([e,t]=this.applyOperator(c.parse,e,this.matchRequiredLatexArgument()),t=this.applyInvisibleOperator(e,t)):t=this.applyInvisibleOperator(e,o)),null!==t){const e=this.matchArguments(null==c?void 0:c.arguments);null!==e&&(t=[t,...e])}})),t}matchPostfix(e){if(null===e)return null;const[t,i]=this.peekDefinition("postfix");return null==t?null:"function"==typeof t.parse?([,e]=t.parse(e,this,0),null===e?null:e):(this.index+=i,[t.parse,e])}matchString(){let e="",t=this.atEnd;for(;!t;){if(this.match("<space>"))e+=" ";else{const i=this.peek;"]"===i?t=!0:/^<({|}|\$|\$\$|space)>$/.test(i)?"\\"===i[0]?(this.onError({code:"unexpected-command"}),e+=this.next()):t=!0:e+=this.next()}t=t||this.atEnd}return e}matchEnvironmentName(e,t){if(this.match(e)){const e=this.index;if(this.match("<{>")){const e=this.matchString();if(this.match("<}>")&&e===t)return!0}this.index=e}return!1}matchTabular(){const e=["list"];let t=["list"],i=null,n=!1;for(;!this.atEnd&&!n;)if(this.match("&"))t.push(null!=i?i:T),i=null;else if(this.match("\\\\")||this.match("\\cr"))this.skipSpace(),this.matchOptionalLatexArgument(),null!==i&&t.push(i),e.push(t),t=["list"],i=null;else{const e=this.matchExpression();null===e&&(n=!0),i=null!==i?this.applyInvisibleOperator(i,e):e}return t.length>1&&e.push(t),e}matchEnvironment(){var e;if(this.match("\\begin")&&this.match("<{>")){const t=this.matchString();if(this.match("<}>")){const i=this.index;let n=this.index,r=1;for(;!this.atEnd&&0!==r;)n=this.index,this.matchEnvironmentName("\\begin",t)?r+=1:this.matchEnvironmentName("\\end",t)?r-=1:this.next();const s=this.dictionary.environment.get(t);return"function"==typeof(null==s?void 0:s.parse)?s.parse(null,this.clone(i,n),0)[1]:null!==(e=null==s?void 0:s.parse)&&void 0!==e?e:null}}return null}applyOperator(e,t,i){var n,r,s,o;const a=this.dictionary.name.get(e);if(void 0===a)return this.onError({code:"unknown-operator"}),[t,i];if(void 0!==(null===(n=a.trigger)||void 0===n?void 0:n.prefix)&&null===t&&null!==i)return[null,[a.name,i]];if(void 0!==(null===(r=a.trigger)||void 0===r?void 0:r.postfix)&&null!==t)return[null,[a.name,t]];if(void 0!==(null===(s=a.trigger)||void 0===s?void 0:s.matchfix)||void 0!==(null===(o=a.trigger)||void 0===o?void 0:o.infix)){if("non"===a.associativity)return[null,[e,null!=t?t:"Missing",null!=i?i:"Missing"]];if(re(t)===e){if("both"===a.associativity){if(re(i)===e){if(Array.isArray(t))return[null,t.concat(oe(i))];if(H(t))return[null,t.fn.concat(oe(i))]}else i&&(Array.isArray(t)&&t.push(i),H(t)&&t.fn.push(i));return[null,t]}return"left"===a.associativity?[null,[e,null!=t?t:P,null!=i?i:P]]:Array.isArray(t)?[null,[e,t[1],[e,t[2],null!=i?i:P]]]:(H(t)&&(t.fn[2]=[e,t.fn[2],null!=i?i:P]),[null,t])}return re(i)===e?"both"===a.associativity?(Array.isArray(i)&&t&&i.splice(1,0,t),H(i)&&t&&i.fn.splice(1,0,t),[null,i]):"right"===a.associativity?[null,[e,null!=t?t:P,null!=i?i:P]]:Array.isArray(i)?[null,[e,i[1],[e,i[2],null!=t?t:P]]]:(H(i)&&(i.fn[2]=[e,i.fn[2],null!=t?t:P]),[null,i]):[null,[e,null!=t?t:"Missing",null!=i?i:"Missing"]]}return[t,null]}applyInvisibleOperator(e,t){if(null===e)return t;if(null===t)return e;if(this.options.invisiblePlusOperator&&("number"==typeof e||B(e))&&function(e){var t,i;const n=se(e);if(null!==n&&["ThreeQuarter","TwoThird","Half","Third","Quarter"].includes(n))return!0;if(re(e)!==L)return!1;const r=null!==(t=W(ue(e,1)))&&void 0!==t?t:NaN,s=null!==(i=W(ue(e,2)))&&void 0!==i?i:NaN;return Number.isInteger(r)&&Number.isInteger(s)}(t))return[e,t]=this.applyOperator(this.options.invisiblePlusOperator,e,t),null===e?t:null;if(this.options.invisibleOperator)return[e,t]=this.applyOperator(this.options.invisibleOperator,e,t),null===e?t:null;let i=["LatexTokens"];return"LatexTokens"===re(e)?i=i.concat(oe(e)):i.push(e),null!==t&&("LatexTokens"===re(t)?i=i.concat(oe(t)):i.push(t)),this.options.invisibleOperator&&this.onError({code:"unexpected-sequence"}),i}matchUnknownLatexCommand(){var e;const t=this.peek;if(!t||"\\"!==t[0])return null;if(this.next(),"\\operatorname"===t){if(this.skipSpace(),"<{>"===this.peek){let e="";for(this.next();!this.atEnd&&"<}>"!==this.tokens[this.index];)e+=this.next();return e}return null!==(e=this.next())&&void 0!==e?e:P}const i=[],n=[];let r=!1;do{r=!0;let e=this.matchOptionalLatexArgument();null!==e&&(i.push(e),r=!1),this.skipSpace(),"<{>"===this.peek&&(e=this.matchRequiredLatexArgument(),null!==e&&(n.push(e),r=!1))}while(!r);return i.length>0||n.length>0?[t,...n,...i]:t}matchPrimary(e){let t=null;const i=this.index,n=this.matchNumber();n&&(t={num:n}),null===t&&(t=this.matchMatchfixOperator()),null===t&&(t=this.matchEnvironment()),null===t&&(t=this.matchSymbol());let r=null;do{r=this.matchSupsub(t),t=null!=r?r:t}while(null!==r);let s=null;do{s=this.matchPostfix(t),t=null!=s?s:t}while(null!==s);return this.decorate(t,i)}matchBalancedExpression(e,t,i){const n=this.balancedClone(e,t);if(!n)return null==i||i({code:"unbalanced-symbols",arg:l(e)+l(t)}),null;const r=n.matchExpression();return n.atEnd||null==i||i({code:"unbalanced-symbols",arg:l(e)+l(t)}),r}matchExpression(e=0){let t=null;const i=this.index;this.skipSpace(),t=this.matchPrimary(e),null===t&&(t=this.matchOperator("prefix"));let n=!1;for(;!this.atEnd&&!n;){this.skipSpace();let i=this.matchOperator("infix",t,e);if(null===i&&null!==t){const[e]=this.peekDefinition("operator");if(null===e){const e=this.matchExpression(this.invisibleOperatorPrecedence);null!==e&&(i=this.applyInvisibleOperator(t,e))}}null!==i?t=i:n=!0}return this.decorate(t,i)}decorate(e,t){if(null===e)return null;if(this.options.preserveLatex){const i=this.latex(t,this.index);Array.isArray(e)?e={latex:i,fn:e}:"number"==typeof e?e={latex:i,num:Number(e).toString()}:"string"==typeof e?e={latex:i,sym:e}:"object"==typeof e&&null!==e&&(e.latex=i)}return e}}function Qe(e,t){const i=e.length,n=e;e=e.slice(0,-1);for(let i=0;i<e.length-16;i++){const n=e.substr(0,i);for(let r=0;r<17;r++){const s=e.substr(i,r+1),o=Math.floor((e.length-n.length)/s.length);if(o>1&&(n+s.repeat(o+1)).startsWith(e))return"0"===s?n.replace(/(\d{3})/g,"$1"+t.groupSeparator):n.replace(/(\d{3})/g,"$1"+t.groupSeparator)+t.beginRepeatingDigits+s+t.endRepeatingDigits}}const r=i>t.precision-1;return e=n,r&&(e=e.substr(0,t.precision-1)),t.groupSeparator&&(e=e.replace(/(\d{3})/g,"$1"+t.groupSeparator)).endsWith(t.groupSeparator)&&(e=e.slice(0,-t.groupSeparator.length)),r?e+t.truncationMarker:e}function He(e,t){var i;return e?t.beginExponentMarker?t.beginExponentMarker+e+(null!==(i=t.endExponentMarker)&&void 0!==i?i:""):"10^{"+e+"}":""}function Ge(e,t){var i,n;let r;if("number"==typeof e)r=e;else{if(!B(e))return"";r=e.num}if(r===1/0||"Infinity"===r||"+Infinity"===r)return t.positiveInfinity;if(r===-1/0||"-Infinity"===r)return t.negativeInfinity;if("NaN"===r||"number"==typeof r&&Number.isNaN(r))return t.notANumber;if("number"==typeof r)return"engineering"===t.notation?function(e,t){if(0===e)return"0";const i=Math.abs(e);let n=Math.round(Math.log10(i));n-=n%3,i<1e3&&(n=0);const r=i/Math.pow(10,n);let s="";const o=r.toString().match(/^(.*)\.(.*)$/);(null==o?void 0:o[1])&&o[2]&&(s=o[1]+t.decimalMarker+o[2]),t.groupSeparator&&(s=Qe(r.toExponential(),t));let a="";return 0!==n&&(a=He(n.toString(),t)),(e<0?"-":"")+s+a}(r,t):function(e,t){let i,n=e.match(/^(.*)[e|E]([-+]?[0-9]+)$/i);(null==n?void 0:n[1])&&n[2]&&(i=He(n[2],t),i&&(i=t.exponentProduct+i));let r=e,s="";return n=(i?n[1]:e).match(/^(.*)\.(.*)$/),(null==n?void 0:n[1])&&n[2]&&(r=n[1],s=n[2]),t.groupSeparator&&(r=r.replace(/\B(?=(\d{3})+(?!\d))/g,t.groupSeparator),s=Qe(s,t)),s&&(s=t.decimalMarker+s),r+s+(null!=i?i:"")}(r.toString(),t);/[a-zA-Z]$/.test(r)&&(r=r.slice(0,-1));let s="";for("-"===r[0]?(s="-",r=r.substr(1)):"+"===r[0]&&(r=r.substr(1));"0"===r[0];)r=r.substr(1);if(0===r.length)return s+"0";"."===r[0]&&(r="0"+r);let o="";if(r.indexOf(".")>=0){const e=r.match(/(\d*)\.(\d*)([e|E]([-+]?[0-9]*))?/);if(!e)return"";const n=e[1],a=e[2];if(o=null!==(i=e[4])&&void 0!==i?i:"","0"===n){let e=0;for(;"0"===a[e]&&e<a.length;)e+=1;let i="";if(e<=4)i="0"+t.decimalMarker,i+=a.substr(0,e),i+=Qe(r.substr(i.length),t);else if(e+1>=t.precision)i="0",s="";else{i=r[e];const n=Qe(r.substr(e+1),t);n&&(i+=t.decimalMarker+n)}"0"!==i&&(!(r.length-1>t.precision)||t.endRepeatingDigits&&i.endsWith(t.endRepeatingDigits)||!t.truncationMarker||i.endsWith(t.truncationMarker)||(i+=t.truncationMarker),e>4&&(i+=t.exponentProduct+He((1-e).toString(),t))),r=i}else{r=n.replace(/\B(?=(\d{3})+(?!\d))/g,t.groupSeparator);const e=Qe(a,t);e&&(r+=t.decimalMarker+e)}}else if(r.length>t.precision){const e=r.length;let i=r[0];const n=Qe(r.substr(1),t);n&&(i+=t.decimalMarker+n,t.truncationMarker&&!i.endsWith(t.truncationMarker)&&t.endRepeatingDigits&&!i.endsWith(t.endRepeatingDigits)&&(i+=t.truncationMarker)),"1"!==i?i+=t.exponentProduct:i="",r=i+He((e-1).toString(),t)}else{const e=r.match(/([0-9]*)\.?([0-9]*)([e|E]([-+]?[0-9]+))?/);e&&(r=e[1],e[2]&&(r+=t.decimalMarker+e[2]),o=null!==(n=e[4])&&void 0!==n?n:""),r=r.replace(/\B(?=(\d{3})+(?!\d))/g,t.groupSeparator)}const a=He(o,t);return s+r+(a?t.exponentProduct+a:"")}class We{constructor(e,t,i){this.level=-1,this.options=e,e.invisibleMultiply&&(/#1/.test(e.invisibleMultiply)&&/#2/.test(e.invisibleMultiply)||i({code:"expected-argument",arg:"invisibleMultiply"})),this.onError=i,this.dictionary=t}wrap(e,t){if(null===e)return"";if(void 0===t)return"("+this.serialize(e)+")";if("number"==typeof e||B(e)||"string"==typeof e||Z(e))return this.serialize(e);const i=re(e);if(i&&"Parentheses"!==i){const n=this.dictionary.name.get(i);if(n&&void 0!==n.precedence&&n.precedence<t)return this.wrapString(this.serialize(e),(this.level,"paren"))}return this.serialize(e)}wrapShort(e){if(null===e)return"";const t=this.serialize(e);return"Parentheses"===re(e)||"number"==typeof e||B(e)||/(^(.|\\[a-zA-Z*]+))$/.test(t)?t:this.wrapString(t,(this.level,"paren"))}wrapString(e,t){return"none"===t?e:"("+e+")"}serializeSymbol(e,t){const i=ie(e);if(!i){if("string"==typeof(null==t?void 0:t.serialize))return t.serialize;const i=se(e);if(null===i)return"";switch(function(e,t){const i=se(e);return null===i?"asis":i.length>1?"upright":"asis"}(e,this.level)){case"upright":return"\\operatorname{"+i+"}";default:return i}}const n=oe(e);if(!t){if("string"==typeof i&&i.length>0&&"\\"===i[0]){let e=i;for(const t of n)e+="{"+this.serialize(t)+"}";return e}return`${this.serialize(i)}(${n.map((e=>this.serialize(e))).join(", ")})`}if(t.requiredLatexArg>0){let e="",i="",r=0;for(;r<t.requiredLatexArg;)i+="{"+this.serialize(n[r++])+"}";for(;r<Math.min(n.length,t.optionalLatexArg+t.requiredLatexArg);){const t=this.serialize(n[1+r++]);t&&(e+="["+t+"]")}return t.serialize+(e+i)}return this.level,t.serialize+this.serialize(["Parentheses",...n])}serializeDictionary(e){return`\\left[\\begin{array}{lll}${Object.keys(e).map((t=>`\\textbf{${t}} & \\rightarrow & ${this.serialize(e[t])}`)).join("\\\\")}\\end{array}\\right]`}serialize(e){if(null===e)return"";this.level+=1;const t=(()=>{var t,i,n,r;const s=Ge(e,this.options);if(s)return s;const o=K(e);if(null!==o)return`\\text{${o}}`;const u=se(e);if(null!==u)return this.serializeSymbol(e,this.dictionary.name.get(u));const c=fe(e);if(null!==c)return this.serializeDictionary(c);const f=re(e);if(f){if("\\"===f[0]){const t=oe(e);return 0===t.length?f:f+"{"+t.map((e=>this.serialize(e))).filter((e=>Boolean(e))).join("}{")+"}"}const s=this.dictionary.name.get(f);if(s){let o="";return"function"==typeof s.serialize&&(o=s.serialize(this,e)),o||void 0===s.precedence&&!(null===(t=s.trigger)||void 0===t?void 0:t.superfix)&&!(null===(i=s.trigger)||void 0===i?void 0:i.subfix)||(o=function(e,t,i){var n,r,s,o,a;let l="";const u=ce(t),c=re(t);if((null===(n=i.trigger)||void 0===n?void 0:n.superfix)||(null===(r=i.trigger)||void 0===r?void 0:r.subfix))return 1!==u&&e.onError({code:"operator-requires-one-operand",arg:e.serializeSymbol(c)}),Be(i.serialize,[e.serialize(ue(t,1))]);if(null===(s=i.trigger)||void 0===s?void 0:s.postfix)return 1!==u&&e.onError({code:"postfix-operator-requires-one-operand",arg:e.serializeSymbol(c)}),Be(i.serialize,[e.wrap(ue(t,1),i.precedence)]);if(null===(o=i.trigger)||void 0===o?void 0:o.prefix)return 1!==u&&e.onError({code:"prefix-operator-requires-one-operand",arg:e.serializeSymbol(c)}),Be(i.serialize,[e.wrap(ue(t,1),i.precedence+1)]);if(null===(a=i.trigger)||void 0===a?void 0:a.infix){l=e.wrap(ue(t,1),i.precedence);for(let n=2;n<u+1;n++){const r=ue(t,n);null!==r&&(l=Be(i.serialize,[l,e.wrap(r,i.precedence)]))}}return l}(this,e,s)),!o&&(null===(n=s.trigger)||void 0===n?void 0:n.matchfix)&&(o=function(e,t,i){var n,r;let s=[];if("string"==typeof(null===(n=i.trigger)||void 0===n?void 0:n.matchfix)?s.push(null===(r=i.trigger)||void 0===r?void 0:r.matchfix):i.trigger&&Array.isArray(i.trigger.matchfix)&&(s=[...i.trigger.matchfix]),ce(t)>=1){let n="";for(const r of oe(t))r&&(s.push(n),s.push(e.serialize(r)),n=i.separator)}return s.push(l(i.closeFence)),a(s)}(this,e,s)),!o&&(null===(r=s.trigger)||void 0===r?void 0:r.symbol)&&(o=this.serializeSymbol(e,s)),o}}if(Array.isArray(e)||H(e))return this.serializeSymbol(e);this.onError({code:"syntax-error",arg:JSON.stringify(e)})})();return this.level-=1,null!=t?t:""}}class Ve{constructor(e){var t,i;this.onError=null!==(t=null==e?void 0:e.onError)&&void 0!==t?t:e=>{"undefined"!=typeof window&&(!e.before||e.after)};const n={...null!=e?e:{}};delete n.dictionary,delete n.onError,this.options={...Re,...je,...$e,...n},this.dictionary=function(e,t){var i,n,r,s,o,a,l,u,c,f,h,m,p,g,d;const v={lookahead:1,name:new Map,prefix:[],infix:[],postfix:[],matchfix:[],superfix:[],subfix:[],symbol:[],environment:new Map};for(const x of e)void 0===x.parse&&(x.parse=x.name),"string"==typeof x.trigger&&(x.trigger={symbol:x.trigger}),"string"==typeof x.serialize&&void 0!==(null===(i=x.trigger)||void 0===i?void 0:i.symbol)&&/#[0-9]/.test(x.serialize)&&t({code:"unexpected-argument",arg:x.name}),void 0===x.serialize&&(void 0!==(null===(n=x.trigger)||void 0===n?void 0:n.postfix)?x.serialize="#1"+ze(x.trigger.postfix):void 0!==(null===(r=x.trigger)||void 0===r?void 0:r.prefix)?x.serialize=ze(x.trigger.prefix)+"#1":void 0!==(null===(s=x.trigger)||void 0===s?void 0:s.infix)?x.serialize="#1"+ze(x.trigger.infix)+"#2":void 0!==(null===(o=x.trigger)||void 0===o?void 0:o.symbol)?x.serialize=ze(x.trigger.symbol):void 0!==(null===(a=x.trigger)||void 0===a?void 0:a.superfix)?x.serialize="#1^{"+ze(null===(l=x.trigger)||void 0===l?void 0:l.superfix)+"}":void 0!==(null===(u=x.trigger)||void 0===u?void 0:u.subfix)?x.serialize="#1_{"+ze(null===(c=x.trigger)||void 0===c?void 0:c.subfix)+"}":x.serialize=""),void 0!==(null===(f=x.trigger)||void 0===f?void 0:f.infix)&&(void 0===x.precedence&&t({code:"syntax-error",arg:"Infix operators require a precedence"}),x.associativity||(x.associativity="non")),void 0!==(null===(h=x.trigger)||void 0===h?void 0:h.symbol)&&(x.arguments=null!==(m=x.arguments)&&void 0!==m?m:"",x.optionalLatexArg=null!==(p=x.optionalLatexArg)&&void 0!==p?p:0,x.requiredLatexArg=null!==(g=x.requiredLatexArg)&&void 0!==g?g:0),void 0!==(null===(d=x.trigger)||void 0===d?void 0:d.matchfix)&&("function"===x.parse||x.closeFence||t({code:"syntax-error",arg:"Matchfix operators require a close fence or a custom parse function"})),void 0!==x.trigger&&(["infix","prefix","postfix","symbol","matchfix","superfix","subfix"].forEach((e=>{if(x.trigger[e]){const i=(t=x.trigger[e],Array.isArray(t)?t.length:1);v.lookahead=Math.max(v.lookahead,i),void 0===v[e][i]&&(v[e][i]=new Map),v[e][i].set(ze(x.trigger[e]),x)}var t})),void 0!==x.trigger.environment&&v.environment.set(x.trigger.environment,x)),void 0!==x.name?v.name.set(ze(x.name),x):"string"==typeof x.parse&&v.name.set(x.parse,x),void 0!==x.trigger||x.name||t({code:"syntax-error",arg:"Need at least a trigger or a name"});return v}(null!==(i=null==e?void 0:e.dictionary)&&void 0!==i?i:Ve.getDictionary(),this.onError)}static getDictionary(e="all"){if("all"===e){let e=[];for(const t of Object.keys(Ue))e=[...e,...Ue[t]];return e}return Ue[e]?[...Ue[e]]:[]}parse(e){var t;const i=new Ze(o(e,[]),this.options,this.dictionary,this.onError),n=i.matchExpression();return i.atEnd||null===(t=this.onError)||void 0===t||t.call(this,{code:"syntax-error"}),null!=n?n:""}serialize(e){return new We(this.options,this.dictionary,this.onError).serialize(e)}}function Ye(e,t){return new Ve(t).parse(e)}function Je(e,t){return new Ve(t).serialize(e)}class Ke{constructor(e){this.signal={severity:"error",...e}}toString(){let e="";if(this.signal.head&&(e+=this.signal.head+": "),"string"==typeof this.signal.message)e+=this.signal.message;else{e+=" ";for(const t of this.signal.message)e+=t.toString()+" "}return e}}function Xe(e,t,i){const n=oe(t);if(n.length>0)n.forEach((t=>Xe(e,t,i)));else{const n=se(t);if(n&&!i.has(n)){const t=e.getSymbolDefinition(n);t&&!1!==t.constant||i.add(n)}}}function et(e,t){const i=new Set;return Xe(e,t,i),i}function tt(e,t,i){if(null===t)return null;const n=ot(e);return""===n?i:i[n]?null===nt(t,i[n])?null:i:(i[n]=t,i)}function it(e,t,i,n){var r;const s=W(t);if(null!==s)return Math.abs(s-(null!==(r=W(e))&&void 0!==r?r:NaN))<=n.numericalTolerance?i:null;const o=K(t);if(null!==o)return K(e)===o?i:null;const a=fe(t);if(null!==a){const t=Object.keys(a),r=fe(e);if(null===r)return null;if(Object.keys(r).length!==t.length)return null;for(const e of t){const t=it(r[e],a[e],i,n);if(null===t)return null;i=t}return i}const l=se(t);if(null!==l)return l.startsWith("_")?tt(l,e,i):l===se(e)?"object"==typeof t&&"object"==typeof e&&"wikidata"in t&&"wikidata"in e&&t.wikidata!==e.wikidata?null:i:"object"==typeof t&&"object"==typeof e&&"wikidata"in t&&"wikidata"in e&&t.wikidata===e.wikidata?i:null;const u=ie(t);if(null===u)return null;if("string"==typeof u&&u.startsWith("_"))return tt(u,ie(e),i);{const t=ie(e);if(null===t)return null;if(null===nt(u,t,n))return null}const c=oe(t),f=oe(e),h=c.length;if(h!==f.length)return null;let m={...i},p=0;for(;p<h;){const e=c[p],t=se(e);if(null!==t)if(t.startsWith("__")){let e=0;if(void 0===c[p+1])e=f.length+1;else{let t=!1;for(;!t&&e<f.length;)t=null!==nt(c[p+1],f[e],n),e+=1;if(!t)return null}if(!t.startsWith("___")&&e<=1)return null;m=tt(t,["Sequence",...f.splice(0,e-1)],m)}else if(t.startsWith("_"))m=tt(t,f.shift(),m);else{const t=nt(e,f.shift(),n);if(null===t)return null;m={...m,...t}}else{const t=nt(e,f.shift(),n);if(null===t)return null;m={...m,...t}}if(null===m)return null;p+=1}return m}function nt(e,t,i){return it(t,e,{},null!=i?i:{numericalTolerance:A})}function rt(e,t,i){let n=0;for(const r of e)null!==nt(r,t,i)&&(n+=1);return n}function st(e,t){var i;const n=se(e);if(null!==n)return n.startsWith("_")&&null!==(i=t[ot(n)])&&void 0!==i?i:e;const r=fe(e);if(null!==r){const e={};for(const i of Object.keys(r))e[i]=st(r[i],t);return{dict:e}}const s=ie(e);if(null!==s){let i=[st(s,t)];for(const n of oe(e)){const e=se(n);if(null!==e&&e.startsWith("__")){const n=t[ot(e)];void 0===n||"Sequence"!==re(n)?i.push(e):i=i.concat(oe(n))}else i.push(st(n,t))}return i}return e}function ot(e){const t=e.match(/^__?_?([a-zA-Z0-9]+)/);return null===t?"":t[1]}class at{constructor(e){this._items=e?new Map(e instanceof at?e._items:e):new Map}has(e){for(const t of this._items.keys())if(nt(e,t))return!0;return!1}get(e){for(const[t,i]of this._items)if(nt(e,t))return i}set(e,t){for(const i of this._items.keys())if(nt(e,i))return void this._items.set(i,t);this._items.set(e,t)}delete(e){this._items.delete(e)}[Symbol.iterator](){return this._items.entries()}entries(){return this._items.entries()}}function lt(e){var t,i,n;let r=!0;const s=re(e);return"Not"===s?([e,r]=lt(null!==(t=ue(e,1))&&void 0!==t?t:P),r=!r):"NotEqual"===s?(r=!1,e=["Equal",null!==(i=ue(e,1))&&void 0!==i?i:P]):"NotElement"===s&&(r=!1,e=["Element",null!==(n=ue(e,1))&&void 0!==n?n:P]),[e,r]}function ut(e,t){const i=re(t=e.canonical(t));if(!i)throw new Ke({message:"expected-predicate"});let n=!0;if("And"===i)for(const i of oe(t)){const t=ut(e,i);if("ok"!==t)return t}else[t,n]=lt(t);const r=e.is(t);if(void 0!==r){if(r===n)return"tautology";if(r!==n)return"contradiction"}return e.assumptions.set(t,n),"ok"}const ct={Anything:[],Expression:"Anything",Domain:["Set","Symbol"],ParametricDomain:["Domain","Function"],MaybeBoolean:"Expression",Boolean:"MaybeBoolean",Collection:"Expression",Dictionary:"Collection",List:"Collection",Sequence:"Collection",Tuple:"Collection",Set:"Collection",FiniteSet:"Set",InfiniteSet:"Set",EmptySet:"FiniteSet",String:"Expression",Symbol:"String",Function:"Expression",Predicate:"Function",LogicalFunction:"Predicate",TranscendentalFunction:"Function",AlgebraicFunction:"Function",PeriodicFunction:"Function",TrigonometricFunction:["PeriodicFunction","TranscendentalFunction"],HyperbolicFunction:"TranscendentalFunction",MonotonicFunction:"Function",StrictMonotonicFunction:"MonotonicFunction",ContinuousFunction:"Function",DifferentiableFunction:"ContinuousFunction",InfinitelyDifferentiableFunction:"DifferentiableFunction",RationalFunction:["AlgebraicFunction","ContinuousFunction"],PolynomialFunction:["AlgebraicFunction","InfinitelyDifferentiableFunction"],QuadraticFunction:"PolynomialFunction",LinearFunction:["QuadraticFunction","MonotonicFunction"],ConstantFunction:"LinearFunction",Number:"Set",ImaginaryNumber:["ComplexNumber","InfiniteSet"],ComplexNumber:"ExtendedComplexNumber",ExtendedComplexNumber:"Number",ComplexInfinity:"ExtendedComplexNumber",NumberZero:["CompositeNumber","ImaginaryNumber","FiniteSet"],NaturalNumber:"Integer",CompositeNumber:"NaturalNumber",PrimeNumber:"NaturalNumber",Integer:["RationalNumber","ExtendedInteger"],ExtendedInteger:"ExtendedRationalNumber",RationalNumber:["AlgebraicNumber","ExtendedRationalNumber"],IrrationalNumber:"RealNumber",TranscendentalNumber:["IrrationalNumber","ImaginaryNumber"],AlgebraicNumber:"IrrationalNumber",RealNumber:["ComplexNumber","ExtendedRealNumber"],ExtendedRealNumber:"ExtendedComplexNumber",ExtendedNaturalNumber:"ExtendedInteger",ExtendedRationalNumber:"ExtendedRealNumber",SignedInfinity:"ExtendedNaturalNumber",Tensor:"Expression",Scalar:"Tensor",Vector:"Matrix",Row:"Vector",Column:"Vector",Matrix:"Tensor",ComplexTensor:"Tensor",RealTensor:"ComplexTensor",IntegerTensor:"RealTensor",LogicalTensor:"IntegerTensor",SquareMatrix:"Matrix",MonomialMatrix:"SquareMatrix",TriangularMatrix:"SquareMatrix",UpperTriangularMatrix:"TriangularMatrix",LowerTriangularMatrix:"TriangularMatrix",PermutationMatrix:["MonomialMatrix","LogicalTensor","OrthogonalMatrix"],OrthogonalMatrix:["SquareMatrix","RealTensor"],DiagonalMatrix:["UpperTriangularMatrix","LowerTriangularMatrix"],IdentityMatrix:["DiagonalMatrix","SymmetricMatrix","PermutationMatrix"],ZeroMatrix:["DiagonalMatrix","SymmetricMatrix","PermutationMatrix"],SymmetricMatrix:["HermitianMatrix","SquareMatrix","RealTensor"],HermitianMatrix:"ComplexTensor",Quaternion:["SquareMatrix","ComplexTensor"]},ft={Function:"Q11348",ComplexNumber:"Q26851286",Integer:"Q47007735",ImaginaryNumber:"Q47310259",NaturalNumber:"Q28920052"},ht={MaybeBoolean:["Union","Boolean",["Set","Maybe"]],NaturalNumber:["Union","CompositeNumber","PrimeNumber"],Scalar:["Intersection","Row","Column"],TriangularMatrix:["Union","UpperTriangularMatrix","LowerTriangularMatrix"],Vector:["Union","Row","Column"]},mt={Boolean:2,MaybeBoolean:3,EmptySet:0,IdentityMatrix:1,ZeroMatrix:1,NumberZero:1},pt={Range:{range:"ParametricDomain",evaluate:(e,t,i)=>(t=Math.round(t),i=Math.round(i),Number.isNaN(t)||Number.isNaN(i)||t>i?"EmptySet":t===-1/0&&i===1/0?"Integer":0===t&&i===1/0?"NaturalNumber":0===t&&0===i?"NumberZero":["Range",t,i])},Interval:{range:"ParametricDomain",evaluate:(e,t,i)=>Number.isNaN(t)||Number.isNaN(i)||t>i?"EmptySet":t===-1/0&&i===1/0?"RealNumber":0===t&&0===i?"NumberZero":["Interval",t,i]}},gt=["Sqrt",2],dt=["Sqrt",3],vt=["Sqrt",5],xt=["Sqrt",6],bt=new at([[["Divide","Pi",12],{Sin:["Divide",["Subtract",xt,gt],4],Cos:["Divide",["Add",xt,gt],4],Tan:["Subtract",[2,dt]],Cot:["Add",[2,dt]],Sec:["Subtract",[xt,gt]],Csc:["Add",[xt,gt]]}],[["Divide","Pi",10],{Sin:["Divide",["Subtract",vt,1],4],Cos:["Divide",["Sqrt",["Add",10,["Multiply",2,vt]]],4],Tan:["Divide",["Sqrt",["Subtract",25,["Multiply",10,vt]]],4],Cot:["Sqrt",["Add",5,["Multiply",2,vt]]],Sec:["Divide",["Sqrt",["Subtract",50,["Multiply",10,vt]]],5],Csc:["Add",1,vt]}],[["Divide","Pi",4],{Sin:["Divide",gt,2],Cos:["Divide",gt,2],Tan:1,Cot:1,Sec:gt,Csc:gt}],[["Divide","Pi",3],{Sin:["Divide",dt,2],Cos:"Half",Tan:dt,Cot:["Divide",dt,3],Sec:2,Csc:["Divide",["Multiply",2,dt],3]}],[["Divide","Pi",2],{Sin:1,Cos:0,Tan:1/0,Cot:0,Sec:1/0,Csc:1}]]),yt={Degrees:{domain:"Real",constant:!0,value:.017453292519943295},MinusDoublePi:{domain:"TranscendentalNumber",constant:!0,hold:!1,value:[z,-2,"Pi"]},MinusPi:{domain:"TranscendentalNumber",constant:!0,hold:!1,value:[U,"Pi"]},MinusHalfPi:{domain:"TranscendentalNumber",constant:!0,hold:!1,value:[L,[U,"Pi"],2]},QuarterPi:{domain:"TranscendentalNumber",constant:!0,hold:!1,value:[L,"Pi",4]},ThirdPi:{domain:"TranscendentalNumber",constant:!0,hold:!1,value:[L,"Pi",3]},HalfPi:{domain:"TranscendentalNumber",constant:!0,hold:!1,value:[L,"Pi",2]},TwoThirdPi:{domain:"TranscendentalNumber",constant:!0,hold:!1,value:[z,2,[L,"Pi",3]]},ThreeQuarterPi:{domain:"TranscendentalNumber",constant:!0,hold:!1,value:[z,3,[L,"Pi",4]]},Pi:{domain:"TranscendentalNumber",constant:!0,wikidata:"Q167",value:e=>"decimal"===e.numericFormat?f.exports.Decimal.acos(-1):"complex"===e.numericFormat?h.exports.Complex.PI:Math.PI},DoublePi:{domain:"TranscendentalNumber",constant:!0,hold:!1,value:[z,2,"Pi"]},Arccos:{domain:"TrigonometricFunction",range:["Interval",0,"Pi"],numeric:!0,value:["Subtract","HalfPi",["Arcsin","_"]],simplify:(e,t)=>{var i,n;return null!==(n=null===(i=bt.get(t))||void 0===i?void 0:i.Arccos)&&void 0!==n?n:["Subtract","HalfPi",["Arcsin",t]]},evalNumber:(e,t)=>Math.acos(t),evalDecimal:(e,t)=>f.exports.Decimal.acos(t),evalComplex:(e,t)=>h.exports.Complex.acos(t)},Arcosh:{domain:"HyperbolicFunction",range:["Interval",0,1/0],numeric:!0,value:["Ln",["Add","_",["Sqrt",["Subtract",["Square","_"],1]]]],simplify:(e,t)=>{var i,n;return null!==(n=null===(i=bt.get(t))||void 0===i?void 0:i.Arccosh)&&void 0!==n?n:["Ln",["Add",t,["Sqrt",["Subtract",["Square",t],1]]]]},evalNumber:(e,t)=>Math.acosh(t),evalDecimal:(e,t)=>f.exports.Decimal.acosh(t),evalComplex:(e,t)=>h.exports.Complex.acosh(t)},Arcsin:{domain:"TrigonometricFunction",range:["Interval","MinusHalfPi","HalfPi"],numeric:!0,simplify:(e,t)=>{var i,n;return null!==(n=null===(i=bt.get(t))||void 0===i?void 0:i.Arcsin)&&void 0!==n?n:["Multiply",2,["Arctan2",t,["Add",1,["Sqrt",["Subtract",1,["Square",t]]]]]]},value:["Multiply",2,["Arctan2","_",["Add",1,["Sqrt",["Subtract",1,["Square","_"]]]]]],evalNumber:(e,t)=>Math.asin(t),evalDecimal:(e,t)=>f.exports.Decimal.asin(t),evalComplex:(e,t)=>h.exports.Complex.asin(t)},Arsinh:{domain:"HyperbolicFunction",range:["Interval",-1/0,1/0],numeric:!0,simplify:(e,t)=>{var i,n;return null!==(n=null===(i=bt.get(t))||void 0===i?void 0:i.Arsinh)&&void 0!==n?n:["Ln",["Add",t,["Sqrt",["Add",["Square",t],1]]]]},value:["Ln",["Add","_",["Sqrt",["Add",["Square","_"],1]]]],evalNumber:(e,t)=>Math.asinh(t),evalDecimal:(e,t)=>f.exports.Decimal.asinh(t),evalComplex:(e,t)=>h.exports.Complex.asinh(t)},Arctan:{wikidata:"Q2257242",domain:"TrigonometricFunction",range:["Interval","MinusHalfPi","HalfPi"],numeric:!0,simplify:(e,t)=>{var i,n;return null!==(n=null===(i=bt.get(t))||void 0===i?void 0:i.Arctan)&&void 0!==n?n:t},evalNumber:(e,t)=>Math.atan(t),evalDecimal:(e,t)=>f.exports.Decimal.atan(t),evalComplex:(e,t)=>h.exports.Complex.atan(t)},Arctan2:{wikidata:"Q776598",range:["Interval","MinusPi","Pi"],domain:"TrigonometricFunction",numeric:!0,evalNumber:(e,t,i)=>Math.atan2(t,i),evalDecimal:(e,t,i)=>f.exports.Decimal.atan2(t,i),evalComplex:(e,t,i)=>h.exports.Complex.atan2(t,i)},Artanh:{domain:"HyperbolicFunction",range:["Interval",-1/0,1/0],numeric:!0,simplify:(e,t)=>{var i,n;return null!==(n=null===(i=bt.get(t))||void 0===i?void 0:i.Artanh)&&void 0!==n?n:["Multiply","Half",["Ln",["Divide",["Add",1,t],["Subtract",1,t]]]]},value:["Multiply","Half",["Ln",["Divide",["Add",1,"_"],["Subtract",1,"_"]]]],evalNumber:(e,t)=>Math.atanh(t),evalDecimal:(e,t)=>f.exports.Decimal.atanh(t),evalComplex:(e,t)=>h.exports.Complex.atanh(t)},Cosh:{domain:"HyperbolicFunction",range:["Interval",1,1/0],numeric:!0,simplify:(e,t)=>{var i,n;return null!==(n=null===(i=bt.get(t))||void 0===i?void 0:i.Cosh)&&void 0!==n?n:t},value:["Multiply","Half",["Add",["Exp","_"],["Exp",["Negate","_"]]]],evalNumber:(e,t)=>Math.cosh(t),evalDecimal:(e,t)=>f.exports.Decimal.cosh(t),evalComplex:(e,t)=>h.exports.Complex.cosh(t)},Cos:{domain:"TrigonometricFunction",range:["Interval",-1,1],numeric:!0,simplify:(e,t)=>{var i,n;return null!==(n=null===(i=bt.get(t))||void 0===i?void 0:i.Cos)&&void 0!==n?n:["Sin",["Add",t,"HalfPi"]]},value:["Sin",["Add","_","HalfPi"]],evalNumber:(e,t)=>Math.cos(t),evalDecimal:(e,t)=>f.exports.Decimal.cos(t),evalComplex:(e,t)=>h.exports.Complex.cos(t)},Cot:{domain:"TrigonometricFunction",range:"ComplexNumber",numeric:!0,simplify:(e,t)=>{var i,n;return null!==(n=null===(i=bt.get(t))||void 0===i?void 0:i.Cot)&&void 0!==n?n:["Divide",["Cos",t],["Sin",t]]},value:["Divide",["Cos","_"],["Sin","_"]],evalNumber:(e,t)=>1/Math.tan(t),evalDecimal:(e,t)=>p.div(f.exports.Decimal.tan(t)),evalComplex:(e,t)=>h.exports.Complex.ONE.div(h.exports.Complex.tan(t))},Coth:{domain:"HyperbolicFunction",range:"ComplexNumber",numeric:!0,simplify:(e,t)=>{var i,n;return null!==(n=null===(i=bt.get(t))||void 0===i?void 0:i.Coth)&&void 0!==n?n:["Divide",1,["Tanh",t]]},value:["Divide",1,["Tanh","_"]],evalNumber:(e,t)=>1/Math.tanh(t),evalDecimal:(e,t)=>p.div(f.exports.Decimal.tanh(t)),evalComplex:(e,t)=>h.exports.Complex.ONE.div(h.exports.Complex.tanh(t))},Csc:{domain:"TrigonometricFunction",range:["Interval",-1,1],numeric:!0,simplify:(e,t)=>{var i,n;return null!==(n=null===(i=bt.get(t))||void 0===i?void 0:i.Csc)&&void 0!==n?n:["Divide",1,["Sin",t]]},value:["Divide",1,["Sin","_"]],evalNumber:(e,t)=>1/Math.tanh(t),evalDecimal:(e,t)=>p.div(f.exports.Decimal.tanh(t)),evalComplex:(e,t)=>h.exports.Complex.ONE.div(h.exports.Complex.tanh(t))},Csch:{domain:"HyperbolicFunction",range:["Interval",-1,1],numeric:!0,simplify:(e,t)=>{var i,n;return null!==(n=null===(i=bt.get(t))||void 0===i?void 0:i.Csch)&&void 0!==n?n:["Divide",1,["Sinh",t]]},value:["Divide",1,["Sinh","_"]],evalNumber:(e,t)=>1/Math.sinh(t),evalDecimal:(e,t)=>p.div(f.exports.Decimal.sinh(t)),evalComplex:(e,t)=>h.exports.Complex.ONE.div(h.exports.Complex.sinh(t))},FromPolarCoordinates:{domain:"Function",range:["TupleOf","RealNumber","RealNumber"]},Haversine:{wikidata:"Q2528380",domain:"TrigonometricFunction",range:["Interval",0,1],value:["Divide",["Subtract",1,["Cos","_"]],2],numeric:!0},Hypot:{domain:"Function",range:["Interval",0,1/0],value:["Sqrt",["Square","_"],["Square","_2"]],evalNumber:(e,t,i)=>Math.sqrt(t*t*+i*i),evalDecimal:(e,t,i)=>f.exports.Decimal.sqrt(t.mul(t).add(i.mul(i))),evalComplex:(e,t,i)=>h.exports.Complex.sqrt(t.mul(t).add(i.mul(i)))},InverseFunction:{domain:"Function",range:"Function",simplify:(e,t)=>{var i,n;const r=null!==(i=ue(t,1))&&void 0!==i?i:P;return"string"!=typeof r?t:null!==(n={Sin:"Arcsin",Cos:"Arccos",Tan:"Arctan",Sec:"Arcsec",Csc:" Arccsc",Sinh:"Arsinh",Cosh:"Arcosh",Tanh:"Artanh",Sech:"Arcsech",Csch:"Arcsch",Arcosh:"Cosh",Arcos:"Cos",Arccsc:"Csc",Arcsch:"Csch",Arcsec:"Sec",Arcsin:"Sin",Arsinh:"Sinh",Arctan:"Tan",Artanh:"Tanh"}[r])&&void 0!==n?n:t}},InverseHaversine:{domain:"TrigonometricFunction",range:["Interval",["MinusPi"],"Pi"],numeric:!0,value:["Multiply",2,["Arcsin",["Sqrt","_"]]]},Sec:{domain:"TrigonometricFunction",range:["Interval",-1,1],numeric:!0,simplify:(e,t)=>{var i,n;return null!==(n=null===(i=bt.get(t))||void 0===i?void 0:i.Sec)&&void 0!==n?n:["Divide",1,["Cos",t]]},value:["Divide",1,["Cos","_"]],evalNumber:(e,t)=>1/Math.cos(t),evalDecimal:(e,t)=>p.div(f.exports.Decimal.cos(t)),evalComplex:(e,t)=>h.exports.Complex.ONE.div(h.exports.Complex.cos(t))},Sech:{domain:"HyperbolicFunction",range:["Interval",-1,1],numeric:!0,simplify:(e,t)=>{var i,n;return null!==(n=null===(i=bt.get(t))||void 0===i?void 0:i.Sech)&&void 0!==n?n:["Divide",1,["Cosh",t]]},value:["Divide",1,["Cosh","_"]],evalNumber:(e,t)=>1/Math.cosh(t),evalDecimal:(e,t)=>p.div(f.exports.Decimal.cosh(t)),evalComplex:(e,t)=>h.exports.Complex.ONE.div(h.exports.Complex.cosh(t))},Sinh:{domain:"HyperbolicFunction",range:["Interval",-1/0,1/0],numeric:!0,simplify:(e,t)=>{var i,n;return null!==(n=null===(i=bt.get(t))||void 0===i?void 0:i.Sinh)&&void 0!==n?n:["Multiply","Half",["Subtract",["Exp",t],["Exp",["Negate",t]]]]},value:["Multiply","Half",["Subtract",["Exp","_"],["Exp",["Negate","_"]]]]},Sin:{domain:"TrigonometricFunction",range:["Interval",-1,1],numeric:!0,simplify:(e,t)=>{var i,n;return null!==(n=null===(i=bt.get(t))||void 0===i?void 0:i.Sin)&&void 0!==n?n:t},value:["Divide",["Subtract",["Exp",["Multiply","ImaginaryUnit","_"]],["Exp",["Multiply","ImaginaryUnit",["Negate","_"]]]],["Multiply",2,"ImaginaryUnit"]],evalNumber:(e,t)=>Math.sin(t),evalDecimal:(e,t)=>t.sin(),evalComplex:(e,t)=>t.sin()},Tanh:{domain:"HyperbolicFunction",range:["Interval",-1/0,1/0],numeric:!0,simplify:(e,t)=>{var i,n;return null!==(n=null===(i=bt.get(t))||void 0===i?void 0:i.Tanh)&&void 0!==n?n:["Divide",["Sinh",t],["Cosh",t]]},value:["Divide",["Sinh","_"],["Cosh","_"]],evalNumber:(e,t)=>Math.tanh(t),evalDecimal:(e,t)=>t.tanh(),evalComplex:(e,t)=>t.tanh()},Tan:{domain:"TrigonometricFunction",range:"RealNumber",numeric:!0,simplify:(e,t)=>{var i,n;return null!==(n=null===(i=bt.get(t))||void 0===i?void 0:i.Tan)&&void 0!==n?n:["Divide",["Sin",t],["Cos",t]]},value:["Divide",["Sin","_"],["Cos","_"]],evalNumber:(e,t)=>Math.tan(t),evalDecimal:(e,t)=>t.tan(),evalComplex:(e,t)=>t.tan()},ToPolarCoordinates:{domain:"Function",range:["TupleOf","RealNumber","RealNumber"]}};function Nt(e){return null!==e&&"object"==typeof e&&"supersets"in e}function wt(e){return null!==e&&"object"==typeof e&&"constant"in e}function St(e){return null!==e&&"object"==typeof e&&"range"in e}function Mt(e){return null!==e&&"object"==typeof e&&"countable"in e}function Et(e,t){var i;const n=At(t);if(null!==n)return n;const r=se(t);if(null!==r){const n=e.ask(["Element",t,"_domain"]);if(n.length>0)return 1===n.length?n[0].domain:"Anything";const s=e.getDefinition(r);return s&&"function"==typeof s.domain?null!==(i=s.domain(t))&&void 0!==i?i:"Anything":s&&s.domain?s.domain:s&&"value"in s&&s.value?"function"==typeof s.value?Et(e,s.value(e)):Et(e,s.value):"Anything"}const s=ie(t);if("string"==typeof s){const i=e.getFunctionDefinition(s);if(i){if("function"==typeof i.range)return i.range(e,...oe(t));if(void 0!==i.range)return i.range;if(void 0!==i.value)return Et(e,i.value)}}return Q(t)?"String":G(t)?"Dictionary":null}function At(e){var t,i;if(void 0===e)return null;const n=W(e);if(null!==n&&!isNaN(n))return 0===n?"NumberZero":isFinite(n)?Number.isInteger(n)?D.has(n)?"PrimeNumber":n>=1&&n<7919?"CompositeNumber":n>0?"NaturalNumber":"Integer":n>0?["Interval",["Open",0],1/0]:"RealNumber":"SignedInfinity";if(e instanceof f.exports.Decimal)return e.isNaN()?"Number":e.isZero()?"NumberZero":e.isFinite()?e.isInteger()?e.abs().lessThan(Number.MAX_SAFE_INTEGER)?At(e.toNumber()):e.isPositive()?"NaturalNumber":"Integer":e.isPositive()?["Interval",["Open",0],1/0]:"RealNumber":"SignedInfinity";if(e instanceof h.exports.Complex){const t=e;return 0===t.im?At(t.re):0===t.re&&0!==t.im?"ImaginaryNumber":"ComplexNumber"}if("Complex"===re(e)){const n=null!==(t=W(ue(e,1)))&&void 0!==t?t:NaN,r=null!==(i=W(ue(e,2)))&&void 0!==i?i:NaN;return 0===r?At(n):0===n&&0!==r?"ImaginaryNumber":"ComplexNumber"}let[r,s]=X(e);if(null!==r&&null!==s){const e=C(r,s);if(r/=e,s/=e,!Number.isNaN(r)&&!Number.isNaN(s))return 0===r?"NumberZero":1!==s&&-1!==s?"RationalNumber":At(r)}const o=se(e);if(null!==o){if("NaN"===o)return"Number";if("+Infinity"===o||"-Infinity"===o)return"SignedInfinity";if("ComplexInfinity"===o)return"ComplexInfinity";if("ImaginaryUnit"===o)return"ImaginaryNumber";if(["Quarter","Third","Half","TwoThird","ThreeQuarter"].includes(o))return"RationalNumber";if(["MinusDoublePi","MinusPi","QuarterPi","ThirdPi","HalfPi","TwoThirdPi","ThreeQuarterPi","Pi","DoublePi","ExponentialE"].includes(o))return"TranscendentalNumber";if(["MachineEpsilon","CatalanConstant","GoldenRatio","EulerGamma"].includes(o))return"RealNumber"}if(re(e)===R&&re(ue(e,2))===L&&1===ue(ue(e,2),1)&&2===ue(ue(e,2),2)){const t=W(ue(e,1));if(null!==t&&D.has(t))return"IrrationalNumber"}return"RealNumber"}function Dt(e="all"){if("all"===e)return Dt(["domains","core","collections","algebra","arithmetic","calculus","complex","combinatorics","dimensions","inequalities","intervals","linear-algebra","logic","numeric","other","physics","polynomials","relations","statistics","transcendentals","trigonometry","rounding","units"]);const t=[];for(const i of e)Ct[i]&&t.push(Ct[i]);return t}const Ct={arithmetic:Ae,algebra:{},calculus:{},combinatorics:{},complex:{},core:{Apply:{domain:"Function",range:"Anything"},About:{domain:"Function",range:"Dictionary"},BaseForm:{domain:"Function",range:"Integer"},Block:{domain:"Function",range:"Anything"},Domain:{domain:"ParametricDomain",range:"Domain"},Evaluate:{domain:"Function",range:"Anything"},Parentheses:{domain:"Function",threadable:!0,pure:!1,range:"Anything"},Head:{domain:"Function",range:"Anything"},Lambda:{domain:"Function",wikidata:"Q567612",hold:"all",range:"Anything"},Latex:{domain:"Function",range:"String"},String:{domain:"Function",threadable:!0,range:"String"},Symbol:{domain:"Function",threadable:!0,range:"Symbol"},Tail:{domain:"Function",range:"List"}},collections:{EmptySet:{domain:"EmptySet",constant:!0,wikidata:"Q226183"},CartesianProduct:{domain:"Function",wikidata:"Q173740",range:"Set",evaluate:function(e,t,i){return"EmptySet"}},Intersection:{domain:"Function",wikidata:"Q185837",threadable:!0,associative:!0,commutative:!0,idempotent:!0,involution:!0,range:"Set",evaluate:function(e,...t){return"EmptySet"}},Complement:{domain:"Function",wikidata:"Q242767",range:"Set"},Union:{domain:"Function",wikidata:"Q185359",threadable:!0,associative:!0,commutative:!0,idempotent:!0,involution:!0,range:"Set",evaluate:function(e,...t){return"EmptySet"}},SymmetricDifference:{domain:"Function",wikidata:"Q1147242",range:"Set"},Subset:{domain:"Predicate",range:"MaybeBoolean",evaluate:function(e,t,i){return"False"}},SubsetEqual:{domain:"Predicate",range:"MaybeBoolean",evaluate:function(e,t,i){return"False"}},SetMinus:{domain:"Function",wikidata:"Q18192442",range:"MaybeBoolean",evaluate:function(e,t,i){return"EmptySet"}}},domains:function(){var e;const t={Nothing:{countable:!0,supersets:[],domain:"Domain"}};for(const i of Object.keys(ct)){const n=Array.isArray(ct[i])?ct[i]:[ct[i]];t[i]=null!==(e=pt[i])&&void 0!==e?e:{},t[i]={domain:pt[i]?"ParametricDomain":"Domain",wikidata:ft[i],supersets:n,value:ht,countable:void 0!==mt[i],size:()=>mt[i],...t[i]};for(const e of n)if("Anything"!==e&&!ct[e])throw new Error(`Unknown parent of domain "${i}": "${e}"`)}const i=new Set;for(const e of Object.keys(t))i.add(e);for(const e of Object.keys(t))for(const n of t[e].supersets)i.delete(n);i.delete("Nothing"),t.Nothing.supersets=[...i.values()];for(const e of Object.keys(t)){let i=!1,n=0,r=[e];for(;n<512&&!i;){const e=r.pop();i="Anything"===e,i||(r=[...e,...t[e].supersets]),n++}if(!i)throw new Error(`The "${e}" domain cannot reach "Anything"`)}return t}(),dimensions:{},logic:{True:{domain:"Boolean",constant:!0},False:{domain:"Boolean",constant:!0},Maybe:{domain:"MaybeBoolean",constant:!0},And:{domain:"LogicalFunction",threadable:!0,associative:!0,commutative:!0,idempotent:!0,range:"MaybeBoolean"},Or:{domain:"LogicalFunction",threadable:!0,associative:!0,commutative:!0,idempotent:!0,range:"MaybeBoolean"},Not:{domain:"LogicalFunction",involution:!0,range:"MaybeBoolean"},Equivalent:{domain:"LogicalFunction",range:"MaybeBoolean"},Implies:{domain:"LogicalFunction",range:"MaybeBoolean"},Exists:{domain:"LogicalFunction",range:"MaybeBoolean"},Equal:{domain:"LogicalFunction",range:"MaybeBoolean"},NotEqual:{domain:"Function",wikidata:"Q28113351",commutative:!0,range:"MaybeBoolean"}},inequalities:{},intervals:{},"linear-algebra":{},numeric:{},other:{},polynomials:{},physics:{"Mu-0":{constant:!0,wikidata:"Q1515261",domain:"RealNumber",value:125663706212e-17,unit:[z,"H",[R,"m",-1]]}},relations:{},rounding:{},statistics:{},transcendentals:{},trigonometry:yt,units:{}};function kt(e,t){const i=new Map;for(const n of Object.keys(e)){const[r,s]=_t(e[n],t);s&&t.signal({severity:r?"warning":"error",message:["invalid-dictionary-entry",s],head:n}),r&&i.set(n,r)}return t.context={parentScope:t.context,dictionary:i,assumptions:new at},function(e,t){const i=new Set;for(const[n,r]of t){if(/[A-Za-z][A-Za-z0-9-]*/.test(n)||1===n.length||e.signal({severity:"error",message:"invalid-name",head:n}),r.wikidata&&(i.has(r.wikidata)&&e.signal({severity:"warning",message:["duplicate-wikidata",r.wikidata],head:n}),i.add(r.wikidata)),wt(r)&&("function"==typeof r.domain||e.isSubsetOf(r.domain,"Anything")||e.signal({severity:"warning",message:["unknown-domain",r.domain],head:n}),!1!==r.hold||r.value||e.signal({severity:"warning",message:["invalid-dictionary-entry","symbol has hold = false, but no value"],head:n})),St(r)){const t=r.range;"function"==typeof t||e.isSubsetOf(t,"Anything")||e.signal({severity:"warning",message:["unknown-domain",t],head:n})}if(Nt(r)){0===r.supersets.length&&"Anything"!==n&&e.signal({severity:"warning",message:"expected-supersets",head:n});for(const i of r.supersets)e.isSubsetOf(i,"Anything")||e.signal({severity:"warning",message:["expected-supersets",i],head:n}),e.isSubsetOf(i,n)&&(e.signal({severity:"warning",message:["cyclic-definition",Ft(e,n)],head:n}),t.delete(n))}}}(t,i),t.context=t.context.parentScope,i}function _t(e,t){if("number"==typeof e)return[{domain:At(e),constant:!1,value:e}];let i=e.domain;if(wt(e)){let t;return i||(t="no domain provided.",i="Anything"),!1!==(e={domain:i,constant:!1,...e}).hold||e.value||(e.hold=!0),[e,t]}if(Mt(e)||"function"!=typeof i&&t.isSubsetOf(i,"Collection"))return[{domain:"Collection",iterable:void 0!==e.iterator,indexable:void 0!==e.at,countable:void 0!==e.size,...e},void 0];if(St(e)||"function"!=typeof i&&t.isSubsetOf(i,"Function")){let t,n={...e};return n={wikidata:"",scope:null,threadable:!1,associative:!1,commutative:!1,additive:!1,multiplicative:!1,outtative:!1,idempotent:!1,involution:!1,numeric:!1,pure:!0,hold:"none",sequenceHold:!1,signatures:[],...e},n.range?"LogicalFunction"===i||"Predicate"===i?"Boolean"!==n.range&&"MaybeBoolean"!==n.range&&(t='A "LogicalFunction" or a "Predicate" should have a range of "Boolean" or "MaybeBoolean"'):"Boolean"!==n.range&&"MaybeBoolean"!==n.range||(t='looks like a "LogicalFunction" or a "Predicate"?'):t="no function range provided.",[n,t]}if(Nt(e)||"function"!=typeof i&&t.isSubsetOf(i,"Function"))return[e];if(e){const n=e;if(i&&"function"!=typeof i&&t.isSubsetOf(i,"Number")){if(void 0===n.value)return[null,'expected "value" property in definition'];const r=At("function"==typeof n.value?n.value(t):n.value);return[{domain:r,constant:!1,...e},r!==i?'inferred domain "${inferredDomain}"':""]}if(i&&"function"!=typeof i&&t.isSubsetOf(i,"Function"))return[{range:"Anything",...e},'a "Function" should have a "range" property in its definition'];if(i&&"function"!=typeof i&&t.isSubsetOf(i,"Set"))return[e,'a "Set" should have a "supersets" property in its definition']}return[e,"could not be validate"]}function Ft(e,t,i){var n;const r=[`${t}`],s="string"==typeof t?t:re(t);if(i){if(i.includes(s))return`${s} ↩︎ `;i.push(s)}else i=[s];const o=e.getSetDefinition(s);if(!o)return`${s}?!`;if(!o.supersets.length||0===o.supersets.length)return"";for(const t of null==o?void 0:o.supersets)"string"==typeof t&&r.push(Ft(e,t,[...i]));return r.length<=1?null!==(n=r[0])&&void 0!==n?n:"":"["+r.join(" ➔ ")+"]"}const qt={"simplify-arithmetic":[["x - x",0],[["Subtract","_x",0],"x"],[["Subtract",0,"_x"],"-x"],[["Add","_x",["Negate","_x"]],0],["x \\times x ","x^2"],[["Divide","_x",1],{sym:"_x"}],[["Divide","_x","_x"],1,(e,t)=>{var i;return null!==(i=ye(e,t.x))&&void 0!==i&&i}],[["Divide","_x",0],1/0,(e,t)=>{var i;return null!==(i=we(e,t.x))&&void 0!==i&&i}],[["Divide","_x",0],-1/0,(e,t)=>{var i;return null!==(i=Se(e,t.x))&&void 0!==i&&i}],[["Divide",0,0],NaN],[["Power","_x","Half"],["\\sqrt{x}"]],[["Power","_x",["Divide",1,2]],["\\sqrt{x}"]],[["Power","_x",2],["Square","_x"]],[["Divide",["Complex","_re","_im"],"_x"],["Add",["Divide",["Complex",0,"_im"],"_x"],["Divide","_re","_x"]],(e,t)=>{var i,n,r;return null!==(i=e.isNotZero(t.re))&&void 0!==i&&i&&null!==(n=e.isInteger(t.re))&&void 0!==n&&n&&null!==(r=e.isInteger(t.im))&&void 0!==r&&r}],[["Abs","_x"],{sym:"_x"},(e,t)=>{var i,n;return null!==(i=be(e,t.x))&&void 0!==i&&i||null!==(n=we(e,t.x))&&void 0!==n&&n}],[["Abs","_x"],["Negate","_x"],(e,t)=>{var i;return null!==(i=Se(e,t.x))&&void 0!==i&&i}]]};function It(e,t,i){var n,r,s,o,a;if(null===t)return null;if(1===(i=null!=i?i:["simplify-all"]).length&&"simplify-all"===i[0]&&(i=["simplify-arithmetic"]),t=e.replace(e.getRules(i),t),t=null!==(n=function(e,t){var i;const n=e.getSymbolDefinition(null!==(i=se(t))&&void 0!==i?i:"");if(n&&!1===n.hold&&n.value)return"function"==typeof n.value?It(e,n.value(e)):It(e,n.value);const[r,s]=function([e,t]){if(null===e||null===t)return[null,null];const i=C(e,t);return t<0?[-e/i,-t/i]:[e/i,t/i]}(X(t));if(null!==r&&null!==s)return 1===s?r:0===r&&isFinite(s)?0:Object.is(s,-0)&&isFinite(r)?-1/0:0===s&&isFinite(r)?1/0:["Divide",r,s];const o=V(t);if(null!==o)return 0===o.im?o.re:["Complex",o.re,o.im];if("Complex"===re(t)){const e=ue(t,1),i=ue(t,2),n=W(i);if(0===n)return e;const r=W(e);return 0===r?["Multiply",i,"ImaginaryUnit"]:["Add",null!=r?r:e,["Multiply",null!=n?n:i,"ImaginaryUnit"]]}return t}(e,t))&&void 0!==n?n:t,!0===e.is(t))return"True";if(ne(t))return t;if(null!==fe(t))return ae(t,(t=>{var n;return null!==(n=e.simplify(t,{simplifications:i}))&&void 0!==n?n:t}));const l=It(e,null!==(r=ie(t))&&void 0!==r?r:P,i);if("string"==typeof l){const n=e.getFunctionDefinition(l);if(n){const r=[],u=oe(t);for(let t=0;t<u.length;t++){const l=re(u[t]);"Evaluate"===l?r.push(null!==(s=e.simplify(u[t],{simplifications:i}))&&void 0!==s?s:u[t]):"Hold"===l?r.push(null!==(o=ue(u[t],1))&&void 0!==o?o:P):0===t&&"first"===n.hold||t>0&&"rest"===n.hold||"all"===n.hold?r.push(u[t]):r.push(null!==(a=e.simplify(u[t],{simplifications:i}))&&void 0!==a?a:u[t])}return"function"==typeof n.simplify?n.simplify(e,...r):[l,...r]}}return null!==l?[l,...oe(t)]:t}function Pt(e,t){var i,n;const r=Lt(e),s=Lt(t);if(r<s)return-1;if(r>s)return 1;let o=Ut(e);isNaN(o)&&(o=Number(1/0));let a=Ut(t);if(isNaN(a)&&(a=Number(1/0)),o<a)return-1;if(o>a)return 1;const l=zt(e),u=zt(t);if(l===u&&l>0)for(let r=1;r<=l;r++){const s=Pt(null!==(i=ue(e,r))&&void 0!==i?i:P,null!==(n=ue(t,r))&&void 0!==n?n:P);if(0!==s)return s}return u-l}function Tt(e,t){var i,n;if(0===e)return-1/0;const r=re(e);if(r===R){const t=null!==(i=W(ue(e,2)))&&void 0!==i?i:NaN;return isFinite(t)?t:0}if(r===z){let i=0;return oe(e).forEach((e=>{i+=Tt(e,t)})),i}return t.includes(null!==(n=se(e))&&void 0!==n?n:P)?1:0}function Ot(e,t){var i,n;const r=re(e);if(r===R){if(se(null!==(i=ue(e,1))&&void 0!==i?i:P)===t){const t=null!==(n=W(ue(e,2)))&&void 0!==n?n:NaN;if(isFinite(t))return t}return 0}if(r===z){let i=0;for(const n of oe(e))i+=Ot(n,t);return i}return se(e)===t?1:0}function Lt(e){return"string"==typeof e?e:Z(e)?e.sym:ie(e)?oe(e).map(Lt).join(" "):""}function zt(e){if(ie(e)){const t=oe(e);return t.map(zt).reduce(((e,t)=>e+t),t.length)}return 0}function Ut(e){var t;return ie(e)?NaN:"number"==typeof e?e:B(e)?null!==(t=W(e))&&void 0!==t?t:NaN:0}function Rt(e,t,i){var n,r;let s=oe(i);if(0===s.length)return i;s=s.map((i=>Rt(e,t,i)));const o=re(i);if(o===O)s.sort(((e,i)=>function(e,t,i){const n=Tt(e,i),r=Tt(t,i);if(n<r)return 1;if(n>r)return-1;for(const n of i){const i=Ot(e,n),r=Ot(t,n);if(i!==r)return r-i}const s=Lt(e),o=Lt(t);return s>o?-1:s<o?1:Pt(e,t)}(e,i,t)));else{const t=e.getFunctionDefinition(o);null!==(n=null==t?void 0:t.commutative)&&void 0!==n&&n&&s.sort(Pt)}return[null!==(r=ie(i))&&void 0!==r?r:P,...s]}function $t(e){if(ne(e=Ce(e)))return[L,1,e];const t=ie(e);return t===R&&2===ce(e)?[R,ue(e,1),De(ue(e,2))]:t===L&&2===ce(e)?[L,ue(e,2),ue(e,1)]:[L,1,e]}function jt(e,t){if(ne(e))return e;if(re(e)!==t)return ae(e,(e=>jt(e,t)));const i=oe(e);let n=[t];for(let e=0;e<i.length;e++)re(i[e])===t?n=n.concat(oe(jt(i[e],t))):n.push(jt(i[e],t));return n}function Bt(e,t){if(ne(e))return e;const i=re(e),n=t.getFunctionDefinition(i);if(null==n?void 0:n.involution){const t=oe(e);if(1===t.length&&re(t[0])===i)return jt(t[0],i)}return ae(e,(e=>Bt(e,t)))}function Zt(e,t){if(ne(e))return e;const i=re(e),n=t.getFunctionDefinition(i);return(null==n?void 0:n.idempotent)?jt(e,i):ae(e,(e=>Zt(e,t)))}function Qt(e,t){if(ne(e))return e;const i=re(e),n=t.getFunctionDefinition(i);return(null==n?void 0:n.associative)?jt(e,i):ae(e,(e=>Qt(e,t)))}function Ht(e,t){if(ne(e))return e;if(ie(e)!==O)return ae(e,(e=>Ht(e)));let i=oe(e=jt(Ce(e),O));i=i.map((e=>Ht(e))).filter((e=>0!==W(e)));const n=i.length;return 0===n?0:1===n?i[0]:[O,...i]}function Gt(e,t){if(ne(e))return e;if(ie(e)!==L)return ae(e,(e=>Gt(e)));if(2!==ce(e))return e;const i=Gt(ue(e,1)),n=Gt(ue(e,2));return 1===W(n)?i:1===W(i)?$t(n):-1===W(i)?[U,$t(n)]:[L,i,n]}function Wt(e,t){return ne(e)?e:re(e)===R&&"ExponentialE"===se(ue(e,1))?["Exp",Wt(ue(e,2))]:ae(e,(e=>Wt(e)))}function Vt(e,t){var i;if(ne(e))return e;const n=re(e);if(n!==I&&"Sequence"!==n&&"Sequence2"!==n)return ae(e,(e=>Vt(e,t)));const r=oe(e);let s=[ie(e)];if(n===I){for(let e of r)if(e=Vt(e,t),"Identity"===re(e)){const t=ue(e,1);null!==t&&s.push(t)}else s.push(e);return s}const o=t.getFunctionDefinition(n),a=null!==(i=null==o?void 0:o.sequenceHold)&&void 0!==i&&i;for(let e of r){e=Vt(e,t);const i=re(e);if("Identity"===i){const t=ue(e,1);null!==t&&s.push(t)}else if(i!==n||a)s.push(e);else for(let i of oe(e))i=Vt(i,t),re(i)===n?s=s.concat(oe(i)):s.push(i)}return s}function Yt(e){var t,i;const n=re(e);if(n===j)return 2;if(n===$)return null!==(t=W(ue(e,2)))&&void 0!==t?t:2;if(n!==R)return 1;const r=ue(e,2);if(null===r)return 1;if(re(r)===R&&-1===W(ue(r,2))){const e=null!==(i=W(ue(r,1)))&&void 0!==i?i:NaN;if(isFinite(e))return e}return 1}function Jt(e,t){var i;if(ne(e))return e;if(ie(e)!==z)return ae(e,(e=>Jt(e)));e=jt(Ce(e),z);const[n,r]=function(e){var t;const i=oe(e),n=[],r=[];for(const e of i)2===Yt(e)?n.push(null!==(t=ue(e,1))&&void 0!==t?t:P):r.push(e);return[n,r]}(e);let s;s=0===n.length?r:1===n.length?[...r,[j,n[0]]]:[...r,[j,[z,...n]]];let o=!1,a=!1;if(s=s.map((e=>{var t,i;if(re(e)===U)return a=!0,o=!o,null!==(t=ue(e,1))&&void 0!==t?t:P;const n=null!==(i=W(e))&&void 0!==i?i:NaN;return n<0?(a=!0,o=!o,-n):e})),o){const e=null!==(i=W(s[0]))&&void 0!==i?i:NaN;s=isFinite(e)?oe(jt([z,-e,...s.slice(1)],z)):oe(jt([z,-1,...s],z))}else s=oe(jt([z,...s],z));return s=s.filter((e=>1!==W(e))),0===s.length?1:1===s.length?s[0]:[z,...s]}function Kt(e,t){return ne(e)?e:re(e=ae(e,(e=>Kt(e,t))))===R?ke(t,e):e}function Xt(e,t){var i;return ne(e)?e:ie(e)!==U?ae(e,(e=>Xt(e))):De(null!==(i=ue(Ce(e),1))&&void 0!==i?i:P)}function ei(e,t){return e}function ti(e,t){return _e(e)}function ii(e,t){if(!ne(e))return ae(e,(e=>ti(e)));const[i,n]=X(e);return null===i||null===n?e:1===n?i:-1===n?-i:n<0?["Divide",De(i),De(n)]:["Divide",i,n]}function ni(e,t){if("number"==typeof e){if(isNaN(e))return{num:"NaN"};if(!isFinite(e)&&e>0)return{num:"+Infinity"};if(!isFinite(e)&&e<0)return{num:"-Infinity"}}else{if(e instanceof f.exports.Decimal)return{num:e.toString()+"d"};if(B(e))return/([+-]Infinity|NaN)/.test(e.num)||/[+-]?\d*\.?\d*([eE][+-]?\d+)?[dn]?/.test(e.num)?e:{num:"NaN"}}if("ImaginaryUnit"===e)return e;const i=V(e);if(null!==i){if(0===t.chop(i.im)&&0===t.chop(i.re))return 0;if(0===t.chop(i.im))return i.re;let e=null;return e=0===t.chop(i.im+1)?["Negate","ImaginaryUnit"]:0===t.chop(i.im-1)?"ImaginaryUnit":["Multiply",i.im,"ImaginaryUnit"],0===t.chop(i.re)?e:["Add",i.re,e]}return ne(e)?e:ae(e,(e=>ni(e,t)))}function ri(e,t){if(ne(e))return e;if("Subtract"!==ie(e))return ae(e,(e=>ri(e)));if(2!==ce(e))return e;const i=ri(ue(e,1)),n=W(i),r=ri(ue(e,2)),s=W(r);return 0===n?0===s?0:De(r):[O,i,De(r)]}function si(e,t){if(ne(e))return e;const i=ie(e);if(ce(e)<2&&i!==$&&i!==R)return ae(e,(e=>si(e)));const n=si(ue(e,2)),r=si(ue(e,1));if(i===$)return 2===W(n)?[j,r]:[$,r,n];if(i===R){const[e,t]=X(n);if(-1===e)return 2===t?[j,r]:[$,r,t];if(1===t)return[R,r,e];if(null!==e&&null!==t)return[R,r,[L,e,t]]}return e}function oi(e){if("string"==typeof e){const t=Number(e);if("+"===e[0]&&(e=e.slice(1)),t.toString()===e)return isNaN(t)||!isFinite(t)?t.toString():t}return e}function ai(e,t){if(null===e)return null;if(Array.isArray(e))return e.map(((e,t)=>{var i;return 0===t?e:null!==(i=ai(e))&&void 0!==i?i:T}));if("object"==typeof e)if(1===Object.keys(e).length){if(B(e)){const t=oi(e.num);return"number"==typeof t?t:{num:t}}if(H(e))return e.fn.map((e=>{var t;return null!==(t=ai(e))&&void 0!==t?t:T}));if(Z(e))return e.sym}else H(e)&&(e.fn=e.fn.map((e=>{var t;return null!==(t=ai(e))&&void 0!==t?t:T})));return e}function li(e,t){if(null===e)return null;if("number"==typeof e||"string"==typeof e)return e;if(Array.isArray(e))return e.map((e=>{var t;return null!==(t=li(e))&&void 0!==t?t:T}));if("object"==typeof e){if("num"in e){const t=oi(e.num);return"number"==typeof t?t:{num:t}}if("fn"in e)return e.fn.map((e=>{var t;return null!==(t=li(e))&&void 0!==t?t:T}));if("dict"in e)return{dict:Object.fromEntries(Object.entries(e.dict).map((e=>{var t;return[e[0],null!==(t=li(e[1]))&&void 0!==t?t:T]})))}}return null}function ui(e,t){return"number"==typeof e?{num:e.toString()}:"string"==typeof e?{sym:e}:Array.isArray(e)&&e.length>0?{fn:e.map((e=>ui(e)))}:"object"==typeof e&&"fn"in e?{...e,fn:e.fn.map((e=>ui(e)))}:e}function ci(e,t){const i=t.getVars(e);return Rt(t,Array.from(i).sort(),e)}function fi(e,t){return t.format(e,["canonical-boolean","canonical-number","canonical-exp","canonical-root","canonical-subtract","canonical-divide","canonical-power","canonical-multiply","canonical-negate","canonical-add","flatten","canonical-list","canonical-domain","canonical-rational","canonical-constants","sorted","json"])}function hi(e,t){return Qt(Zt(Bt(e,t),t),t)}function mi(e,t){return function(e,t){return t}(0,e)}function pi(e,t){var i,n;const r=null!==(n=null!==(i=V(t))&&void 0!==i?i:J(t))&&void 0!==n?n:W(t);if(null!==r)return r;const s=se(t);if(null!==s){const i=e.getSymbolDefinition(s);return i&&i.value?"function"==typeof i.value?pi(e,i.value(e)):pi(e,i.value):t}return null!==fe(t)?ae(t,(t=>{var i;return null!==(i=pi(e,t))&&void 0!==i?i:t})):null!==ie(t)?function(e,t){var i,n,r,s,o;const a=ie(t);if("string"==typeof a){const l=e.getFunctionDefinition(a);if(l&&l.numeric){const n=[];let r=0,s=0,o=0;for(let a of oe(t))if("Evaluate"===re(a)&&(a=null!==(i=ue(a,1))&&void 0!==i?i:P),"Hold"===re(a))n.push(a);else{const t=pi(e,a);t instanceof f.exports.Decimal?(s+=1,n.push(t)):t instanceof h.exports.Complex?(o+=1,n.push(t)):"number"==typeof t?(r+=1,n.push(t)):n.push(null!=t?t:a)}let u=e.numericFormat;"auto"===u&&(u=o>0?"complex":s>0?"decimal":"machine"),("decimal"===u&&"function"!=typeof l.evalDecimal||"complex"===u&&"function"!=typeof l.evalComplex)&&(u="machine");const c=r+s+o;if(c===n.length){if("decimal"==u&&0===o)return l.evalDecimal(e,...n);if("complex"==u&&0===s)return l.evalComplex(e,...n);if("function"==typeof l.evalNumber&&r===c)return l.evalNumber(e,...n)}return"function"==typeof l.evaluate?l.evaluate(e,...n):[a,...n]}if(l){const i=[],u=oe(t);for(let t=0;t<u.length;t++){const a=re(u[t]);if("Hold"===a)i.push(null!==(n=ue(u[t],1))&&void 0!==n?n:P);else if("Evaluate"===a){const n=null!==(r=ue(u[t],1))&&void 0!==r?r:P;i.push(null!==(s=pi(e,n))&&void 0!==s?s:n)}else 0===t&&"first"===l.hold||t>0&&"rest"===l.hold||"all"===l.hold?i.push(u[t]):i.push(null!==(o=pi(e,u[t]))&&void 0!==o?o:u[t])}return"function"==typeof l.evaluate?l.evaluate(e,...i):[a,...i]}}const l={__:["Sequence",oe(t)]};let u=1;for(const e of oe(t))1===u&&(l._=e),l[`_${u}`]=e,u+=1;return pi(e,st(a,l))}(e,t):t}function gi(e,t){var i,n,r,s,o,a;if(null===t)return null;const l=null!==(n=null!==(i=J(t))&&void 0!==i?i:W(t))&&void 0!==n?n:V(t);if(null!==l)return l;const u=se(t);if(null!==u){const i=e.getSymbolDefinition(u);return i&&i.value?"function"==typeof i.value?i.value(e):i.value:t}if(null!==fe(t))return ae(t,(t=>{var i;return null!==(i=gi(e,t))&&void 0!==i?i:t}));const c=ie(t);if(null!==c){if("string"==typeof c){const i=e.getFunctionDefinition(c);if(null===i)return t;const n=[],l=oe(t);for(let t=0;t<l.length;t++){const u=re(l[t]);if("Hold"===u)n.push(null!==(r=ue(l[t],1))&&void 0!==r?r:P);else if("Evaluate"===u){const i=null!==(s=ue(l[t],1))&&void 0!==s?s:P;n.push(null!==(o=pi(e,i))&&void 0!==o?o:i)}else 0===t&&"first"===i.hold||t>0&&"rest"===i.hold||"all"===i.hold?n.push(l[t]):n.push(null!==(a=gi(e,l[t]))&&void 0!==a?a:l[t])}return"function"==typeof i.evaluate?i.evaluate(e,...n):[c,...n]}const i={__:["Sequence",oe(t)]};let n=1;for(const e of oe(t))1===n&&(i._=e),i[`_${n}`]=e,n+=1;return gi(e,st(c,i))}return t}const di={x:"_x",y:"_y",z:"_z",a:"_a",b:"_b",c:"_c",m:"_m",n:"_n",i:"_i",j:"_j"};function vi(e,t){const i=new Set;for(const[n,r,s]of t){const t="string"==typeof n?e.canonical(xi(e.parse(n),di)):xi(n,di),o="string"==typeof r?e.canonical(xi(e.parse(r),di)):xi(r,di);if("function"==typeof s||void 0===s)i.add([t,o,s]);else if("string"==typeof s){const n=e.parse(s);i.add([t,o,(e,t)=>{var i;return null!==(i=e.is(st(n,t)))&&void 0!==i&&i}])}}return i}function xi(e,t){for(const[i,n]of Object.entries(t))e=bi(e,i,n);return e}function bi(e,t,i){return se(e)===t?i:re(e)===t?[i,oe(e)]:ne(e)?e:ae(e,(e=>bi(e,t,i)))}function yi(e,[t,i,n],r){const s=nt(t,r);return null===s?null:"function"!=typeof n||n(e,s)?st(i,s):null}class Ni{constructor(e){var t;const i=null!==(t=null==e?void 0:e.dictionaries)&&void 0!==t?t:Ni.getDictionaries();this.numericFormat="auto",this.tolerance=A;for(const e of i)this.context?this.pushScope(e):this.pushScope(e,{warn:e=>{for(const t of e)t.message},timeLimit:2,memoryLimit:1,recursionLimit:1024});this.pushScope({})}static getDictionaries(e="all"){return Dt(e)}get precision(){return this._precision}set precision(e){"machine"===e&&(e=Math.min(E,Math.floor(E))),e<=E&&(this._numericFormat="machine"),f.exports.Decimal.set({precision:e}),this._precision=e}get numericFormat(){return this._numericFormat}set numericFormat(e){"machine"===e||"complex"===e||"auto"===e?this._precision=Math.floor(E):"decimal"===e&&(this._precision=f.exports.Decimal.precision),this._numericFormat=e}get tolerance(){return this._tolerance}set tolerance(e){this._tolerance=Math.max(e,0)}*getRules(e){if(!this._rules){this._rules={};for(const e of Object.keys(qt))this._rules[e]=vi(this,qt[e])}"string"==typeof e&&(e=[e]);for(const t of e)if(this._rules[t])for(const e of this._rules[t])yield e}get latexSyntax(){return this._latexSyntax||(this._latexSyntax=new Ve),this._latexSyntax}pushScope(e,t){this.context={...t,parentScope:this.context,dictionary:kt(e,this),assumptions:this.context?new at(this.context.assumptions):new at}}popScope(){var e;const t=null===(e=this.context)||void 0===e?void 0:e.parentScope;if(this.context.warnings){const e=[...this.context.warnings];this.context.warnings=[],this.context.warn&&this.context.warn(e)}t&&this.context.warnings&&this.context.warnings.length>0&&(t.warnings?t.warnings=[...t.warnings,...this.context.warnings]:t.warnings=[...this.context.warnings]),this.context=t}get assumptions(){return this.context.assumptions||(this.context.assumptions=new at),this.context.assumptions}signal(e){}get timeLimit(){let e=this.context;for(;e;){if(void 0!==e.timeLimit)return e.timeLimit;e=e.parentScope}}get recursionLimit(){let e=this.context;for(;e;){if(void 0!==e.recursionLimit)return e.recursionLimit;e=e.parentScope}}get iterationLimit(){let e=this.context;for(;e;){if(void 0!==e.iterationLimit)return e.iterationLimit;e=e.parentScope}}shouldContinueExecution(){return void 0===this.deadline||this.deadline>=Date.now()}checkContinueExecution(){if(!this.shouldContinueExecution())throw new Ke({message:"timeout"})}getFunctionDefinition(e){var t,i;let n,r=this.context;for(;r&&!n;)n=null===(t=r.dictionary)||void 0===t?void 0:t.get(e),void 0===n||St(n)||(n=void 0),void 0===n&&(r=r.parentScope);return n&&(n.scope=r),null!==(i=n)&&void 0!==i?i:null}getSymbolDefinition(e){var t;let i,n=this.context;for(;n&&!i;)i=null===(t=n.dictionary)||void 0===t?void 0:t.get(e),void 0===i||wt(i)||(i=void 0),void 0===i&&(n=n.parentScope);return i?(i.scope=n,i):null}getSetDefinition(e){var t;let i,n=this.context;for(;n&&!i;)i=null===(t=n.dictionary)||void 0===t?void 0:t.get(e),void 0===i||Nt(i)||(i=void 0),void 0===i&&(n=n.parentScope);return i?(i.scope=n,i):null}getCollectionDefinition(e){var t;let i,n=this.context;for(;n&&!i;)i=null===(t=n.dictionary)||void 0===t?void 0:t.get(e),void 0===i||Mt(i)||(i=void 0),void 0===i&&(n=n.parentScope);return i?(i.scope=n,i):null}getDefinition(e){var t;let i,n=this.context;for(;n&&!i;)i=null===(t=n.dictionary)||void 0===t?void 0:t.get(e),void 0===i&&(n=n.parentScope);return i?(i.scope=n,i):null}canonical(e){return this.format(e)}format(e,t){return function(e,t,i){let n=t;for(const t of i){const i={canonical:fi,"canonical-add":Ht,"canonical-boolean":ei,"canonical-constants":ti,"canonical-divide":Gt,"canonical-domain":mi,"canonical-exp":Wt,"canonical-list":Vt,"canonical-multiply":Jt,"canonical-power":Kt,"canonical-negate":Xt,"canonical-number":ni,"canonical-rational":ii,"canonical-root":si,"canonical-subtract":ri,json:ai,flatten:hi,sorted:ci,"stripped-metadata":li,"object-literal":ui}[t];if(!i)return null;n=i(n,e)}return n}(this,e,Array.isArray(t)?t:[null!=t?t:"canonical"])}evaluate(e,t){return async function(e,t,i){var n,r,s,o;const a=null!==(r=null!==(n=null==i?void 0:i.timeLimit)&&void 0!==n?n:e.timeLimit)&&void 0!==r?r:2;a&&isFinite(a)&&(e.deadline=Date.now()+1e3*a);const l=null!==(o=null!==(s=null==i?void 0:i.iterationLimit)&&void 0!==s?s:e.iterationLimit)&&void 0!==o?o:1024;let u=0,c=t,f=JSON.stringify(c);for(;u<l&&e.shouldContinueExecution();){if(c=gi(e,c),null===c)return null;const t=JSON.stringify(c);if(f===t)return c;f=t,u+=1}return e.canonical(c)}(this,e,t)}simplify(e,t){return It(this,e,null==t?void 0:t.simplifications)}N(e,t){const i=this.precision,n=this.numericFormat;(null==t?void 0:t.precision)&&(this.precision=t.precision);let r=this.canonical(It(this,e));return null!==r&&(r=pi(this,r)),null!==r&&(r=this.canonical(r)),this.precision=i,this.numericFormat=n,null!=r?r:e}is(e,t){let i=e;return t&&(i=["Element",e,t]),function(e,t){let i=!0;[t,i]=lt(t);const n=e.assumptions.get(t);if(void 0!==n)return n===i}(this,i)}ask(e){const t=[];for(const i in this.assumptions){const n=nt(e,i,{numericalTolerance:this._tolerance});null!==n&&t.push(n)}return t}assume(e,t){let i=e;return t&&(i=["Element",e,t]),ut(this,i)}replace(e,t){return function(e,t,i){let n=!1;for(;!n;){n=!0;for(const r of t){const t=yi(e,r,i);null!==t&&(n=!1,i=t)}}return i}(this,e,t)}domain(e){return Et(this,e)}getVars(e){return et(this,e)}chop(e){return"number"==typeof e?Math.abs(e)<=this._tolerance?0:e:e instanceof h.exports.Complex?Math.abs(e.re)<=this._tolerance&&Math.abs(e.im)<=this._tolerance?0:e:e instanceof f.exports.Decimal&&e.abs().lte(this._tolerance)?m:e}parse(e){return this.latexSyntax.parse(e)}serialize(e){return this.latexSyntax.serialize(e)}isZero(e){return be(this,e)}isNotZero(e){return ye(this,e)}isNumeric(e){return!1}isInfinity(e){return Ne(this,e)}isFinite(e){}isNonNegative(e){return function(e,t){const i=e.isZero(t);if(void 0!==i)return!0===i||e.isPositive(t)}(this,e)}isPositive(e){return we(this,e)}isNegative(e){return Se(this,e)}isNonPositive(e){return function(e,t){const i=we(e,t);if(void 0!==i)return!i}(this,e)}isInteger(e){return function(e,t){const i=W(t);return null!==i&&Number.isInteger(i)}(0,e)}isRational(e){}isAlgebraic(e){}isReal(e){return Me(0,e)}isExtendedReal(e){}isComplex(e){}isOne(e){}isNegativeOne(e){}isElement(e,t){}isSubsetOf(e,t){return Ee(this,e,t)}isEqual(e,t){}isLess(e,t){}isLessEqual(e,t){}isGreater(e,t){}isGreaterEqual(e,t){}}class wi{constructor(e){this.internal=new Ni(e)}static getDictionaries(e="all"){return Ni.getDictionaries(e)}get precision(){return this.internal.precision}set precision(e){this.internal.precision=e}get numericFormat(){return this.internal.numericFormat}set numericFormat(e){this.internal.numericFormat=e}get tolerance(){return this.internal.tolerance}set tolerance(e){this.internal.tolerance=e}get context(){return this.internal.context}pushScope(e,t){this.internal.pushScope(e,t)}popScope(){this.internal.popScope()}get assumptions(){return this.internal.assumptions}shouldContinueExecution(){return this.internal.shouldContinueExecution()}checkContinueExecution(){this.internal.checkContinueExecution()}signal(e){this.internal.signal(e)}getFunctionDefinition(e){return this.internal.getFunctionDefinition(e)}getSymbolDefinition(e){return this.internal.getSymbolDefinition(e)}getSetDefinition(e){return this.internal.getSetDefinition(e)}getCollectionDefinition(e){return this.internal.getCollectionDefinition(e)}getDefinition(e){return this.internal.getDefinition(e)}getRules(e){return this.internal.getRules(e)}format(e,t){return this.internal.format(e,t)}canonical(e){return this.internal.format(e,["canonical"])}N(e){return this.internal.N(e)}simplify(e,t){var i,n,r,s;const o=null!==(n=null!==(i=null==t?void 0:t.timeLimit)&&void 0!==i?i:this.internal.timeLimit)&&void 0!==n?n:2;o&&isFinite(o)&&(this.internal.deadline=Date.now()+1e3*o);const a=null!==(s=null!==(r=null==t?void 0:t.iterationLimit)&&void 0!==r?r:this.internal.iterationLimit)&&void 0!==s?s:1024;let l=0,u=this.canonical(e),c=u;for(;l<a&&this.shouldContinueExecution();){if(u=this.internal.simplify(u,{simplifications:null==t?void 0:t.simplifications}),null===u)return c;if(he(c,u))return this.canonical(u);c=u,l+=1}return null===u?null:this.canonical(u)}async evaluate(e,t){const i=this.internal.evaluate(e,t);return null===i?null:this.canonical(await i)}parse(e){return this.internal.parse(e)}serialize(e){return this.serialize(e)}domain(e){return this.internal.domain(e)}is(e,t){return this.internal.is(e,t)}ask(e){return this.internal.ask(e)}assume(e,t){return this.internal.assume(e,t)}replace(e,t){return this.internal.replace(e,t)}getVars(e){return this.internal.getVars(e)}chop(e){return this.internal.chop(e)}isZero(e){return this.internal.isZero(e)}isNotZero(e){return this.internal.isNotZero(e)}isNumeric(e){return this.internal.isNumeric(e)}isInfinity(e){return this.internal.isInfinity(e)}isFinite(e){return this.internal.isFinite(e)}isNonNegative(e){return this.internal.isNonNegative(e)}isPositive(e){return this.internal.isPositive(e)}isNegative(e){return this.internal.isNegative(e)}isNonPositive(e){return this.internal.isNonPositive(e)}isInteger(e){return this.internal.isInteger(e)}isRational(e){return this.internal.isRational(e)}isAlgebraic(e){return this.internal.isAlgebraic(e)}isReal(e){return this.internal.isReal(e)}isExtendedReal(e){return this.internal.isExtendedReal(e)}isComplex(e){return this.internal.isComplex(e)}isOne(e){return this.internal.isOne(e)}isNegativeOne(e){return this.internal.isNegativeOne(e)}isElement(e,t){return this.internal.isElement(e,t)}isSubsetOf(e,t){return this.internal.isSubsetOf(e,t)}isEqual(e,t){return this.internal.isEqual(e,t)}isLess(e,t){return this.internal.isLess(e,t)}isLessEqual(e,t){return this.internal.isLessEqual(e,t)}isGreater(e,t){return this.internal.isGreater(e,t)}isGreaterEqual(e,t){return this.internal.isGreaterEqual(e,t)}}let Si=null;function Mi(e,t){return null===Si&&(Si=new wi),Si.format(e,t)}function Ei(e){return null===Si&&(Si=new wi),Si.evaluate(e)}const Ai=/\r\n|[\n\r\u2028\u2029]/,Di=e=>`<div>${e.join("</div><div>")}</div>`,Ci=e=>`<span style="color:#F33">${e}</span>`;class ki{constructor(e,t){this.source=e,this.url=null!=t?t:""}get lines(){return this._lines||(this._lines=this.source.split(Ai)),this._lines}get lineOffsets(){if(null==this._lineOffsets){const e=[],t=this.source;let i=!0,n=0;for(;n<t.length;){i&&(e.push(n),i=!1);const r=t.charCodeAt(n);i=13===r||10===r||8232===r||8233===r,13===r&&n+1<t.length&&10===t.charCodeAt(n+1)&&n++,n++}i&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets}getLinecol(e){e=Math.max(Math.min(e,this.source.length),0);const t=this.lineOffsets;let i=0,n=t.length;if(0===n)return[1,e+1];for(;i<n;){const r=Math.floor((i+n)/2);t[r]>e?n=r:i=r+1}return[i,e-t[i-1]+1]}signalOrigin(e){const[t,i]=this.getLinecol(e);return{url:this.url,source:this.source,offset:e,line:t,column:i,around:this.sourceAround(t,i)}}chalkGutter(e){return(e=>`<span style="opacity:.5">${e}</span>`)(e)}chalkMarker(e){return Ci(e)}chalkMessage(e){return Ci(e)}sourceAround(e,t,i){const n=Math.max(e-1-3,0),r=Math.min(this.lines.length,e+3)-1,s="number"==typeof t,o=String(r).length,a=[];for(let l=n;l<=r;l++){const n=` ${` ${l+1}`.slice(-o)} ┆ `;let r="";if(l===e-1){if(s){const e=this.lines[l].slice(0,Math.max(t-1,0)).replace(/[^\t]/g," ");r=Di(["",[" ",this.chalkGutter(n.replace(/\d/g," ")),e,this.chalkMarker("^")].join("")]),i&&(r+=" "+this.chalkMessage(i))}else i&&(r=Di(["",this.chalkGutter(n.replace(/\d/g," "))+i]));a.push(`<span style="background:rgba(255, 100, 100, .1);display:block;border-radius: 4px">${[this.chalkMarker(">"),this.chalkGutter(n),this.lines[l],r].join("")}</span>`)}else a.push(` ${this.chalkGutter(n)}${this.lines[l]}`)}return Di(a)}}const _i=[10,13,8232,8233],Fi=Ri([[33,47],[58,64],[91,94],96,[123,126],[161,167],169,[171,172],174,[176,177],182,187,191,215,247,[8208,8254],[8257,8275],[8592,8730],[8731,10101],[10132,11903],[12289,12291],[12296,12320],12336,[64830,64831],[65093,65094]]),qi=Ri([[0,32],[127,159],92,96,[65534,65535]]),Ii=[...qi,33,34,35,36,37,38,39,40,41,46,58,60,63,64,91,93,94,123,125,126],Pi=[9,10,11,12,13,32,133,8206,8207,8232,8233,0,160,5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288],Ti=Ri([...Pi,2042,65101,65102,65103,8208,8209,8210,8211,65112,8259,727,65374,65306,1417,1795,1796,65072,8282,1475,760,42889,8758,42237,894,65281,451,660,2429,8228,1748,1793,1794,1632,1776,12539,65381,903,65793,8231,65282,8220,8221,[0,31],[127,159],173,1564,6158,8203,8204,8205,8206,8207,8288,8289,8290,8291,8292,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,[64976,65007],65279,65534,65535]),Oi=new Map([[0,"\\0"],[8,"\\b"],[9,"\\t"],[10,"\\n"],[12,"\\f"],[13,"\\r"],[32," "],[92,"\\\\"],[39,"\\'"],[34,'\\"']]),Li=new Map([[48,0],[92,92],[39,39],[34,34],[98,8],[102,12],[110,10],[114,13],[115,32],[116,9]]),zi=new Map([[48,0],[49,1],[50,2],[51,3],[52,4],[53,5],[54,6],[55,7],[56,8],[57,9],[97,10],[65,10],[98,11],[66,11],[99,12],[67,12],[100,13],[68,13],[101,14],[69,14],[102,15],[70,15],[65296,0],[65297,1],[65298,2],[65299,3],[65300,4],[65301,5],[65302,6],[65303,7],[65304,8],[65305,9],[65313,10],[65314,11],[65315,12],[65316,13],[65317,14],[65318,15],[65345,10],[65346,11],[65347,12],[65348,13],[65349,14],[65350,15]]),Ui=new Map([[48,0],[49,1],[50,2],[51,3],[52,4],[53,5],[54,6],[55,7],[56,8],[57,9],[65296,0],[65297,1],[65298,2],[65299,3],[65300,4],[65301,5],[65302,6],[65303,7],[65304,8],[65305,9]]);function Ri(e){const t=[];for(const i of e)if("number"==typeof i)t.push(i);else for(let e=i[0];e<=i[1];e++)t.push(e);return t}function $i(e){return _i.includes(e)}function ji(e){return 9===e||32===e}function Bi(e){return Pi.includes(e)}function Zi(e){return Pi.includes(e)||Fi.includes(e)}function Qi(e){return qi.includes(e)}function Hi(e){return Ii.includes(e)}function Gi(e){return Ti.includes(e)}function Wi(e){return e>65535?2:1}!function(e){const t=new Map;for(const[i,n]of Object.entries(e))if(t.has(n)){const e=t.get(n);e.push(parseInt(i)),t.set(n,e)}else t.set(n,[parseInt(i)])}(new Map([[172,"!"],[177,"+-"],[8723,"-+"],[215,"*"],[247,"/"],[8725,"/"],[8228,"."],[8229,".."],[8230,"..."],[8231,"."],[8242,"'"],[8243,"''"],[8244,"'''"],[8258,"***"],[8260,"/"],[8263,"??"],[8264,"?!"],[8265,"!?"],[8270,"*"],[8273,"**"],[8278,"..."],[8281,"....."],[8282,":"],[8283,".:."],[8290,"*"],[8292,"+"],[960,"Pi"],[8252,"!!"],[8520,"ImaginaryUnit"],[8519,"ExponentialE"],[8450,"ComplexNumber"],[8477,"RealNumber"],[8469,"NaturalNumber"],[8484,"Integer"],[8474,"RationalNumber"],[8592,"<-"],[8594,"->"],[8596,"<->"],[8614,"|->"],[8656,"=>"],[8660,"<=>"],[8709,"EmptySet"],[8734,"Infinity"],[10717,"ComplexInfinity"],[8722,"-"],[8728,"."],[8896,"&&"],[8897,"||"],[8743,"&&"],[8744,"||"],[8759,"::"],[8800,"!="],[8801,"=="],[8802,"!=="],[8803,"==="],[10877,"<="],[10878,">="],[8804,"<="],[8805,">="],[8806,"<="],[8807,">="],[8810,"<<"],[8811,">>"],[9655,"|>"],[9665,"<|"],[10704,"||>"],[10703,"<||"],[8669,"~>"],[8668,"<~"],[8712,"in"],[8713,"!in"],[10869,"=="],[10870,"==="],[9216,"\\0"],[9224,"\\b"],[9225,"\\t"],[9226,"\\n"],[9252,"\\n"],[9229,"\\r"]]));class Vi extends Error{constructor(e){super(),this.message=e}}class Yi{constructor(e,t,i){this._offset=0,this.length=0,this.rules=e,this.source=t,this.url=i,this.length=t.length,this._trace=[]}get(e){return this.source.codePointAt(e)}atEnd(){return this.offset>=this.source.length}atLinebreak(){return $i(this.source.codePointAt(this.offset))}atString(e){let t=0,i=!0;const n=this.offset;for(;i&&t<e.length&&t<this.source.length;)i=this.get(n+t)===e.codePointAt(t),t+=1;return i}slice(e,t){return this.source.slice(e,t)}get offset(){return this._offset}trace(e){return[...this._trace,"string"==typeof e?e:"function"==typeof e?"???":e[0]]}skipTo(e){return this._offset=e,this}fatalError(e){throw new Vi(e)}hasRule(e){return this.rules.has(e)}parse(e,t){let i;return this._trace.push("string"==typeof e?e:"function"==typeof e?"???":e[0]),void 0!==t&&this.skipTo(t),i="string"==typeof e?this.rules.parse(e,this):"function"==typeof e?e(this):e[1](this),this._trace.pop(),i}parseWhitespace(){return this.hasRule("whitespace")?this.parse("whitespace"):this.ignore()}ignore(){return new Ji(this).ignore()}failure(){return new Ji(this).failure()}}class Ji{constructor(e){this._parser=e,this._range=[e.offset,e.offset]}copyDiagnostics(e){e.isError&&(void 0===this._diagnostics&&(this._diagnostics=[]),e._diagnostics&&(this._diagnostics=[...this._diagnostics,...e._diagnostics]))}get parser(){return this._parser}get diagnostics(){var e;return null!==(e=this._diagnostics)&&void 0!==e?e:[]}get isFailure(){return void 0===this._diagnostics&&void 0===this._value}get isEmpty(){return void 0===this._diagnostics&&null===this._value}get isSuccess(){return void 0===this._diagnostics&&void 0!==this._value&&null!==this._value}get isError(){return void 0!==this._diagnostics}get start(){return this._range[0]}get end(){return this._range[1]}set end(e){this._range[1]=e}set range(e){this._range=e}get value(){return this._value}set value(e){this._value=e}success(e){return this._value=e,this._range[1]=this._parser.offset-1,this}failure(){return this._parser.skipTo(this._range[0]),this}ignore(){return this._value=null,this}ignoreUntil(e){return this._parser.skipTo(e),this._range[1]=this._parser.offset,this._value=null,this}error(e,t,i){return this._value=e,this._range[1]=this._parser.offset-1,this._diagnostics||(this._diagnostics=[]),this._diagnostics.push({severity:"error",range:[this._range[0],this._range[1]],message:"function"==typeof t?t(this):t,fixits:i}),this}errorAt(e,t,i,n){return this._value=e,this._range[1]=this._parser.offset-1,this._diagnostics||(this._diagnostics=[]),this._diagnostics.push({severity:"error",range:[this._range[0],this._range[1],i],message:"function"==typeof t?t(this):t,fixits:n}),this}errorFrom(e,t){return this._value=t,this._range[1]=this._parser.offset-1,this._diagnostics||(this._diagnostics=[]),e._diagnostics&&(this._diagnostics=[...this._diagnostics,...e._diagnostics]),this}warning(e,t){return this._range[1]=this._parser.offset-1,this._diagnostics||(this._diagnostics=[]),this._diagnostics.push({severity:"warning",range:[this._range[0],this._range[1]],message:e,fixits:t}),this}}function Ki(e,t){let i=e.offset;const n=[...t].map((e=>e.codePointAt(0)));for(;i<t.length-n.length;){let t=e.get(i);if(t===n[0]){let r=!0,s=1;for(;r&&s<n.length;)t=e.get(i),r=t===n[s],r&&(s+=1,i+=Wi(t));if(r)return i}i+=Wi(t)}return-1}function Xi(e){return"string"==typeof e?e:e[0]}function en(e,t,i,n,r){const s=new Ji(e);let o=0,a=1/0;for(const e of i)s.copyDiagnostics(e),(e.isSuccess||e.isError)&&(o=Math.max(o,e.end),a=Math.min(a,e.end));if(s.range=[a,o],s.value=i.length>0?t(...i):null,r&&s.error(s.value,r),n)for(const e of n)s.copyDiagnostics(e);return s}function tn(e,t){const i=new Ji(e);let n=0,r=!0;const s=e.offset;for(;n<t.length&&r&&n<e.length;)r=e.get(s+n)===t.codePointAt(n),n++;return r&&n===t.length&&(e.skipTo(e.offset+n),i.success(t)),i}function nn(e){return 1===e.length?function(e){return[`U+${("0000"+e.toString(16)).slice(-4)} (${String.fromCodePoint(e)})`,t=>function(e,t){const i=new Ji(e),n=e.offset;return e.get(n)!==t&&i.failure(),e.skipTo(n+Wi(t)),i.success(String.fromCodePoint(t))}(t,e)]}(e.codePointAt(0)):[`**\`${e}\`**`,t=>tn(t,e)]}function rn(e,t){return[e.map((e=>Xi(e))).join(" "),i=>{const n=[],r=[];let s=!0;r.push(i.parseWhitespace());for(const o of e){const e=i.offset,a=i.parse(o);if(n.push(a),a.isFailure&&s)return a;if(a.isFailure)return en(i,t,n,r,["unexpected-symbol",String.fromCodePoint(i.get(e)),i.trace(o)]);s=!1,r.push(i.parseWhitespace())}return en(i,t,n,r)}]}function sn(e,t){return[e.map((e=>Xi(e))).join(" | "),i=>{const n=i.offset;let r;for(const s of e){i.skipTo(n);const e=i.parse(s);if(t&&(e.isSuccess||e.isError)&&(e.value=t(e)),e.isSuccess)return e;!r&&e.isError&&(r=e)}return r?(i.skipTo(r.end+1),r):(i.skipTo(n),i.failure())}]}function on(e,t){return[`(${Xi(e)})!`,i=>{const n=i.parse(e);if(n.isSuccess||n.isEmpty||n.isError)return n;let r=5;const s=i.offset;let o=t;for(o||(o=i.atEnd()?["expression-expected"]:["unexpected-symbol",String.fromCodePoint(i.get(s)),i.trace(e)]);r>0&&!i.atEnd();){i.skipTo(i.offset+1);const t=i.parse(e);if(t.isSuccess||t.isEmpty)return n.errorAt(t.value,o,s),n.copyDiagnostics(t),n;r-=1}return n.errorAt(n.value,o,s)}]}function an(e,t){const i=new Ji(e);let n=e.offset;if(n>=e.length)return i.failure();if("p"===t){if(112!==e.get(n)&&80!==e.get(n))return i.failure()}else if(101!==e.get(n)&&69!==e.get(n))return i.failure();n+=1;let r=1;if(45===e.get(n)?(n++,r=-1):43===e.get(n)&&n++,e.offset!==n&&!Ui.has(e.get(n)))return e.skipTo(n),i.error(0,"exponent-expected");let s=0;for(;Ui.has(e.get(n));)s=10*s+Ui.get(e.get(n++));return e.skipTo(n),i.success(r*s)}function ln(e,t,i){const n=new Ji(e);let r=an(e,"e");return r.isSuccess?i=Number.parseFloat(i.toString()+"e"+r.value.toString()):r.isFailure&&(r=an(e,"p"),r.isSuccess&&(i*=Math.pow(2,r.value))),r.isSuccess||r.isFailure?n.success(i):n.error(i,"exponent-expected")}function un(e){let t=!1,i=e.offset;for(;!t&&i<e.length;){const n=e.get(i++);13!==n&&8232!==n&&8233!==n||(t=!0),10===n&&(13===e.get(i)&&(i+=1),t=!0)}e.skipTo(i)}function cn(e){const t=e.get(e.offset);13!==t&&8232!==t&&8233!==t?10===t&&(13===e.get(e.offset+1)?e.skipTo(e.offset+2):e.skipTo(e.offset+1)):e.skipTo(e.offset+1)}function fn(e){const t=new Ji(e);return 47===e.get(e.offset)&&47===e.get(e.offset+1)&&un(e),t.ignore()}function hn(e){const t=new Ji(e);let i=e.offset;if(47!==e.get(i)||42!==e.get(i+1))return t.failure();i+=2;let n=1;for(;n>0&&i<e.length;){const t=e.get(i);47===t&&42===e.get(i+1)?(n+=1,i+=2):42===t&&47===e.get(i+1)?(n-=1,i+=2):i+=Wi(t)}return n>0?(e.skipTo(e.offset+i),t.errorAt(null,"end-of-comment-expected",t.start)):t.ignoreUntil(i)}function mn(e){const t=new Ji(e);return 0!==e.offset||35!==e.get(0)||33!==e.get(1)?t.failure():(un(e),t.success(!0))}function pn(e){const t=new Ji(e);if(92!==e.get(e.offset))return t.failure();const i=e.offset,n=Li.get(e.get(i+1));if(void 0!==n)return e.skipTo(i+2),t.success(String.fromCodePoint(n));let r=i+1;const s=e.get(r++);if(117!==s)return e.skipTo(r),t.errorAt(String.fromCodePoint(s),["invalid-escape-sequence","\\"+String.fromCodePoint(s)],i);let o=0,a=!1,l=!1,u="";if(123===e.get(r)){for(r+=1;!l&&r<i+11;){const t=e.get(r++);u+=String.fromCodePoint(t),a=a||!zi.has(t),a||(o=16*o+zi.get(t)),l=125===e.get(r)}l&&(r+=1)}else{for(;!a&&r<=e.offset+5;){const t=e.get(r++);u+=String.fromCodePoint(t),a=!zi.has(t),a||(o=16*o+zi.get(t))}l=r<=e.length}return e.skipTo(r),a||!l?t.errorAt("�",["invalid-unicode-codepoint-string",u],i):o>1114111?t.errorAt("�",["invalid-unicode-codepoint-value","U+"+("00000"+o.toString(16)).slice(-8).toUpperCase()],i):o>=55296&&o<=57343?t.errorAt("�",["invalid-unicode-codepoint-value","U+"+("0000"+o.toString(16)).slice(-4).toUpperCase()],i):t.success(String.fromCodePoint(o))}function gn(e,t){const i=new Ji(e);if(void 0===t||92!==e.get(e.offset)||40!==e.get(e.offset+1))return i.failure();const n=e.offset+2,r=e.parse(t,n);return i.copyDiagnostics(r),41!==e.get(e.offset)?i.error(r.value,["closing-bracket-expected",")"]):(e.skipTo(e.offset+1),i.value=r.value,i)}const dn=new class{constructor(){this.rules={},this.ruleDescription={},this.rule("quoted-text-item","U+0000-U+0009 U+000B-U+000C U+000E-U+0021 U+0023-U+2027 U+202A-U+D7FF | U+E000-U+10FFFF"),this.rule("linebreak","(U+000A \\[U+000D\\]) | U+000D | U+2028 | U+2029"),this.rule("unicode-char","_quoted-text-item_ | _linebreak_ | U+0022"),this.rule("pattern-syntax","U+0021-U+002F | U+003A-U+0040 | U+005b-U+005E | U+0060 | U+007b-U+007e | U+00A1-U+00A7 | U+00A9 | U+00AB-U+00AC | U+00AE | U+00B0-U+00B1 | U+00B6 | U+00BB | U+00BF | U+00D7 | U+00F7 | U+2010-U+203E | U+2041-U+2053 | U+2190-U+2775 | U+2794-U+27EF | U+3001-U+3003 | U+3008-U+3020 | U+3030 | U+FD3E | U+FD3F | U+FE45 | U+FE46"),this.rule("inline-space","U+0009 | U+0020"),this.rule("pattern-whitespace","_inline-space_ | U+000A | U+000B | U+000C | U+000D | U+0085 | U+200E | U+200F | U+2028 | U+2029"),this.rule("whitespace","_pattern-whitespace_ | U+0000 | U+00A0 | U+1680 | U+180E | U+2000-U+200A | U+202f | U+205f | U+3000"),this.rule("line-comment","**`//`** (_unicode-char_)* _linebreak_)"),this.rule("block-comment","**`/*`** (((_unicode-char_)\\* _linebreak_)) | _block-comment_) **`*/`**"),this.rule("digit","U+0030-U+0039 | U+FF10-U+FF19"),this.rule("hex-digit","_digit_ | U+0041-U+0046 | U+0061-U+0066 | U+FF21-FF26 | U+FF41-U+FF46"),this.rule("binary-digit","U+0030 | U+0031 | U+FF10 | U+FF11"),this.rule("numerical-constant","**`NaN`** | **`Infinity`** | **`+Infinity`** | **`-Infinity`**"),this.rule("base-10-exponent","(**`e`** | **`E`**) \\[_sign_\\](_digit_)+"),this.rule("base-2-exponent","(**`p`** | **`P`**) \\[_sign_\\](_digit_)+"),this.rule("binary-number","**`0b`** (_binary-digit_)+ \\[**`.`** (_binary-digit_)+ \\]\\[_exponent_\\]"),this.rule("hexadecimal-number","**`0x`** (_hex-digit_)+ \\[**`.`** (_hex-digit_)+ \\]\\[_exponent_\\]"),this.rule("decimal-number","(_digit_)+ \\[**`.`** (_digit_)+ \\]\\[_exponent_\\]"),this.rule("sign","**`+`** | **`-`**"),this.rule("symbol","_verbatim-symbol_ | _inline-symbol_"),this.rule("verbatim-symbol","**``` ` ```** (_escape-sequence_ | _symbol_start_) (_escape-sequence_ | _symbol_continue_)* **``` ` ```**"),this.rule("inline-symbol","_symbol-start_ (_symbol_continue_)*"),this.rule("escape-expression","**`\\(`** _expression_ **`)`**"),this.rule("single-line-string",'**`"`** (_escape-sequence_ | _escape-expression_ | _quoted-text-item_)* **`"`**'),this.rule("multiline-string",'**`"""`** _multiline-string-line_ **`"""`**'),this.rule("extended-string","..."),this.rule("shebang","**`#!`** (unicode-char)* (_linebreak | _eof_)"),this.rule("shebang",mn)}rule(e,t){"string"==typeof t?this.ruleDescription[e]=t:"function"==typeof t?(this.ruleDescription[e]||(this.ruleDescription[e]=`_${e}_`),this.rules[e]=t):(this.ruleDescription[e]=t[0],this.rules[e]=t[1])}toString(){return Object.keys(this.ruleDescription).map((e=>`_${e}_ → ${this.ruleDescription[e]}`)).join("\n\n")}parse(e,t,i){if("string"==typeof t&&(t=new Yi(this,t,null!=i?i:"")),!this.has(e))throw new Error("Unexpected rule "+e);return this.rules[e](t)}has(e){return"function"==typeof this.rules[e]}get(e){return this.rules[e]}};function vn(e){if(null==e)return"";const t=K(e);if(null!==t)return t;const i=W(e);return null!==i?Number(i).toString():e.toString()}const xn={0:"\\u0000",1:"\\u0001",2:"\\u0002",3:"\\u0003",4:"\\u0004",5:"\\u0005",6:"\\u0006",7:"\\u0007",8:"\\b",9:"\\t",10:"\\n",11:"\\u000b",12:"\\f",13:"\\r",14:"\\u000e",15:"\\u000f",16:"\\u0010",17:"\\u0011",18:"\\u0012",19:"\\u0013",20:"\\u0014",21:"\\u0015",22:"\\u0016",23:"\\u0017",24:"\\u0018",25:"\\u0019",26:"\\u001a",27:"\\u001b",28:"\\u001c",29:"\\u001d",30:"\\u001e",31:"\\u001f",34:'\\"',47:"\\/",92:"\\\\"};function bn(e){var t;let i="";for(const n of e)i+=null!==(t=xn[n.codePointAt(0)])&&void 0!==t?t:n;return i}function yn(e,t){return Array.isArray(t)||(t=t.range),Array.isArray(e)?{fn:e,sourceOffsets:t}:"object"==typeof e?{...e,sourceOffsets:t}:"number"==typeof e?{num:e.toString(),sourceOffsets:t}:"string"==typeof e&&"'"===e[0]&&"'"===e[e.length-1]?{str:e.slice(1,-1),sourceOffsets:t}:{sym:e,sourceOffsets:t}}var Nn;function wn(e,t){const i=dn.parse("cortex",e,t);if(i.isSuccess)return[i.value,[]];const n=new ki(e);return i.isError?[i.value,(r=i.diagnostics,[...r]).map((e=>{var t;return{...e,origin:n.signalOrigin(null!==(t=e.range[2])&&void 0!==t?t:e.range[1])}}))]:(i.isEmpty||i.isFailure,["Nothing",[]]);var r}dn.rule("whitespace",(e=>function(e){let t=!1;const i=new Ji(e);let n=e.offset;for(;!t&&n<e.length;){const r=e.offset;for(;!t;){const i=e.get(n);t=!Bi(i),t||(n+=Wi(i))}if(i.copyDiagnostics(fn(e.skipTo(n))),i.copyDiagnostics(hn(e)),i.isError)return i;t=r===e.offset,n=e.offset}return e.skipTo(n),i.ignore()}(e))),dn.rule("pragma",sn(["pragma-symbol","pragma-function"])),dn.rule("pragma-symbol",sn([nn("#line"),nn("#column"),nn("#filename"),nn("#url"),nn("#date"),nn("#time")],(e=>{var t;if("#date"===e.value){const e=new Date;return e.getFullYear()+"-"+("00"+(1+e.getMonth())).slice(-2)+"-"+("00"+(1+e.getDay())).slice(-2)}if("#time"===e.value){const e=new Date;return("00"+e.getHours().toString()).slice(-2)+":"+("00"+e.getMinutes().toString()).slice(-2)+":"+("00"+e.getSeconds().toString()).slice(-2)}return"#url"===e.value?null!==(t=e.parser.url)&&void 0!==t?t:"Nothing":"#filename"===e.value?e.parser.url?e.parser.url.substring(e.parser.url.lastIndexOf("/")+1):"Nothing":"#line"===e.value?new ki(e.parser.source,e.parser.url).getLinecol(e.parser.offset)[0]:"#column"===e.value?new ki(e.parser.source,e.parser.url).getLinecol(e.parser.offset)[1]:"Nothing"}))),dn.rule("pragma-function",rn([sn([nn("#warning"),nn("#error"),nn("#env"),nn("#navigator")]),"function-call-argument-clause"],((e,t)=>{var i;if("#warning"===e.value)return{str:le(t.value,(e=>vn(e))).join(" ")};if("#error"===e.value){const e=le(t.value,(e=>vn(e))).join(" ");throw new Vi(e)}if("#env"===e.value){if("process"in globalThis&&process.env)return{str:null!==(i=process.env[vn(ue(t.value,1))])&&void 0!==i?i:""}}else if("#navigator"===e.value&&"navigator"in globalThis)return{str:navigator[vn(ue(t.value,1))]};return"Nothing"}))),dn.rule("function-call-argument-clause",(Nn=e=>["List",...e.map((e=>e.value))],[`**\`(\`** (${Xi("expression")}+#**\`,\`** **\`)\`**`,e=>{const t=new Ji(e);if(!e.parse(nn("(")).isSuccess)return t.failure();const i=[];let n=!1;for(;!n&&!e.atEnd();){const r=e.parse("expression");t.copyDiagnostics(r),n=!r.isSuccess,n||(i.push(r),n=!e.parse(nn(",")).isSuccess)}return 0===i.length?t.error(Nn([]),"expression-expected"):e.parse(nn(")")).isSuccess?t.success(Nn(i)):t.error(Nn(i),["closing-bracket-expected",")"])}])),dn.rule("signed-number","_numerical-constant_ | (\\[_sign_\\] (_binary-number_ | _hexadecimal-number_ | _decimal-number_)"),dn.rule("signed-number",(e=>{const t=new Ji(e);let i=tn(e,"NaN");if(i.isFailure&&(i=tn(e,"+Infinity")),i.isFailure&&(i=tn(e,"-Infinity")),i.isSuccess)return t.success(yn({num:i.value},i));if(i=tn(e,"Infinity"),i.isSuccess)return t.success(yn({num:"+Infinity"},i));const n=function(e){const t=new Ji(e);let i=e.offset,n=1;45===e.get(i)?(i++,n=-1):43===e.get(i)&&i++,e.skipTo(i);const r=function(e){let t=function(e){const t=new Ji(e);let i=e.offset;if(48!==e.get(i++)||98!==e.get(i++))return t.failure();let n=0,r=!1;for(;!r&&i<e.length;){const t=zi.get(e.get(i++));0===t?n<<=1:1===t?n=1+(n<<1):95===e.get(i-1)||(r=!0,i-=1)}if(46===e.get(i)){i+=1;let t=.5,s=0;for(r=!1;!r&&i<e.length;){const n=zi.get(e.get(i++));0===n?t/=2:1===n?(s+=t,t/=2):95===e.get(i-1)||(r=!0,i-=1)}n+=s}return e.skipTo(i),ln(e,0,n)}(e);return t.isFailure&&(t=function(e){const t=new Ji(e);let i=e.offset;if(48!==e.get(i++)||120!==e.get(i++))return t.failure();let n=0,r=!1;for(;!r&&i<e.length;){const t=e.get(i++);zi.has(t)?n=16*n+zi.get(t):95!==t&&(r=!0,i-=1)}if(46===e.get(i++)){let s=.0625;r=!1;let o=0;for(;!r&&i<e.length;){const a=e.get(i++);if(zi.has(a))o+=s*zi.get(a),s/=16;else{if(95===a)return e.skipTo(i),t.error(n+o,"hexadecimal-number-expected");r=!0,i-=1}}n+=o}return e.skipTo(i),ln(e,0,n)}(e)),t.isFailure&&(t=function(e){const t=new Ji(e),i=e.offset;if(!Ui.has(e.get(i)))return t.failure();let n=i,r=0,s=!1;for(;!s&&n<e.length;){const t=e.get(n++);Ui.has(t)?r=10*r+Ui.get(t):95!==t&&(s=!0,n-=1)}if(46===e.get(n)){n+=1;let i=.1;s=!1;let o=0;for(;!s&&n<e.length;){const a=e.get(n++);if(Ui.has(a))o+=i*Ui.get(a),i/=10;else{if(95===a)return e.skipTo(n),t.error(r+o,"decimal-number-expected");s=!0,n-=1}}r+=o}return e.skipTo(n),ln(e,0,r)}(e)),t}(e);return r.isSuccess?t.success(n*r.value):r.isError?t.errorFrom(r,n*r.value):t.failure()}(e);return n.isSuccess?t.success(yn(n.value,n)):n})),dn.rule("symbol","_verbatim-symbol_ | _inline-symbol_"),dn.rule("symbol",(e=>{const t=new Ji(e),i=function(e){const t=function(e){const t=new Ji(e);if(96!==e.get(e.offset))return t.failure();let i=!1,n=!1,r=e.offset+1,s="",o=!1;for(;!i&&!o&&r<e.length;){const t=e.get(r);if(o=$i(t),i=96===t,!i)if(92===t){e.skipTo(r);const t=pn(e);t.isSuccess&&(s+=t.value),r=e.offset}else{n=n||Qi(t);const e=String.fromCodePoint(t);s+=e,r+=e.length}}return i?(e.skipTo(r+1),0===s.length?t.errorAt("Missing","empty-verbatim-symbol",t.start):n||Hi(s.charCodeAt(0))?t.errorAt("Missing",["invalid-symbol-name",s],t.start):t.success(s)):(e.skipTo(r),t.errorAt("Missing",["unbalanced-verbatim-symbol",s],t.start))}(e);if(!t.isFailure)return t;const i=e.offset;let n=e.get(i);if(Hi(n)||Zi(n))return t.failure();let r=!1,s=i,o="";for(;!r&&s<e.length;)if(n=e.get(s),r=Zi(n)||Qi(n),!r){const e=String.fromCodePoint(n);o+=e,s+=e.length}return 0===o.length?t.failure():(e.skipTo(s),t.success(o))}(e);return t.copyDiagnostics(i),t.end=i.end,(i.isSuccess||i.isError)&&t.success(yn(i.value,i)),t})),dn.rule("string","_single-line-string_ | _multiline-string_ | _extended-string_"),dn.rule("string",(e=>{let t=function(e,t){const i=new Ji(e),n=e.offset;if(34!==e.get(n))return i.failure();if(34===e.get(n+1)&&34!==e.get(n+2))return e.skipTo(e.offset+2),i.success([""]);if(34===e.get(n+1)&&34===e.get(n+2))return i.failure();let r=!1,s=!1;e.skipTo(n+1);const o=[];let a="";for(;!r&&!s&&!e.atEnd();){const t=e.get(e.offset);if(s=34===t,r=$i(t),92===t){const t=gn(e,"expression");if(t.isFailure){const t=pn(e);i.copyDiagnostics(t),t.isSuccess?a+=t.value:t.isError&&(a+="\\"+t.value)}else o.push(a),a="",i.copyDiagnostics(t),o.push(t.value)}else r||s||(a+=String.fromCodePoint(t)),e.skipTo(e.offset+1)}return a&&(o.push(a),a=""),s?(i.success(o),i):0===o.length&&(e.atEnd()||e.atLinebreak())?i.error([""],["string-literal-opening-delimiter-expected",'"']):i.error(o,["string-literal-closing-delimiter-expected",'"'])}(e);if(t.isFailure&&(t=function(e,t){const i=new Ji(e),n=e.offset;if(34!==e.get(n)||34!==e.get(n+1)||34!==e.get(n+2))return i.failure();if(function(e){let t,i=e.offset;do{t=e.get(i++)}while(32===t||9===t);e.skipTo(i-1)}(e.skipTo(n+3)),!e.atLinebreak())return i.error([""],"multiline-string-expected");cn(e);let r=!1,s=e.offset;const o=[];let a=[],l="";for(;!r&&s<e.length;){const t=e.get(s);if($i(t))l&&a.push(l),l="",o.push(a),a=[],cn(e.skipTo(s)),s=e.offset;else if(r=34===t&&34===e.get(s+1)&&34===e.get(s+2),92===t)if($i(e.get(s+1)))l+="\\\n",s+=2;else{e.skipTo(s);const n=gn(e,"expression");if(n.isFailure){const n=pn(e);s=e.offset,n.isSuccess?l+=n.value:n.isError&&(l+=String.fromCodePoint(t),i.copyDiagnostics(n))}else s=e.offset,a.push(l),l="",i.copyDiagnostics(n),a.push(n.value)}else r||(l+=String.fromCodePoint(t)),s+=1}e.skipTo(s+2);const u=l;let c=!0;if(u.length>0){for(const e of u)ji(e.codePointAt(0))||(c=!1);if(c)for(const e of o)"string"==typeof e[0]&&e[0].startsWith(u)&&(e[0]=e[0].slice(u.length))}let f=[];for(let e=0;e<=o.length-1;e++){const t=o[e],i=t[t.length-1];"string"==typeof i&&"\\"===i[i.length-1]?(t[t.length-1]=i.slice(-1),f=[...f,...t]):f=e===o.length-1?[...f,...t]:[...f,...t,"\n"]}return c?(i.value=f,i):i.error(f,"multiline-whitespace-expected")}(e)),t.isFailure&&(t=function(e){const t=e.offset,i=new Ji(e);if(35!==e.get(t))return i.failure();let n=0,r=t;for(;35===e.get(r++);)n+=1;if(r-=1,34!==e.get(r++))return i.failure();let s="",o=!1,a=!1;do{const t=e.get(r++);if(o=r>=e.length||$i(t),34===t){let t=n;for(;t>0&&35===e.get(r+t-1);)t-=1;a=0===t,a&&(r+=n)}o||a||(s+=String.fromCodePoint(t))}while(!o&&!a);return e.skipTo(r),a?i.success(s):i.error(s,["string-literal-closing-delimiter-expected","#".repeat(n)+'"'])}(e),t.isSuccess))return t.success(yn({str:t.value},t));if(t.isFailure||t.isEmpty)return t;const i=[];let n,r;for(const e of t.value)"string"==typeof e?n=(null!=n?n:"")+e:Q(e)?n=(null!=n?n:"")+e.str:("string"==typeof n&&(i.push(n),n=void 0),i.push(e));return"string"==typeof n&&i.push(n),r=1===i.length&&"string"==typeof i[0]?yn({str:bn(i[0])},t):yn(["String",...i.map((e=>"string"==typeof e?{str:e}:e))],t),t.value=r,t})),dn.rule("primary",sn(["pragma","signed-number","symbol","string","parenthesized-expression"])),dn.rule("expression",function(e,t,i){const n=Xi("primary");return[[["NotElement","!in",160],["Element","in",240],["LessEqual","<=",241],["GreaterEqual",">=",242],["Less","<",245],["Greater",">",245],["NotEqual","!=",255],["Assign","=",258],["Equal","==",260],["Same","===",260],["KeyValue","->",265],["Add","+",275],["Subtract","-",275],["Multiply","*",390],["Divide","/",660],["Negate","-",665,"prefix"],["Power","^",720,"left"],["Pipe","|>",790],["BackPipe","~>",790],["Or","||",800],["And","&&",810],["Not","!",820,"prefix"]].map((e=>{var t;const[i,r,s]=e,o=null!==(t=e[3])&&void 0!==t?t:"right";return"prefix"===o?`**\`${r}\`**<sub>${s}</sub> ${n}`:"suffix"===o?`${n} **\`${r}\`**<sub>${s}</sub>`:"left"===o?`_···_ **\`${r}\`**<sub>${s}L</sub> ${n}`:`${n} **\`${r}\`**<sub>${s}R</sub> _···_`})).join(" | "),e=>function(e,t,i,n){return e.parse("primary")}(e)]}()),dn.rule("parenthesized-expression",(")",[`**\`(\`** (${Xi("expression")})* **\`)\`**`,e=>{const t=new Ji(e);if(!e.atString("("))return t.failure();const i=e.offset;e.skipTo(i+"(".length);const n=e.parse("expression");return n.isError?(t.copyDiagnostics(n),t.range=[t.start,Ki(e,")")],t):e.atString(")")?(e.skipTo(e.offset+")".length),t.value=n.value,t):t.error(n.value,["closing-bracket-expected",")"])}])),dn.rule("cortex",on(rn([function(e){return[`\\[${Xi(e)}\\]`,t=>{const i=t.offset,n=t.parse(e);return n.isSuccess||n.isEmpty?n:n.isFailure?(t.skipTo(i),t.ignore()):n}]}("shebang"),function(e,t){return[`(${Xi(e)})*`,i=>{const n=[i.parseWhitespace()];let r=i.parse(e);const s=[r];for(;!i.atEnd()&&(r.isSuccess||r.isEmpty);)n.push(i.parseWhitespace()),r=i.parse(e),s.push(r);return en(i,t,s,n)}]}("expression",((...e)=>{var t;const i=e.filter((e=>!e.isEmpty&&!e.isFailure));return 0===i.length?yn("Nothing",e[0]):1===i.length?yn(null!==(t=i[0].value)&&void 0!==t?t:"Nothing",i[0]):yn(["Do",...i.map((e=>e.value))],[i[0].start,i[i.length-1].end])})),on(["_eof_",e=>{const t=new Ji(e);return e.atEnd()?t.success(!0):t.failure()}])],((e,t,i)=>{var n;return yn(null!==(n=t.value)&&void 0!==n?n:"Nothing",t)}))));class Sn{constructor(e){this.fmt=e}}class Mn extends Sn{constructor(e){super(e)}debug(){return"EmptyBlock"}serialize(e){return""}nextCol(e){return e}cost(e){return 0}}class En extends Sn{constructor(e,t){super(e),this.s=t}debug(){return" "===this.s?'" "':'"'+this.s+'"'}serialize(e){return this.s}nextCol(e){return e+this.s.length}cost(e){const t=this.nextCol(e);return t>=this.fmt.margin?(t-this.fmt.margin)*this.fmt.cost.margin+(this.fmt.margin-this.fmt.softMargin)*this.fmt.cost.softMargin:t>=this.fmt.softMargin?(t-this.fmt.softMargin)*this.fmt.cost.softMargin:0}}class An extends Sn{constructor(e,...t){super(e),this.blocks=t}debug(){return"Line("+this.blocks.map((e=>e.debug())).join(", ")+")"}serialize(e){const t=[];for(const i of this.blocks)t.push(i.serialize(e)),e=i.nextCol(e);return t.join("")}nextCol(e){return this.blocks.reduce(((e,t)=>t.nextCol(e)),e)}cost(e){let t=0;for(const i of this.blocks)t+=i.cost(e),e=i.nextCol(e);return t}}class Dn extends Sn{constructor(e,...t){super(e),this.blocks=t}debug(){return"Stack("+this.blocks.map((e=>e.debug())).join(", ")+")"}serialize(e){let t="",i="";for(const n of this.blocks)t+=i+n.serialize(e),i||(i=this.fmt.linebreak()+this.fmt.indentChars(e));return t}nextCol(e){return e}cost(e){return this.blocks.reduce(((t,i)=>this.fmt.cost.linebreak+t+i.cost(e)),0)}}class Cn extends Sn{constructor(e,...t){super(e),this.blocks=t}debug(){return"Wrap("+this.blocks.map((e=>e.debug())).join(", ")+")"}solution(e){const t=[];let i=[];for(const n of this.blocks)0===i.length||new An(this.fmt,...i,n).nextCol(e)<=this.fmt.margin?i.push(n):(t.push(i),i=[n]);return 0!==i.length&&t.push(i),new Dn(this.fmt,...t.map((e=>new An(this.fmt,...e))))}serialize(e){return this.solution(e).serialize(e)}nextCol(e){return this.solution(e).nextCol(e)}cost(e){return this.solution(e).cost(e)}}class kn extends Sn{constructor(e,...t){super(e),this.blocks=t}debug(){return"Choice(\n  "+this.blocks.map((e=>e.debug())).join("\n  ")+"\n)"}choice(e){let t,i=1/0;return this.blocks.forEach((n=>{const r=n.cost(e);r<i&&(i=r,t=n)})),t}serialize(e){return this.choice(e).serialize(e)}nextCol(e){return this.choice(e).nextCol(e)}cost(e){return Math.min(...this.blocks.map((t=>t.cost(e))))}}class _n{constructor(e){var t;"space"===(null==e?void 0:e.indentChar)?e.indentChar=" ":"tab"===(null==e?void 0:e.indentChar)&&(e.indentChar="\t"),this.options={cost:{softMargin:.05,margin:100,linebreak:2,commentLinebreak:.5,flowLinebreak:.3,callLinebreak:.5,argLinebreak:5,...null!==(t=null==e?void 0:e.cost)&&void 0!==t?t:{}},indentChar:" ",indentCharWidth:1,indentWidth:2,margin:80,softMargin:50,aroundInfixOperator:" ",aroundRelationalOperator:" ",afterSeparator:" ",...null!=e?e:{}}}get cost(){return this.options.cost}get margin(){return this.options.margin}get softMargin(){return this.options.softMargin}indentChars(e=1){return("tab"===this.options.indentChar?"\t":" ").repeat(e*this.options.indentWidth)}indentLength(e=1){return e*this.options.indentWidth*this.options.indentCharWidth}linebreak(e,t){return e||t?t?e+"\n"+t:e+"\n":"\n"}countLinebreaks(e){return e.split(/\r\n|\r|\n/).length}normalizedBlocks(e){return e.map((e=>"string"==typeof e?new En(this,e):e)).filter((e=>!(e instanceof Mn)))}infixOperator(e){return new En(this,this.options.aroundInfixOperator+e+this.options.aroundInfixOperator)}relationalOperator(e){return new En(this,this.options.aroundRelationalOperator+e+this.options.aroundRelationalOperator)}separator(e){return new En(this,e+this.options.afterSeparator)}fence(e){return new En(this,e)}text(e){return e&&0!==e.length?new En(this,e):new Mn(this)}line(...e){const t=this.normalizedBlocks(e),i=[];let n="";for(const e of t)e instanceof En?n?(i.pop(),n+=e.s,i.push(new En(this,n))):(i.push(e),n=e.s):(n="",i.push(e));return 1===i.length?i[0]:new An(this,...i)}stack(...e){const t=this.normalizedBlocks(e);return 1===t.length?t[0]:new Dn(this,...t)}wrap(...e){const t=this.normalizedBlocks(e);return 1===t.length?t[0]:new Cn(this,...t)}indent(e,t=1){return new An(this,new En(this,this.indentChars(t)),e)}choice(...e){const t=this.normalizedBlocks(e);return 1===t.length?t[0]:new kn(this,...t)}fencedBlock(e,t,i){return t?this.fencedList(e,"",i,[t]):this.line(this.fence(e),this.fence(i))}fencedList(e,t,i,n){const r=this.fence(e),s=this.fence(i);if(0===n.length)return this.line(r,s);if(1===n.length)return this.line(r,n[0],s);const o=n.map((e=>this.line(e,t))),a=[...o];return a.pop(),a.push(n[n.length-1]),e||i?this.choice(this.line(r,...a,s),this.stack(r,this.indent(this.stack(...o)),s)):this.choice(this.line(...a),this.wrap(...o))}list(e,t){return this.fencedList("",e,"",t)}}const Fn=new Set(["abstract","at","and","as","assert","await","begin","break","case","catch","class","const","continue","debugger","default","delete","dynamic","do","each","else","end","export","extern","finally","for","from","function","get","global","goto","if","in","inline","interface","internal","import","label","lazy","local","loop","match","module","namespace","native","new","not","of","on","optional","or","package","private","protected","protocol","public","repeat","return","self","set","static","super","switch","this","throw","to","try","until","using","var","warn","when","where","while","with","xor","yield"]),qn={precision:15,decimalMarker:".",groupSeparator:"_",exponentProduct:"",beginExponentMarker:"e",endExponentMarker:"",notation:"auto",imaginaryNumber:"i",truncationMarker:"",beginRepeatingDigits:"",endRepeatingDigits:"",positiveInfinity:"+Infinity",negativeInfinity:"-Infinity",notANumber:"NaN"};function In(e,t){const i=new _n({...(null==t?void 0:t.fancySymbols)?{aroundInfixOperator:" ",aroundRelationalOperator:" ",afterSeparator:" "}:{},...t});function n(e){var a,l;if(null===e)return new Mn(this);const u=K(e);if(null!==u)return c=u,i.text(`"${Tn(c)}"`);var c;const f=function(e){return"object"!=typeof e?i.text():"comment"in e&&e.comment&&e.comment.length>0?i.text(`/* ${e.comment} */`):i.text()}(e);let h;if(null!==ie(e)&&(h=null!==(l=null!==(a=function(e){var t,i;return null!==(i=null===(t=s[re(e)])||void 0===t?void 0:t.call(s,e))&&void 0!==i?i:null}(e))&&void 0!==a?a:function(e){var s;const o=re(e);if(!o)return null;const a=r[o];if(!a)return null;const l=(null==t?void 0:t.fancySymbols)&&null!==(s=a.fancySymbol)&&void 0!==s?s:a.symbol;if(a.unary){if(1!==ce(e))return null;const t=ue(e,1),s=re(t),o=r[s];return o&&o.precedence<a.precedence?i.line(l,"(",n(t),")"):i.line(l,n(t))}const u=le(e,(e=>{const t=re(e),s=r[t];return s&&s.precedence<a.precedence?i.line("(",n(e),")"):n(e)}));return u?i.list(a.relational?i.relationalOperator(l):i.infixOperator(l),u):null}(e))&&void 0!==l?l:o(e)),!h){const t=se(e);null!==t&&(h=i.text(On(t)))}if(h||("number"==typeof e||B(e))&&(h=i.text(Ge(e,qn))),!h){const t=fe(e);if(null!==t){const e=Object.keys(t).map((e=>i.line(Tn(e),i.relationalOperator("->"),n(t[e]))));if(0===e.length)return i.line(i.fence("{"),i.relationalOperator("->"),i.fence("}"));h=i.fencedList("{",i.separator(","),"}",e)}}return h?f instanceof Mn?h:i.choice(i.line(f,h),i.stack(f,h)):i.text()}const r={NotElementOf:{symbol:"!in",fancySymbol:"∉",relational:!0,precedence:160},ElementOf:{symbol:"in",fancySymbol:"∈",relational:!0,precedence:240},LessEqual:{symbol:"<=",relational:!0,fancySymbol:"⩽",precedence:241},GreaterEqual:{symbol:">=",fancySymbol:"⩾",relational:!0,precedence:242},Less:{symbol:"<",relational:!0,precedence:245},Greater:{symbol:">",relational:!0,precedence:245},NotEqual:{symbol:"!=",fancySymbol:"≠",relational:!0,precedence:255},Assign:{symbol:"=",relational:!0,precedence:258},Equal:{symbol:"==",relational:!0,precedence:260},Same:{symbol:"===",fancySymbol:"≣",relational:!0,precedence:260},KeyValue:{symbol:"->",fancySymbol:"→",precedence:265},Add:{symbol:"+",precedence:275},Subtract:{symbol:"-",fancySymbol:"−",precedence:275},Multiply:{symbol:"*",fancySymbol:"×",precedence:390},Divide:{symbol:"/",fancySymbol:"÷",precedence:660},Negate:{symbol:"-",unary:!0,fancySymbol:"−",precedence:665},Power:{symbol:"^",precedence:720},Or:{symbol:"||",fancySymbol:"⋁",precedence:800},And:{symbol:"&&",fancySymbol:"⋀",precedence:810},Not:{symbol:"!",unary:!0,fancySymbol:"¬",precedence:820}},s={BaseForm:e=>{var t;const n=null!==(t=W(ue(e,2)))&&void 0!==t?t:16,r=ue(e,1),s=W(r);return null===s||Number.isNaN(s)||!Number.isFinite(s)||2!==n&&10!==n&&16!==n?o(e):2===n?i.text("0b"+Number(s).toString(2)):10===n?i.text(Ge(r,qn)):16===n?Number.isFinite(s)?Number.isInteger(s)?i.text("0x"+Number(s).toString(16)):i.text(function(e){const t="0123456789abcdef",i=e<0?"-":"";e=Math.abs(e);let n="",r=0,s=Math.trunc(e),o=e-s;if(0!==s)for(;s%2==0&&s>0;)s/=2,o/=2,r+=1;else{let e=o;for(;2*e<2;)e*=2,r-=1;s=Math.trunc(e),o=e-s}for(;0!==s;)n=t[s%16]+n,s=Math.trunc(s/16);if(n?n+=".":n="0.",0===o)n+="0";else for(;o>0;){const e=Math.trunc(16*o);n+=t[e],o=16*o-e}return i+"0x"+n+"p"+(r<0?"-":"")+Number(Math.abs(r)).toString()}(s)):i.text(Ge(r,qn)):o(e)},String:e=>i.wrap('"',...le(e,(e=>{const t=K(e);return null!==t?i.text(Tn(t)):i.fencedBlock("\\(",n(e),")")})),'"'),List:e=>i.fencedList("{",i.separator(","),"}",le(e,n)),Set:e=>0===ce(e)?i.text("EmptySet"):i.fencedList("[",i.separator(","),"]",le(e,n))};function o(e){const t=ie(e);return"string"==typeof t?i.line(On(t),i.fencedList("(",i.separator(","),")",le(e,n))):i.line("Apply(",n(t),i.separator(","),i.fencedList("[",i.separator(","),"]",le(e,n)),")")}return n(e).serialize(0)}function Pn(e){return Oi.has(e)?Oi.get(e):Gi(e)?e<65536?`\\u${("0000"+e.toString(16)).slice(-4)}`:`\\u{${("000000000"+e.toString(16)).slice(-8)}}`:String.fromCodePoint(e)}function Tn(e){let t="";const i=n(e);if("string"==typeof i)for(const e of i)t+=Pn(e.codePointAt(0));else for(const e of i)1===e.length?t+=Pn(e.codePointAt(0)):t+=e;return t}function On(e){if(Fn.has(e))return`\`${e}\``;if(/^[a-zA-Z][a-zA-Z\d_]*$/.test(e))return e;const t=e.codePointAt(0);if(Ui.has(t))return`\`${Tn(e)}\``;let i=!1;const r=n(e);let s=0;for(;!i&&s<r.length;){const e=r[s].codePointAt(0);i=Oi.has(e)||Gi(e)||Zi(e),s+=1}return i?`\`${Tn(e)}\``:e}const Ln="0.4.2";export{wi as ComputeEngine,at as ExpressionMap,Ve as LatexSyntax,rt as count,Ei as evaluate,Mi as format,nt as match,Ye as parse,wn as parseCortex,Je as serialize,In as serializeCortex,st as substitute,Ln as version};
